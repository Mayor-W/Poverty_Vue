webpackJsonp([1],{"/wR1":function(e,t){},"0/9m":function(e,t){},"0SV3":function(e,t){},"1H3y":function(e,t){},"4odc":function(e,t){},"96DD":function(e,t){},"9Zue":function(e,t){},"AfM+":function(e,t){},H0DG:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),s=(a("0/9m"),a("4odc"),a("zL8q")),r=a.n(s),n=(a("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{attrs:{id:"hearder2"}}),this._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!this.isLoadShow,expression:"!isLoadShow"}],attrs:{id:"bodyer"}},[t("router-view",{attrs:{earseLoad:this.earseLoad}})],1)])},staticRenderFns:[]});var o=a("VU/8")({data:function(){return{isLoadShow:!1}},mounted:function(){this.isLoadShow=!0},methods:{earseLoad:function(){1==this.isLoadShow&&(this.isLoadShow=!1)}}},n,!1,function(e){a("gid0")},null,null).exports,l=a("/ocq"),h=a("bOdI"),c=a.n(h),d=a("d7EF"),u=a.n(d),p=a("Meid"),m={data:function(){return{rendType:"",isShow:!0,alreadyRun:1,isStart:!1,timer:0,closeOrOpen:"el-icon-circle-close",marks:{1:{style:{color:"#FF8247",fontSize:"15px"},label:this.$createElement("strong","2012")},49:{style:{color:"#FF8247",fontSize:"15px"},label:this.$createElement("strong","2013")},97:{style:{color:"#FF8247",fontSize:"15px"},label:this.$createElement("strong","2014")},145:{style:{color:"#FF8247",fontSize:"15px"},label:this.$createElement("strong","2015")},193:{style:{color:"#FF8247",fontSize:"15px"},label:this.$createElement("strong","2016")},244:{style:{color:"#FFFF00",fontSize:"15px"},label:this.$createElement("strong","2017")},365:{style:{color:"#FFFF00",fontSize:"15px"},label:this.$createElement("strong","2018")},487:{style:{color:"#FFFF00",fontSize:"15px"},label:this.$createElement("strong","2019")},608:{style:{color:"#FFFF00",fontSize:"15px"},label:this.$createElement("strong","2020")},732:{style:{color:"#FFFF00",fontSize:"15px"},label:this.$createElement("strong","2021")}}}},methods:{startRun:function(){var e=this;if(this.isStart)this.isStart=!1,clearInterval(this.timer);else{732==this.alreadyRun&&(this.alreadyRun=0),this.isStart=!0;var t=this.alreadyRun;this.timer=setInterval(function(){t<732&&(t++,e.alreadyRun=t)},50)}},changePoor:function(e){this.updateNumChart(e),this.updateTime(e),"fireFly"==this.rendType?this.changeArea(e):"jY"==this.rendType?this.changeNoSee(e):"heat"==this.rendType&&this.changeHeatmap(e)},controlTime:function(){var e=this;!0===this.isShow?(this.isStart=!1,this.isShow=!1,clearInterval(this.timer),setTimeout(function(){e.closeOrOpen="el-icon-circle-check"},3e3),document.getElementById("timebar").style.width="0px"):(setTimeout(function(){e.isShow=!0,e.closeOrOpen="el-icon-circle-close"},3e3),document.getElementById("timebar").style.width="726px")}},watch:{alreadyRun:function(e){732==e&&(this.isStart=!1),this.changePoor(e)}},props:{changeArea:Function,changeNoSee:Function,changeHeatmap:Function,updateNumChart:Function,updateTime:Function}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"timeAxis-bodyer"}},[a("el-button",{attrs:{id:"timestart2",size:"mini",type:"success",plain:"",disabled:!e.isShow},on:{click:e.startRun}},[e._v("Start")]),e._v(" "),a("div",{attrs:{id:"timebar"}},[a("div",{staticClass:"block",attrs:{id:"timeslider"}},[a("el-slider",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{max:732,min:1,"show-tooltip":!1,marks:e.marks},model:{value:e.alreadyRun,callback:function(t){e.alreadyRun=t},expression:"alreadyRun"}})],1)]),e._v(" "),a("el-button",{attrs:{size:"small",id:"controlTime",icon:e.closeOrOpen,type:"danger"},on:{click:e.controlTime}})],1)},staticRenderFns:[]};var g=a("VU/8")(m,v,!1,function(e){a("j5UU")},null,null).exports,f=(a("4f4F"),a("LK9V"),{name:"viewDiv",components:{timeAxis:g},methods:{_createMapView:function(){var e=this,t=this;Object(p.loadModules)(["esri/config","esri/WebMap","esri/Map","esri/Basemap","esri/layers/MapImageLayer","esri/views/MapView","esri/views/SceneView","esri/layers/FeatureLayer","esri/widgets/Compass","esri/widgets/ScaleBar","esri/widgets/Bookmarks","dojo/dom","esri/widgets/Search","esri/widgets/Expand","esri/widgets/BasemapGallery","esri/layers/GraphicsLayer","esri/widgets/Sketch","esri/widgets/BasemapToggle","esri/widgets/DistanceMeasurement2D","esri/widgets/AreaMeasurement2D","esri/widgets/Locate","esri/widgets/LayerList","esri/widgets/CoordinateConversion","esri/layers/support/LabelClass","dojo/_base/Color","esri/symbols/Font","esri/symbols/TextSymbol","dojo/on","esri/renderers/Renderer","esri/renderers/ClassBreaksRenderer","esri/widgets/Legend","esri/geometry/Point","esri/widgets/Swipe","esri/layers/TileLayer","esri/geometry/geometryEngine","esri/tasks/QueryTask","esri/tasks/support/Query","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/Graphic","dojo/_base/declare","dojo/_base/lang","esri/geometry/Point","esri/geometry/SpatialReference","esri/smartMapping/renderers/univariateColorSize","esri/smartMapping/statistics/histogram","esri/widgets/smartMapping/ColorSizeSlider","esri/tasks/support/PrintTemplate","esri/tasks/PrintTask","esri/tasks/support/PrintParameters","dojo/domReady!"],{url:"https://js.arcgis.com/4.18/",css:"https://js.arcgis.com/4.18/esri/themes/light/main.css"}).then(function(a){var i=u()(a,50),s=i[0],r=i[1],n=i[2],o=i[3],l=i[4],h=i[5],c=i[6],d=i[7],p=(i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15]),m=i[16],v=(i[17],i[18],i[19],i[20],i[21],i[22],i[23],i[24],i[25],i[26],i[27],i[28],i[29]),g=i[30],f=i[31],w=i[32],y=i[33],b=i[34],C=i[35],x=i[36],S=(i[37],i[38],i[39]),_=i[40],A=i[41],I=(i[42],i[43]),D=i[44],F=i[45],k=i[46],L=i[47],M=i[48],O=i[49];s.apiKey="AAPKf36563646971486495a735ebc79605460PP-JogfopxIQxEW9cdNBRAYKlZVdvdzQhCtLCo4qsJ3TqjCa-dF-Pc25egARMZ4",e.legend=g,e.Point=f,e.Map=n,e.MapView=h,e.SceneView=c,e.Swipe=w,e.FeatureLayer=d,e.TileLayer=y,e.GraphicsLayer=p,e.Graphic=S,e.colorAndSizeRendererCreator=D,e.histogram=F,e.ColorSizeSlider=k;e.ClassBreaksRenderer=v,e.echartsLayer=_("EchartsLayer",null,{name:"EchartsLayer",view:null,box:null,chart:null,chartOption:null,visible:!0,constructor:function(e,a){t.$echarts.registerCoordinateSystem("arcgis",this.getE3CoordinateSystem(e)),this.init(e,a)},init:function(e,t){this.setBaseMap(e),this.createLayer()},setBaseMap:function(e){this.view=e},setChartOption:function(e){this.chartOption=e,this.setCharts()},setVisible:function(e){this.box&&this.visible!==e&&(this.box.hidden=!e,this.visible=e,!0===e&&setCharts())},refreshBegin:function(){this.box.hidden=!0},refreshing:function(){setCharts()},refreshEnd:function(){this.box.hidden=!1},on:function(e,t,a){this.chart.on(e,t,a)},off:function(e,t,a){this.chart.off(e,t,a)},map_DragStart_Listener:null,map_DragEnd_Listener:null,map_ZoomStart_Listener:null,map_ZoomEnd_Listener:null,map_ExtentChange_Listener:null,map_click_Listener:null,setCharts:function(){if(this.visible&&null!=this.chartOption&&"undefined"!=this.chartOption){var e=t.view.extent;this.chartOption.xAxis={show:!1,min:e.xmin,max:e.xmax},this.chartOption.yAxis={show:!1,min:e.ymin,max:e.ymax},this.chart.setOption(this.chartOption),this.chartOption.animation=!1}},createLayer:function(){var e=this.box=document.createElement("div");e.setAttribute("id","testData"),e.setAttribute("name","testData"),e.style.width=this.view.width+"px",e.style.height=this.view.height+"px",e.style.position="absolute",e.style.top=0,e.style.left=0,document.getElementsByClassName("esri-view-surface")[0].appendChild(e),this.chart=t.$echarts.init(e),this.startMapEventListeners()},removeLayer:function(){this.box.outerHTML="",this.visible=!1,this.view=null,this.box=null,this.originLyr=null,this.features=null,this.screenData=[],this.chart=null,this.chartOption=null},startMapEventListeners:function(){var e=this.view;e.watch("extent",A.hitch(this,function(){this.visible&&(this.setCharts(),this.chart.resize(),this.box.hidden=!1)})),e.watch("rotation",A.hitch(this,function(){this.visible&&(this.setCharts(),this.chart.resize(),this.box.hidden=!1)}))},getE3CoordinateSystem:function(e){var t=function(e){this.map=e,this._mapOffset=[0,0]};return t.create=function(a){a.eachSeries(function(a){"arcgis"===a.get("coordinateSystem")&&(a.coordinateSystem=new t(e))})},t.getDimensionsInfo=function(){return["x","y"]},t.dimensions=["x","y"],t.prototype.dimensions=["x","y"],t.prototype.setMapOffset=function(e){this._mapOffset=e},t.prototype.dataToPoint=function(t){var a={type:"point",x:t[0],y:t[1],spatialReference:new I(4326)},i=e.toScreen(a),s=this._mapOffset;return[i.x-s[0],i.y-s[1]]},t.prototype.pointToData=function(t){var a=this._mapOffset,i={x:t[0]+a[0],y:t[1]+a[1]},s=e.toMap(i);return[s.x,s.y]},t.prototype.getViewRect=function(){return new graphic.BoundingRect(0,0,this.map.width,this.map.height)},t.prototype.getRoamTransform=function(){return matrix.create()},t}});var T=new r({portalItem:{id:"f6d8940c761b4396bf5774275b2a409c"}});e.webmap=T,e.graphicsLayer_=1;var P=new h({container:"viewDiv",map:T,center:[116.3,32],zoom:4});e.testView=P,e.testExent=P.extent;var N=new n({basemap:new o({baseLayers:[new l({url:"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer?f=jsapi",title:"Basemap"})],title:"basemap",id:"basemap"})});e.map3D=N;var B=new c({container:"view3DDiv",map:N,camera:{tilt:52,heading:355.8,position:{x:120.36,y:35.9,z:822291}}});e.view3D=B;var E=new h({container:"eagleEyeDiv",map:T,center:[116.3,32],zoom:4});e.eagleview=E;var z=new e.echartsLayer(e.testView,e.$echarts);e.autoLinecChart=z,setInterval(function(){e.testView.zoom<=2&&(e.testView.zoom=3)},1);var $=new d({url:"https://services3.arcgis.com/XDzy9VWpT2sZyZqz/arcgis/rest/services/MeanCenter/FeatureServer/0"}),R=new d({url:"https://services3.arcgis.com/XDzy9VWpT2sZyZqz/arcgis/rest/services/StandardDeviationalEllipse/FeatureServer/0"}),V=new d({url:"https://services3.arcgis.com/XDzy9VWpT2sZyZqz/arcgis/rest/services/HotSpotGZ/FeatureServer/0"}),q=new d({url:"https://services3.arcgis.com/XDzy9VWpT2sZyZqz/arcgis/rest/services/ClusterGZ/FeatureServer/0"});function G(e,t,a){return{value:e,symbol:{color:t,type:"simple-fill",style:a,outline:{width:1,color:t}},label:e}}function Y(e,t,a){return{value:e,symbol:{color:t,type:"simple-marker",size:"12px"},label:e}}var H={type:"unique-value",field:"年份",uniqueValueInfos:[G("2015","#fff","none"),G("2016","#9E559C","none"),G("2017","#A7C636","none"),G("2018","#149ECE","none"),G("2019","#ED5151","none")]},W={type:"unique-value",field:"Id",uniqueValueInfos:[Y("2015","#fff"),Y("2016","#9E559C"),Y("2017","#A7C636"),Y("2018","#149ECE"),Y("2019","#ED5151")]},U=[];U.push({type:"simple-marker",size:11,color:"rgb(69,117,181)"}),U.push({type:"simple-marker",size:9,color:"rgb(132,158,186)"}),U.push({type:"simple-marker",size:7,color:"rgb(192,204,190)"}),U.push({type:"simple-marker",size:6,color:"rgb(255,255,191)"}),U.push({type:"simple-marker",size:7,color:"rgb(250,185,132)"}),U.push({type:"simple-marker",size:9,color:"rgb(237,117,81)"}),U.push({type:"simple-marker",size:11,color:"rgb(214,47,39)"}),e.hotSpotSymbol=U;var X=[];X.push({type:"simple-marker",size:11,color:"rgb(27,80,224)"}),X.push({type:"simple-marker",size:11,color:"rgb(153,208,232)"}),X.push({type:"simple-marker",size:8,color:"rgb(247,247,242)"}),X.push({type:"simple-marker",size:11,color:"rgb(224,27,27)"}),X.push({type:"simple-marker",size:11,color:"rgb(240,171,144)"}),e.clusterSymbol=X,e.standardEllipse=R,e.meanCenter=$,e.standardEllipse.renderer=H,e.meanCenter.renderer=W,e.ClusterGZ=q,e.HotSpotGZ=V;var Z=new e.legend({view:e.testView,layerInfos:[{title:" ",layer:e.standardEllipse}]});e.legendE=Z;var j=new e.legend({view:e.testView,layerInfos:[{title:" ",layer:e.HotSpotGZ}]});e.legendHotSpot=j;var J=new e.legend({view:e.testView,layerInfos:[{title:" ",layer:e.ClusterGZ}]});e.legendCluster=J;var Q=[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"name",alias:"name",type:"string"},{name:"time",alias:"time",type:"double"}],K=new d({fields:Q});e.abcSelectionPointLayer=K;var ee=new d({fields:Q});e.abcSelectionLineLayer=ee;var te=new d({fields:Q});e.areaSelectionLayer=te;var ae=new d({fields:Q});e.areaSelection3DLayer=ae;var ie=new p({});e.figureLayer=ie;var se=new m({layer:ie,view:E,creationMode:"update"});se.visibleElements={createTools:{point:!1,polyline:!1},selectionTools:{"lasso-selection":!1},settingsMenu:!1},e.sketch=se;var re=new C({url:"https://services3.arcgis.com/XDzy9VWpT2sZyZqz/arcgis/rest/services/countyPoint/FeatureServer/0"});e.figureqTask=re;var ne=new x({returnGeometry:!0,outFields:["*"]});ne.outSpatialReference=T.outSpatialReference,ne.spatialRelationship=x.SPATIAL_REL_INTERSECTS,e.figureQuery=ne;var oe=new M({url:"https://utility.arcgisonline.com/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"});e.printTask=oe;var le=new L({format:"png32",exportOptions:{dpi:300},layout:"a4-landscape"}),he=new O({view:P,template:le});e.params=he,T.when(function(){T.loadAll().then(function(){e.earseLoad()}),e.c=document.getElementById("GDP3Dcharts"),document.getElementById("mapShow-body").addEventListener("mousemove",e.mouseMove),e.c.addEventListener("mousedown",e.mouseDown),document.getElementById("mapShow-body").addEventListener("mouseup",e.mouseUp),t.basemap=T.allLayers.items[0],t.testfl=T.allLayers.items[2],t.testfpl=T.allLayers.items[1],e.pDefaultRenderer=t.testfpl.renderer;t.testfl;var a=t.testfl.createQuery();e.nameabcQuery=a;var i=t.testfl.createQuery();e.connectareaQuery=i;var s=t.testfpl.createQuery();e.provinceQuery=s,e.changeArea(e.$refs.timeChild.alreadyRun),e.$refs.timeChild.rendType="fireFly",e.changeCluster();var r=new e.legend({view:e.testView,layerInfos:[{title:" ",layer:e.testfl}]});e.legendd=r,e.testView.ui.add(r,"bottom-left");var n=e;e.sketch.on("create",function(e){"complete"===e.state&&(n.eagleview.graphics.removeAll(),n.queryTask(e.graphic.geometry))}),e.changeClassBreak();var o={geometry:{},returnGeometry:!0,outFields:["*"]},l=new p,h=new p,c=new p;e.graphicsLayer=l,e.graphicsLayer2=h,e.clickGraphicsLayer=c,T.layers.unshift(c),T.layers.unshift(l);var d=function(t,a){e.graphicsLayer2.graphics.removeAll();var i=[];t.features.forEach(function(t,s){t.attributes.time>a?(i.push({geometry:t.geometry,attributes:{ObjectID:s,name:t.attributes.name,date:new Date(parseInt(t.attributes.date)).toLocaleString().split(" ")[0]}}),e.currentColor[s]="#66afe9"):e.currentColor[s]="#CD5C5C"}),e.currentNum=i.length,e.isPoorShow=!0;var s=new e.FeatureLayer({fields:[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"name",alias:"name",type:"string"},{name:"date",alias:"date",type:"string"}],source:i});s.labelingInfo=[{symbol:{type:"text",color:"#7FFFD4",font:{family:"Playfair Display",size:8,weight:"bold"}},labelPlacement:"below-center",labelExpressionInfo:{expression:"$feature.name"}}],s.renderer={type:"simple",symbol:{type:"picture-marker",url:"static/img/屋子.png",width:"30px",height:"30px"}},s.popupTemplate={title:"{name}",content:[{type:"fields",fieldInfos:[{fieldName:"date",label:"脱贫时间："}]}]},1===e.graphicsLayer_&&(e.graphicsLayer_=s,e.webmap.add(e.graphicsLayer_))};e.displayResult=d,e.view=P,P.on("click",function(t){var a=b.geodesicBuffer(t.mapPoint,15,"kilometers");o.geometry=a,e.testfl.queryFeatures(o).then(function(a){var i=a.features[0];if(21==e.MODE){e.meanCenter.popupEnabled=!0,e.standardEllipse.popupEnabled=!0;var s="中国";if(e.testfl.popupEnabled=!1,"1"==e.spatialAnalystMode)e.meanCenter.queryFeatures(o).then(function(a){a.features[0]||(e.meanCenter.popupEnabled=!1,e.standardEllipse.popupEnabled=!1,o.geometry=P.toMap(t),e.testfpl.queryFeatures(o).then(function(t){var a=t.features[0];if("江西省"==a.attributes.name){if("Jiangxi"==e.ellipseMode){e.ellipseMode="China",s="中国",e.view.graphics.removeAll(),e.graphicsLayer.graphics.removeAll(),e.graphicsLayer2.graphics.removeAll(),e.basemap.visible=!0;var i=new e.Point({latitude:32,longitude:116.3});e.view.goTo({target:i,zoom:4},{duration:1e3})}else if("China"==e.ellipseMode){e.ellipseMode="Jiangxi",s="江西省",e.testfl.visible=!1,e.testfpl.visible=!1,parseInt(a.attributes.Join_Count)<=10?c="#ffffcc":parseInt(a.attributes.Join_Count)<=30&&parseInt(a.attributes.Join_Count)>=1?c="#a1dab4":parseInt(a.attributes.Join_Count)>=31&&parseInt(a.attributes.Join_Count)<=50?c="#2c7fb8":parseInt(a.attributes.Join_Count)>=51&&parseInt(a.attributes.Join_Count)<=100&&(c="#325361");var r={type:"simple-line",color:c,outline:null};e.view.goTo({target:[115.914271,28.668507],zoom:6},{duration:1e3}),a.symbol=r,l.graphics.add(a)}e.handleCheckedYearsChange_1(e.spatialYearList_1)}else if("河南省"==a.attributes.name){if("Henan"==e.ellipseMode){e.ellipseMode="China",s="中国",e.view.graphics.removeAll(),e.graphicsLayer.graphics.removeAll(),e.graphicsLayer2.graphics.removeAll(),e.basemap.visible=!0;var n=new e.Point({latitude:32,longitude:116.3});e.view.goTo({target:n,zoom:4},{duration:1e3})}else if("China"==e.ellipseMode){e.ellipseMode="Henan",s="河南省",e.testfl.visible=!1,e.testfpl.visible=!1,parseInt(a.attributes.Join_Count)<=10?c="#ffffcc":parseInt(a.attributes.Join_Count)<=30&&parseInt(a.attributes.Join_Count)>=1?c="#a1dab4":parseInt(a.attributes.Join_Count)>=31&&parseInt(a.attributes.Join_Count)<=50?c="#2c7fb8":parseInt(a.attributes.Join_Count)>=51&&parseInt(a.attributes.Join_Count)<=100&&(c="#325361");var o={type:"simple-line",color:c,outline:null};e.view.goTo({target:[113.765129,34.760326],zoom:6},{duration:1e3}),a.symbol=o,l.graphics.add(a)}e.handleCheckedYearsChange_1(e.spatialYearList_1)}else if("青海省"==a.attributes.name){if("Qinhai"==e.ellipseMode){e.ellipseMode="China",s="中国",e.view.graphics.removeAll(),e.graphicsLayer.graphics.removeAll(),e.graphicsLayer2.graphics.removeAll(),e.basemap.visible=!0;var h=new e.Point({latitude:32,longitude:116.3});e.view.goTo({target:h,zoom:4},{duration:1e3})}else if("China"==e.ellipseMode){var c;e.ellipseMode="Qinhai",s="青海省",e.testfl.visible=!1,e.testfpl.visible=!1,parseInt(a.attributes.Join_Count)<=10?c="#ffffcc":parseInt(a.attributes.Join_Count)<=30&&parseInt(a.attributes.Join_Count)>=1?c="#a1dab4":parseInt(a.attributes.Join_Count)>=31&&parseInt(a.attributes.Join_Count)<=50?c="#2c7fb8":parseInt(a.attributes.Join_Count)>=51&&parseInt(a.attributes.Join_Count)<=100&&(c="#325361");var d={type:"simple-line",color:c,outline:null};e.view.goTo({target:[101.791632,36.633645],zoom:6},{duration:1e3}),a.symbol=d,l.graphics.add(a)}e.handleCheckedYearsChange_1(e.spatialYearList_1)}var u={title:s+"贫困县平均中心",content:"<table><tr><th>年份</th><td>{Id}</td></tr><tr><th>位置</th><td>{XCoord} E,{YCoord} N</td></tr></table>",fieldInfos:[{fieldName:"name",format:{digitSeparator:!0,places:0}}]};e.meanCenter.popupTemplate=u;var p={title:s+"贫困县标准差椭圆",content:"<table><tr><th>年份</th><td>{Id}</td></tr><tr><th>中心坐标</th><td>{XCoord} E,{YCoord} N</td></tr><tr><th>方向</th><td>{Rotation} °</td></tr><tr><th>X轴长</th><td>{XStdDist}</td></tr><tr><th>Y轴长</th><td>{YStdDist}</td></tr></table>",fieldInfos:[{fieldName:"name",format:{digitSeparator:!0,places:0}}]};e.standardEllipse.popupTemplate=p}))});else if("2"==e.spatialAnalystMode){var r=14+e.spatialYear_2/2,n="";switch(e.spotClusterTarget){case 1:n="G"+r.toString();break;case 2:n="K"+r.toString();break;case 3:n="N"+r.toString()}var h={title:"{name}",content:"<table><tr><th>省份</th><td>{province}</td></tr><tr><th>脱贫日期</th><td>{date}</td></tr><tr><th>GiZScore</th><td>{"+n+"GiZScor}</td></tr><tr><th>GiPValue</th><td>{"+n+"GiPValu}</td></tr></table>",fieldInfos:[{fieldName:"name",format:{digitSeparator:!0,places:0}}]};e.HotSpotGZ.popupTemplate=h}else if("3"==e.spatialAnalystMode){var c=14+e.spatialYear_2/2,u="";switch(e.spotClusterTarget){case 1:u="G"+c.toString();break;case 2:u="K"+c.toString();break;case 3:u="N"+c.toString()}var p={title:"{name}",content:"<table><tr><th>省份</th><td>{province}</td></tr><tr><th>脱贫日期</th><td>{date}</td></tr><tr><th>LMiIndex</th><td>{"+u+"LMiInde}</td></tr><tr><th>LMiZScore</th><td>{"+u+"LMiZSco}</td></tr><tr><th>LMiPValue</th><td>{"+u+"LMiPVal}</td></tr><tr><th>COType</th><td>{"+u+"COType}</td></tr></table>",fieldInfos:[{fieldName:"name",format:{digitSeparator:!0,places:0}}]};e.ClusterGZ.popupTemplate=p}}else 22==e.MODE?i&&1==e.inputFlag&&(e.inputFlag=!1,e.inputValue=i.attributes.name,e.handleInputConfirm()):i||1!=Math.round(e.MODE/10)?16==e.MODE&&(o.geometry=P.toMap(t),e.testfpl.queryFeatures(o).then(function(t){var a=t.features[0];if(a){var i=e;[["甘肃省",e.GanSuData],["广西壮族自治区",e.GuangXiData],["新疆维吾尔自治区",e.XinJiangData],["西藏自治区",e.XiZangData],["青海省",e.QingHaiData],["宁夏回族自治区",e.NingXiaData],["内蒙古自治区",e.NeiMengGuData],["贵州省",e.GuiZhouData],["四川省",e.SiChuanData],["云南省",e.YunNanData],["湖南省",e.HuNanData],["湖北省",e.HuBeiData],["河北省",e.HeBeiData],["重庆市",e.ChongQingData],["吉林省",e.JiLinData],["陕西省",e.ShanXiData]].forEach(function(e,t){if(e[0]==a.attributes.name)if(i.autoLinecChart.chart&&i.autoLinecChart.chartOption.series.length<31){i.autoLinecChart.removeLayer();var s=new i.echartsLayer(i.testView,i.$echarts);i.autoLinecChart=s;var r={series:i.allSeries};i.autoLinecChart.setChartOption(r),i.testfpl.popupEnabled=!0}else{i.autoLinecChart.removeLayer(),i.testfpl.popupEnabled=!1;var n=new i.echartsLayer(i.testView,i.$echarts);i.autoLinecChart=n;var o=["#de1c31","#12a182","#813c85","#11659a","#fed71a","#8e804b","#f9723d","#f9e8d0","#e16c96","#28FF28","#FCFCFC","#CECEFF","#708090","\t#4DFFFF","#FF359A","#AD5A5A","#B3D9D9"],l=[];l.push({name:e[0]+" Top10",type:"lines",coordinateSystem:"arcgis",effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbolSize:3},lineStyle:{color:o[t],width:1,curveness:.2,opacity:.2},data:i.convertData(e[1])},{name:e[0]+" Top10",type:"lines",coordinateSystem:"arcgis",symbol:["none","arrow"],symbolSize:10,effect:{show:!0,period:6,trailLength:.1,symbol:"pin",symbolSize:8,color:"#FFE53B"},lineStyle:{color:o[t],width:1.5,opacity:.6,curveness:.2},data:i.convertData(e[1])});r={series:l};i.autoLinecChart.setChartOption(r)}}),e.currentArea=a.attributes.name}})):(o.geometry=P.toMap(t),e.testfpl.queryFeatures(o).then(function(a){var i=a.features[0];if(e.provincesHref.forEach(function(t){t.name+"省"==i.attributes.name&&(e.targetUrl=t.url)}),i){if(0!=e.isS)return;var s;e.isS=!0,e.testfpl.visible=!1,e.basemap.visible=!1,parseInt(i.attributes.Join_Count)<=10?s="#ffffcc":parseInt(i.attributes.Join_Count)<=30&&parseInt(i.attributes.Join_Count)>=1?s="#a1dab4":parseInt(i.attributes.Join_Count)>=31&&parseInt(i.attributes.Join_Count)<=50?s="#2c7fb8":parseInt(i.attributes.Join_Count)>=51&&parseInt(i.attributes.Join_Count)<=100&&(s="#325361");var r={type:"simple-fill",color:s,outline:null};P.goTo({target:P.toMap(t),extent:i.geometry.extent.clone().expand(1.8),zoom:8},{duration:1e3}),i.symbol=r,l.graphics.add(i);var n={geometry:i.geometry,returnGeometry:!0,outFields:["*"]};e.testfl.queryFeatures(n).then(function(t){e.result=t,e.testfl.visible=!1;for(var a=e.$refs.timeChild.alreadyRun,s=244;s<=732;s++){var r=0;t.features.forEach(function(e){e.attributes.time>s&&r++}),e.poorAN[s-244]=r}var n=e.poorAN[0];e.numChartOption.yAxis[0].data=function(){for(var e=[],t=0;t<=n+5;t++)e.push(t);return e}(),e.numChartOption.series[0].data=[],e.axios.get("http://120.27.240.160:3000/getcentermoney?province="+i.attributes.name).then(function(t){if(t.data.length<=0)e.$message({message:i.attributes.name+"暂无中央财政专项专项资金数据",type:"warning"}),e.centerM=[0,0,0,0,0,0,0,0];else{e.centerM=[];for(var a=0;a<3;a++)e.centerM.push(0);for(a=2016;a<=2020;a++)e.centerM.push(t.data[0]["a"+a]/1e5)}e.GDPChartOption.series[0].data=[],e.axios.get("http://120.27.240.160:3000/getaveragemoney?poorarea="+i.attributes.name).then(function(t){if(t.data.length<=0)e.$message({message:i.attributes.name+"暂无人均可支配收入数据",type:"warning"}),e.poorM=[0,0,0,0,0,0,0,0];else{e.poorM=[];for(var a=2013;a<=2019;a++)e.poorM.push(t.data[0]["a"+a]/1e4);e.poorM.push(0)}}),e.GDPChartOption.series[1].data=[],e.updateNumChart(e.$refs.timeChild.alreadyRun),e.GDPChart.setOption(e.GDPChartOption),e.numChart.setOption(e.numChartOption)}),e.axios.get("http://120.27.240.160:3000/getpoorpeoplebyname?area="+i.attributes.name).then(function(t){if(0==t.data.length)e.$message({message:i.attributes.name+"暂无贫困人口数据",type:"warning"}),e.poorN=[0,0,0,0,0,0,0,0];else{e.poorN=[];for(var a=2012;a<=2018;a++)e.poorN.push(parseFloat(t.data[0][a.toString()])/10);e.poorN.push(0),e.poorN.push(0)}e.poorChartOption.series[0].data=[],e.axios.get("http://120.27.240.160:3000/getpoorlvbyname?area="+i.attributes.name).then(function(t){if(0==t.data.length)e.$message({message:i.attributes.name+"暂无贫困发生率数据",type:"warning"}),e.poorL=[0,0,0,0,0,0,0,0];else{e.poorL=[];for(var a=2012;a<=2018;a++)e.poorL.push(100*parseFloat(t.data[0][a.toString()]));e.poorL.push(0),e.poorL.push(0)}e.poorChartOption.series[1].data=[],e.updateNumChart(e.$refs.timeChild.alreadyRun),e.poorChart.setOption(e.poorChartOption)})}),d(t,a),e.btnShow=!1,e.testView.ui.remove(e.legendd),t.features.forEach(function(t){e.currentPoor.push(t.attributes.name)})}),e.currentArea=i.attributes.name}}))})}),P.ui.remove("zoom"),P.ui.remove("attribution"),E.on("click",function(t){1==e.areaMode&&(o.geometry=E.toMap(t),e.testfpl.queryFeatures(o).then(function(a){var i=a.features[0];if(i){e.basemap.visible=!1;var s={type:"simple-fill",color:"#ffffcc",outline:null};e.queryTask(i.geometry),E.goTo({target:E.toMap(t),extent:i.geometry.extent.clone().expand(1.8),zoom:5},{duration:1e3}),i.symbol=s,l.graphics.add(i),e.testfl.visible=!1}}))})})}).catch(function(e){t.$message("地图创建失败，"+e)})},windowShow:function(e){this.MODE=e,this.areaSelectmode=0,16==e?(this.isChartShow=!1,this.isNewsShow=!1,this.isCurrrentNewsShow=!1,this.timeAndPoorShow=!1,this.isTimeShow=!1,this.iscontrastABCShow=!1,this.isArea3DShow=!1,this.isChartShowTwoOne=!1,this.isChartShow2_2=!1,this.isChartShow2_3_down=!1,this.isChartShow2_3_up=!1,this.isYearSliderShow=!1):1==Math.round(e/10)?(this.testfpl.popupEnabled=!0,this.testfl.popupEnabled=!0,this.isChartShow=!0,this.isNewsShow=!0,this.isCurrrentNewsShow=!0,this.timeAndPoorShow=!0,this.isTimeShow=!0,this.iscontrastABCShow=!1,this.isArea3DShow=!1,this.isChartShowTwoOne=!1,this.isChartShow2_2=!1,this.isChartShow2_3_up=!1,this.isChartShow2_3_down=!1,this.isYearSliderShow=!1):21==e?(console.log(1111),this.isChartShowTwoOne=!0,this.testfpl.popupEnabled=!1,this.isChartShow=!1,this.isNewsShow=!1,this.isCurrrentNewsShow=!1,this.timeAndPoorShow=!1,this.isTimeShow=!1,this.iscontrastABCShow=!1,this.isArea3DShow=!1,this.isChartShow2_2=!1,this.isChartShow2_3_up=!1,this.isChartShow2_3_down=!1,this.isYearSliderShow=!1,this.view.goTo({target:[109.3,36.5],zoom:5},{duration:1e3})):22==e?(this.testfpl.popupEnabled=!1,this.isChartShow=!1,this.isNewsShow=!1,this.isCurrrentNewsShow=!1,this.timeAndPoorShow=!1,this.isTimeShow=!1,this.iscontrastABCShow=!0,this.isChartShowTwoOne=!1,this.isArea3DShow=!1,this.isChartShow2_3_up=!1,this.isChartShow2_3_down=!1,this.isYearSliderShow=!1,this.view.goTo({target:[106.70741,26.598194],zoom:7},{duration:1e3})):23==e?(this.isChartShow=!1,this.isNewsShow=!1,this.isCurrrentNewsShow=!1,this.timeAndPoorShow=!1,this.isTimeShow=!1,this.iscontrastABCShow=!1,this.isChartShowTwoOne=!1,this.isChartShow2_2=!1,this.isArea3DShow=!0):5==Math.round(e/10)&&(this.isChartShow=!1,this.isNewsShow=!1,this.isCurrrentNewsShow=!1,this.timeAndPoorShow=!1,this.isTimeShow=!1,this.iscontrastABCShow=!1,this.isArea3DShow=!1,this.isChartShowTwoOne=!1,this.isChartShow2_2=!1,this.isChartShow2_3_up=!1,this.isChartShow2_3_down=!1,this.isYearSliderShow=!1)},changeClassBreak:function(){var e=new this.ClassBreaksRenderer({field:"Join_Count",legendOptions:{title:" "},classBreakInfos:[{minValue:0,maxValue:10,symbol:{type:"simple-fill",color:"#ffffcc",style:"solid",outline:{width:.2,color:[255,255,255,.2]}},label:"0-10个贫困县"},{minValue:11,maxValue:30,symbol:{type:"simple-fill",color:"#a1dab4",style:"solid",outline:{width:.2,color:[255,255,255,.2]}},label:"11-30个贫困县"},{minValue:31,maxValue:50,symbol:{type:"simple-fill",color:"#2c7fb8",style:"solid",outline:{width:.2,color:[255,255,255,.2]}},label:"31-50个贫困县"},{minValue:51,maxValue:100,symbol:{type:"simple-fill",color:"#325361",style:"solid",outline:{width:.2,color:[255,255,255,.2]}},label:"51-100个贫困县"}]});this.testfpl.renderer=e},changeCluster:function(){this.testfl.featureReduction=this.clusterConfig},changeHeatmap:function(e){""!=this.expression&&"()"!==this.expression?this.testfl.definitionExpression="(time > "+e+") and "+this.expression:this.testfl.definitionExpression="time > "+e,this.testfl.renderer={type:"heatmap",field:"time",colorStops:[{ratio:0,color:"rgba(255, 255, 255, 0)"},{ratio:.2,color:"rgba(255, 255, 255, 1)"},{ratio:.5,color:"rgba(255, 140, 0, 1)"},{ratio:.8,color:"rgba(255, 140, 0, 1)"},{ratio:1,color:"rgba(255, 0, 0, 1)"}],minPixelIntensity:0,maxPixelIntensity:1e4}},changeNoSee:function(e){var t=[];t.push({type:"simple-marker",size:6,color:"#abdda4"}),t.push({type:"simple-marker",size:6,color:"#2b83ba"}),t.push({type:"simple-marker",size:6,color:"#fdae61"}),t.push({type:"simple-marker",size:6,color:"#d7191c"});var a=new this.ClassBreaksRenderer({field:"time",legendOptions:{title:" "},classBreakInfos:[{minValue:122,maxValue:365,symbol:t[0],label:"2017-2018年摘帽县"},{minValue:366,maxValue:487,symbol:t[1],label:"2018-2019年摘帽县"},{minValue:488,maxValue:609,symbol:t[2],label:"2019-2020年摘帽县"},{minValue:610,maxValue:732,symbol:t[3],label:"2020-2021年摘帽县"}]});this.testfl.renderer=a,""!=this.expression&&"()"!==this.expression?this.testfl.definitionExpression="(time > "+e+") and "+this.expression:this.testfl.definitionExpression="time > "+e},changeArea:function(e){var t=[];t.push({type:"picture-marker",url:"static/img/blue.png",width:"20px",height:"20px"}),t.push({type:"picture-marker",url:"static/img/yellow.png",width:"20px",height:"20px"}),t.push({type:"picture-marker",url:"static/img/orange.png",width:"20px",height:"20px"}),t.push({type:"picture-marker",url:"static/img/red.png",width:"20px",height:"20px"});var a=new this.ClassBreaksRenderer({field:"time",legendOptions:{title:" "},classBreakInfos:[{minValue:0,maxValue:e,symbol:t[3],label:"已经完成脱贫的贫困县"},{minValue:e+1,maxValue:e+60,symbol:t[2],label:"半年内完成脱贫的贫困县"},{minValue:e+61,maxValue:e+120,symbol:t[1],label:"一年内完成脱贫的贫困县"},{minValue:e+121,maxValue:720,symbol:t[0],label:"一年后完成脱贫的贫困县"}]});this.testfl.renderer=a},updateNumChart:function(e){if(e>=244){var t=this.poorAN[0];if(this.poorAN.slice(0,e-244+1).length!=this.numChartOption.series[0].data.length){var a=this.poorAN.slice(0,e-244+1);this.numChartOption.series[0].data=a;var i=this.poorAN.slice(0,e-244+1);i.forEach(function(e,a){i[a]=t-e}),this.numChartOption.series[1].data=i,this.numChartOption.dataZoom.end=.1366*e,this.numChart.setOption(this.numChartOption)}}else this.numChartOption.series[0].data=[],this.numChartOption.series[1].data=[],this.numChart.setOption(this.numChartOption);if(e<=244){var s=parseInt(e/48);this.centerM.slice(0,s).length!=this.GDPChartOption.series[0].data.length&&(this.GDPChartOption.series[0].data=this.centerM.slice(0,s),this.GDPChartOption.series[1].data=this.poorM.slice(0,s),this.GDPChart.setOption(this.GDPChartOption))}else{s=parseInt((e+1-244)/122)+5;this.centerM.slice(0,s).length!=this.GDPChartOption.series[0].data.length&&(this.GDPChartOption.series[0].data=this.centerM.slice(0,s),this.GDPChartOption.series[1].data=this.poorM.slice(0,s),this.GDPChart.setOption(this.GDPChartOption))}if(e<=244){s=parseInt(e/48)+1;this.poorN.slice(0,s).length!=this.poorChartOption.series[0].data.length&&(this.poorChartOption.series[0].data=this.poorN.slice(0,s),this.poorChartOption.series[1].data=this.poorL.slice(0,s),this.poorChart.setOption(this.poorChartOption))}else{s=parseInt((e+1-244)/122)+6;this.poorN.slice(0,s).length!=this.poorChartOption.series[0].data.length&&(this.poorChartOption.series[0].data=this.poorN.slice(0,s),this.poorChartOption.series[1].data=this.poorL.slice(0,s),this.poorChart.setOption(this.poorChartOption))}0==this.isS?this.currentNum=e>=244?this.poorAN[e-245]:832:e>244&&(1!==this.graphicsLayer_&&this.webmap.remove(this.graphicsLayer_),this.graphicsLayer_=1,this.displayResult(this.result,e));for(var r=0,n=0;n<this.allNews.length&&!(e<this.allNews[n].time);n++)r++;if(r>this.dataNews.length){for(n=this.dataNews.length;n<r;n++)this.dataNews.push(this.allNews[n]);this.currentNews=this.dataNews[this.dataNews.length-1]}else if(r<this.dataNews.length){for(n=this.dataNews.length;n>r;n--)this.dataNews.pop();this.currentNews=this.dataNews[this.dataNews.length-1]}},updateTime:function(e){if(e<=244)var t=parseInt(e/4);else t=parseInt(e-244)+58;this.startTime=this.date[t]},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1),this.IsAddButtonShow=!0},showInput:function(){var e=this;this.inputVisible=!0,this.inputFlag=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&(this.dynamicTags.push(e),3==this.dynamicTags.length&&(this.IsAddButtonShow=!1)),this.inputVisible=!1,this.inputValue=""},TimeChange:function(e){var t=new Date;t.setTime(e);var a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var s=t.getDate();s=s<10?"0"+s:s;var r=t.getHours();r=r<10?"0"+r:r;var n=t.getMinutes(),o=t.getSeconds();return a+"-"+i+"-"+s+" "+r+":"+(n=n<10?"0"+n:n)+":"+(o=o<10?"0"+o:o)},clearCharts:function(){for(var e=0;e<3;e++)this.AutoTimeChartOption.baseOption.series=[],this.AutoTimeChartOption.options[0].series[e].data=[],this.AutoTimeChartOption.options[1].series[e].data=[],this.AutoTimeChartOption.options[2].series[e].data=[],this.AutoTimeChartOption.options[3].series[e].data=[],this.AutoTimeChartOption.options[4].series[e].data=[],this.BarLineChartOption.color=[],this.BarLineChartOption.series[e].name=[],this.BarLineChartOption.series[e+3].name=[],this.BarLineChartOption.series[e].data=[],this.BarLineChartOption.series[e+3].data=[],this.RaChartOption.series[0].data[e].name=[],this.RaChartOption.series[0].data[e].value=[0,0,0,0,0,0]},rad:function(e){return e*Math.PI/180},geoDistance:function(e,t,a,i){var s=this.rad(e),r=this.rad(a),n=s-r,o=this.rad(t)-this.rad(i),l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(n/2),2)+Math.cos(s)*Math.cos(r)*Math.pow(Math.sin(o/2),2)));return l*=6378.137,l=Math.round(1e4*l)/1e4},contrastResultShow:function(){var e=this;this.view.graphics.removeAll(),this.webmap.remove(this.abcSelectionLineLayer);var t=[],a=[],i=[],s={type:"simple-marker",color:[0,255,255,1],size:"20px"},r={symbol:{type:"text",color:[0,255,255,1],font:{family:"Playfair Display",size:14,weight:"bold"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.name"}},n={symbol:{type:"text",color:[0,255,255,1],font:{family:"Playfair Display",size:14,weight:"bold"}},labelPlacement:"above-left",labelExpressionInfo:{expression:"$feature.distance"}};this.clearCharts(),this.nameabcQuery.where="name = '"+this.dynamicTags[0]+"'",this.nameabcQuery.outFields=["name","longitude","latitude"],this.testfl.queryFeatures(this.nameabcQuery).then(function(o){if(o.features[0]){var l=o.features[0];l.symbol=s,e.view.graphics.add(l),a.push({geometry:l.geometry,attributes:{ObjectID:a.length,name:l.attributes.name,longitude:l.attributes.longitude,latitude:l.attributes.latitude}}),t.push(e.dynamicTags[0])}e.nameabcQuery.where="name = '"+e.dynamicTags[1]+"'",e.testfl.queryFeatures(e.nameabcQuery).then(function(o){if(o.features[0]){var l=o.features[0];l.symbol=s,e.view.graphics.add(l),a.push({geometry:l.geometry,attributes:{ObjectID:a.length,name:l.attributes.name,longitude:l.attributes.longitude,latitude:l.attributes.latitude}}),t.push(e.dynamicTags[1])}e.nameabcQuery.where="name = '"+e.dynamicTags[2]+"'",e.testfl.queryFeatures(e.nameabcQuery).then(function(o){if(o.features[0]){var l=o.features[0];l.symbol=s,e.view.graphics.add(l),a.push({geometry:l.geometry,attributes:{ObjectID:a.length,name:l.attributes.name,longitude:l.attributes.longitude,latitude:l.attributes.latitude}}),t.push(e.dynamicTags[2])}if(0!=t.length){var h=[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"name",alias:"name",type:"string"},{name:"distance",alias:"distance",type:"string"}];e.webmap.remove(e.abcSelectionPointLayer);var c=new e.FeatureLayer({source:a,fields:h});e.abcSelectionPointLayer=c,e.abcSelectionPointLayer.labelingInfo=[r],e.webmap.add(e.abcSelectionPointLayer);var d={type:"simple-line",style:"short-dash",color:[226,119,40],width:4};if(2==a.length){var u={type:"polyline",paths:[[a[0].attributes.longitude,a[0].attributes.latitude],[a[1].attributes.longitude,a[1].attributes.latitude]]},p=new e.Graphic({geometry:u,symbol:d});e.view.graphics.add(p),i.push({geometry:p.geometry,attributes:{ObjectID:i.length,distance:e.geoDistance(a[0].attributes.latitude,a[0].attributes.longitude,a[1].attributes.latitude,a[1].attributes.longitude).toString()+" KM"}}),e.webmap.remove(e.abcSelectionLineLayer);var m=new e.FeatureLayer({source:i,fields:h});e.abcSelectionLineLayer=m,e.abcSelectionLineLayer.labelingInfo=[n],e.webmap.add(e.abcSelectionLineLayer)}else if(3==a.length){for(var v=0;v<a.length;v++){var g={type:"polyline",paths:[[a[v].attributes.longitude,a[v].attributes.latitude],[a[(v+1)%3].attributes.longitude,a[(v+1)%3].attributes.latitude]]},f=new e.Graphic({geometry:g,symbol:d});e.view.graphics.add(f),i.push({geometry:f.geometry,attributes:{ObjectID:i.length,distance:e.geoDistance(a[v].attributes.latitude,a[v].attributes.longitude,a[(v+1)%3].attributes.latitude,a[(v+1)%3].attributes.longitude).toString()+" KM"}})}e.webmap.remove(e.abcSelectionLineLayer);var w=new e.FeatureLayer({source:i,fields:h});e.abcSelectionLineLayer=w,e.abcSelectionLineLayer.labelingInfo=[n],e.webmap.add(e.abcSelectionLineLayer)}e.isChartShow2_2=!0;var y=e;setTimeout(function(){var e=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]];y.RaChartOption.legend.data=t;for(var a=function(a){y.axios.get("http://120.27.240.160:3000/getguizhouproducts?name="+t[a]).then(function(i){e[a][0]=parseInt(i.data[0].Nong),e[a][1]=parseInt(i.data[0].Lin),e[a][2]=parseInt(i.data[0].Mu),e[a][3]=parseInt(i.data[0].Yu),e[a][4]=parseInt(i.data[0].FuWu),y.RaChartOption.series[0].data[a].name=t[a],y.RaChartOption.series[0].data[a].value=e[a],y.RaChart.setOption(y.RaChartOption)})},i=0;i<t.length;i++)a(i);var s=[];s[0]={2019:[0,0,0,0],2018:[0,0,0,0],2017:[0,0,0,0],2016:[0,0,0,0],2015:[0,0,0,0]},s[1]={2019:[0,0,0,0],2018:[0,0,0,0],2017:[0,0,0,0],2016:[0,0,0,0],2015:[0,0,0,0]},s[2]={2019:[0,0,0,0],2018:[0,0,0,0],2017:[0,0,0,0],2016:[0,0,0,0],2015:[0,0,0,0]};var r=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],n=[],o=["#3CB371","#DC143C","#FFD700"];y.AutoTimeChartOption.baseOption.legend.data=t;for(var l=0;l<t.length;l++)!function(){var e=l;y.AutoTimeChartOption.baseOption.series.push({name:t[e],type:"bar"}),n.push(t[e]),y.BarLineChartOption.color.push(o[e]),y.BarLineChartOption.series[e].name=t[e],y.BarLineChartOption.series[e+3].name=t[e],y.BarLineChartOption.series[e].data=r[e],y.BarLineChartOption.series[e+3].data=r[e+3];for(var a=2015;a<=2019;a++)!function(){var i=a;y.axios.get("http://120.27.240.160:3000/getguizhoudata?tablename=gz"+i+"&name="+t[e]).then(function(t){2015==i?(r[e][0]=parseFloat(t.data[0].people),r[e+3][0]=parseFloat(t.data[0].money),s[e][2015][0]=parseInt(t.data[0].total),s[e][2015][1]=parseInt(t.data[0].first),s[e][2015][2]=parseInt(t.data[0].second),s[e][2015][3]=parseInt(t.data[0].third),y.AutoTimeChartOption.options[0].series[e].data=s[e][2015]):2016==i?(r[e][1]=parseFloat(t.data[0].people),r[e+3][1]=parseFloat(t.data[0].money),s[e][2016][0]=parseInt(t.data[0].total),s[e][2016][1]=parseInt(t.data[0].first),s[e][2016][2]=parseInt(t.data[0].second),s[e][2016][3]=parseInt(t.data[0].third),y.AutoTimeChartOption.options[1].series[e].data=s[e][2016]):2017==i?(r[e][2]=parseFloat(t.data[0].people),r[e+3][2]=parseFloat(t.data[0].money),s[e][2017][0]=parseInt(t.data[0].total),s[e][2017][1]=parseInt(t.data[0].first),s[e][2017][2]=parseInt(t.data[0].second),s[e][2017][3]=parseInt(t.data[0].third),y.AutoTimeChartOption.options[2].series[e].data=s[e][2017]):2018==i?(r[e][3]=parseFloat(t.data[0].people),r[e+3][3]=parseFloat(t.data[0].money),s[e][2018][0]=parseInt(t.data[0].total),s[e][2018][1]=parseInt(t.data[0].first),s[e][2018][2]=parseInt(t.data[0].second),s[e][2018][3]=parseInt(t.data[0].third),y.AutoTimeChartOption.options[3].series[e].data=s[e][2018]):2019==i&&(r[e][4]=parseFloat(t.data[0].people),r[e+3][4]=parseFloat(t.data[0].money),s[e][2019][0]=parseInt(t.data[0].total),s[e][2019][1]=parseInt(t.data[0].first),s[e][2019][2]=parseInt(t.data[0].second),s[e][2019][3]=parseInt(t.data[0].third),y.AutoTimeChartOption.options[4].series[e].data=s[e][2019]),y.BarLineChartOption.legend.data=n,y.BLChart.setOption(y.BarLineChartOption),y.ATChart.setOption(y.AutoTimeChartOption)})}()}()},900)}})})})},queryTask:function(e){this.figureQuery.geometry=e,this.figureqTask.execute(this.figureQuery).then(this.showQueryResult)},showQueryResult:function(e){var t=this,a={type:"simple-marker",color:[0,255,255,1],size:"10px"};if(0!=e.features.length&&e.features.length>=1){this.isYearSliderShow=!0,this.isChartShow2_3_up=!0,this.isChartShow2_3_down=!0;for(var i=0;i<e.features.length;i++){var s=e.features[i];s.symbol=a,this.eagleview.graphics.add(s),s.attributes.date=this.TimeChange(s.attributes.date),this.areaSelectgraphicsArr.push({geometry:s.geometry,attributes:{ObjectID:this.areaSelectgraphicsArr.length,name:s.attributes.name,longitude:s.attributes.longitude,latitude:s.attributes.latitude,date:s.attributes.date,introduction:s.attributes.introdu,office:s.attributes.office,time:s.attributes.time,F2015:s.attributes.F2015,F2016:s.attributes.F2016,F2017:s.attributes.F2017,F2018:s.attributes.F2018,F2019:s.attributes.F2019}});var r=s.attributes.date.split("-");this.time3DArr[12*(parseInt(r[0])-2017)+parseInt(r[1])][2]=1+this.time3DArr[12*(parseInt(r[0])-2017)+parseInt(r[1])][2]}var n={symbol:{type:"text",color:"red",font:{family:"Playfair Display",size:10,weight:"bold"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.name"}},o=[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"name",alias:"name",type:"string"},{name:"time",alias:"time",type:"double"},{name:"F2015",alias:"F2015",type:"double"},{name:"F2016",alias:"F2016",type:"double"},{name:"F2017",alias:"F2017",type:"double"},{name:"F2018",alias:"F2018",type:"double"},{name:"F2019",alias:"F2019",type:"double"}];this.webmap.remove(this.areaSelectionLayer),this.map3D.remove(this.areaSelection3DLayer);var l=new this.FeatureLayer({source:this.areaSelectgraphicsArr,fields:o});this.areaSelectionLayer=l,this.areaSelectionLayer.labelingInfo=[n],this.webmap.add(this.areaSelectionLayer),this.Time3DChartOption.series[0].data=this.time3DArr.map(function(e){return{value:[e[1],e[0],e[2]]}}),this.t3DChart.setOption(this.Time3DChartOption),this.view3D.ui.empty();var h=new this.FeatureLayer({source:this.areaSelectgraphicsArr,fields:o});this.areaSelection3DLayer=h,this.areaSelection3DLayer.labelingInfo=[n],this.map3D.add(this.areaSelection3DLayer),this.eagleview.goTo({target:[parseFloat(this.areaSelectgraphicsArr[0].attributes.longitude),parseFloat(this.areaSelectgraphicsArr[0].attributes.latitude)],zoom:4},{duration:1e3}),this.view3D.goTo({center:[parseFloat(this.areaSelectgraphicsArr[0].attributes.longitude),parseFloat(this.areaSelectgraphicsArr[0].attributes.latitude)],tilt:52,heading:355.8},{duration:1e3});var c={layer:h,field:"F2015",view:this.view3D,symbolType:"3d-volumetric"};this.isGDPTitleShow=!1;var d=null,u=this;this.colorAndSizeRendererCreator.createContinuousRenderer(c).then(function(e){return d=e,h.renderer=e.renderer,h.visible||(h.visible=!0),u.histogram({layer:h,field:c.field,numBins:40,minValue:c.minValue,maxValue:c.maxValue})}).then(function(e){var a=document.getElementById("slider"),i=u.ColorSizeSlider.fromRendererResult(d,e);i.container=a,i.viewModel.precision=0,i.labelFormatFunction=function(e){return parseInt(e.toFixed(0)).toLocaleString()},i.histogramConfig.standardDeviation=null,t.view3D.ui.add(i),t.barSlider=i,t.view3D.ui._components[4]?(t.view3D.ui._components[4].node.style.marginTop="600px",t.view3D.ui._components[4].node.style.marginLeft="30px"):(t.view3D.ui._components[3].node.style.marginTop="600px",t.view3D.ui._components[3].node.style.marginLeft="30px"),i.on(["thumb-change","thumb-drag","min-change","max-change"],function(){var e=h.renderer.clone();e.visualVariables=i.updateVisualVariables(e.visualVariables),h.renderer=e}),t.isGDPTitleShow=!0}).catch(console.error)}},changeYear3D:function(e){var t=this;this.isGDPTitleShow=!1;var a={symbol:{type:"text",color:"red",font:{family:"Playfair Display",size:10,weight:"bold"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.name"}},i=[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"name",alias:"name",type:"string"},{name:"time",alias:"time",type:"double"},{name:"F2015",alias:"F2015",type:"double"},{name:"F2016",alias:"F2016",type:"double"},{name:"F2017",alias:"F2017",type:"double"},{name:"F2018",alias:"F2018",type:"double"},{name:"F2019",alias:"F2019",type:"double"}];this.webmap.remove(this.areaSelectionLayer),this.map3D.remove(this.areaSelection3DLayer);var s=new this.FeatureLayer({source:this.areaSelectgraphicsArr,fields:i});this.areaSelectionLayer=s,this.areaSelectionLayer.labelingInfo=[a],this.webmap.add(this.areaSelectionLayer),this.view3D.ui.empty();var r=new this.FeatureLayer({source:this.areaSelectgraphicsArr,fields:i});this.areaSelection3DLayer=r,this.areaSelection3DLayer.labelingInfo=[a],this.map3D.add(this.areaSelection3DLayer);var n={layer:r,view:this.view3D,symbolType:"3d-volumetric"};switch(this.yearmarks[0].style.color="#fff",this.yearmarks[5].style.color="#fff",this.yearmarks[10].style.color="#fff",this.yearmarks[15].style.color="#fff",this.yearmarks[20].style.color="#fff",e){case 0:n.field="F2015",this.yearmarks[0].style.color="#FFD700";break;case 5:n.field="F2016",this.yearmarks[5].style.color="#FFD700";break;case 10:n.field="F2017",this.yearmarks[10].style.color="#FFD700";break;case 15:n.field="F2018",this.yearmarks[15].style.color="#FFD700";break;case 20:n.field="F2019",this.yearmarks[20].style.color="#FFD700"}var o=null,l=this;this.colorAndSizeRendererCreator.createContinuousRenderer(n).then(function(e){return o=e,r.renderer=e.renderer,r.visible||(r.visible=!0),l.histogram({layer:r,field:n.field,numBins:40,minValue:n.minValue,maxValue:n.maxValue})}).then(function(e){var a=document.getElementById("slider"),i=l.ColorSizeSlider.fromRendererResult(o,e);i.container=a,i.viewModel.precision=0,i.labelFormatFunction=function(e){return parseInt(e.toFixed(0)).toLocaleString()},i.histogramConfig.standardDeviation=null,t.view3D.ui.add(i),t.isGDPTitleShow=!0,t.view3D.ui._components[4]?(t.view3D.ui._components[4].node.style.marginTop="600px",t.view3D.ui._components[4].node.style.marginLeft="30px"):(t.view3D.ui._components[3].node.style.marginTop="600px",t.view3D.ui._components[3].node.style.marginLeft="30px"),i.on(["thumb-change","thumb-drag","min-change","max-change"],function(){var e=r.renderer.clone();e.visualVariables=i.updateVisualVariables(e.visualVariables),r.renderer=e})}).catch(console.error)},handleAreaModeDiv:function(e){this.eagleview.graphics.removeAll(),this.graphicsLayer.graphics.removeAll(),this.graphicsLayer2.graphics.removeAll(),this.webmap.remove(this.areaSelectionLayer),this.map3D.remove(this.areaSelection3DLayer),this.areaSelectmode=0,this.eagleview.ui.remove(this.sketch),this.testfpl.visible=!0,this.testfl.visible=!0,this.basemap.visible=!0;for(var t=0;t<48;t++)this.time3DArr[t][2]=0;this.Time3DChartOption.series[0].data=this.time3DArr.map(function(e){return{value:[e[1],e[0],e[2]]}}),this.t3DChart.setOption(this.Time3DChartOption),this.areaSelectgraphicsArr=[];var a=new this.Point({latitude:32,longitude:116.3});this.view.goTo({target:a,zoom:4},{duration:1e3}),1==e?(document.getElementById("Area3D").style.width="590px",this.IsProvinceDivShow=!0,this.IsConnectDivShow=!1):2==e?(this.isChartShow2_3_up=!0,this.isChartShow2_3_down=!0,document.getElementById("Area3D").style.width="290px",this.IsProvinceDivShow=!1,this.IsConnectDivShow=!1,this.eagleview.ui.add(this.sketch)):(document.getElementById("Area3D").style.width="590px",this.IsProvinceDivShow=!1,this.IsConnectDivShow=!0)},querySearch_provinceArea:function(e,t){var a=this.provinceArea;t(e?a.filter(this.createFilter_provinceArea(e)):a)},createFilter_provinceArea:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},loadAll_provinceArea:function(){return[{value:"甘肃省",address:"长宁区新渔路144号"},{value:"广西壮族自治区",address:"上海市长宁区淞虹路661号"},{value:"新疆维吾尔自治区",address:"上海市普陀区真北路988号创邑金沙谷6号楼113"},{value:"西藏自治区",address:"嘉定区曹安公路2383弄55号"},{value:"青海省",address:"天山西路438号"},{value:"宁夏回族自治区",address:"上海市长宁区金钟路968号1幢18号楼一层商铺18-101"},{value:"内蒙古自治区",address:"上海市长宁区金钟路633号"},{value:"贵州省",address:"上海市嘉定区曹安公路曹安路1685号"},{value:"四川省",address:"上海市普陀区同普路1435号"},{value:"云南省",address:"上海市北翟路1444弄81号B幢-107"},{value:"湖南省",address:"上海市嘉定区新郁路817号"},{value:"湖北省",address:"嘉定区曹安路1611号"},{value:"河北省",address:"嘉定区曹安路1611号"},{value:"重庆市",address:"嘉定区曹安公路2383弄55号"},{value:"吉林省",address:"嘉定区曹安公路2383弄55号"},{value:"陕西省",address:"嘉定区曹安公路2383弄55号"}]},handleSelect_provinceArea:function(e){var t=this;this.eagleview.graphics.removeAll(),this.graphicsLayer.graphics.removeAll(),this.graphicsLayer2.graphics.removeAll(),this.webmap.remove(this.areaSelectionLayer),this.map3D.remove(this.areaSelection3DLayer);for(var a=0;a<48;a++)this.time3DArr[a][2]=0;this.Time3DChartOption.series[0].data=this.time3DArr.map(function(e){return{value:[e[1],e[0],e[2]]}}),this.t3DChart.setOption(this.Time3DChartOption),this.areaSelectgraphicsArr=[],this.provinceQuery.where="name = '"+e.value+"'",this.testfpl.queryFeatures(this.provinceQuery).then(function(e){var a=e.features[0],i={type:"simple-fill",color:"#ffffcc",outline:null};t.queryTask(a.geometry),a.symbol=i,t.graphicsLayer.graphics.add(a),t.testfl.visible=!1})},querySearch_connectArea:function(e,t){var a=this.connectArea;t(e?a.filter(this.createFilter_connectArea(e)):a)},createFilter_connectArea:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},loadAll_connectArea:function(){return[{value:"六盘山片区",address:"长宁区新渔路144号"},{value:"武陵山片区",address:"上海市长宁区淞虹路661号"},{value:"乌蒙山片区",address:"上海市普陀区真北路988号创邑金沙谷6号楼113"},{value:"秦巴山片区",address:"嘉定区曹安公路2383弄55号"},{value:"滇桂黔石漠化片区",address:"天山西路438号"},{value:"大兴安岭南麓片区",address:"上海市长宁区金钟路968号1幢18号楼一层商铺18-101"},{value:"燕山-太行山片区",address:"上海市长宁区金钟路633号"},{value:"吕梁山片区",address:"上海市嘉定区曹安公路曹安路1685号"},{value:"罗霄山片区",address:"上海市普陀区同普路1435号"},{value:"大别山片区",address:"上海市北翟路1444弄81号B幢-107"},{value:"滇西边境片区",address:"上海市嘉定区新郁路817号"},{value:"西藏片区",address:"嘉定区曹安路1611号"},{value:"四省藏区片区",address:"嘉定区曹安路1611号"},{value:"新疆南疆三地州片区",address:"嘉定区曹安公路2383弄55号"}]},handleSelect_connectArea:function(e){var t=this;this.eagleview.graphics.removeAll(),this.graphicsLayer.graphics.removeAll(),this.graphicsLayer2.graphics.removeAll(),this.webmap.remove(this.areaSelectionLayer),this.map3D.remove(this.areaSelection3DLayer);for(var a=0;a<48;a++)this.time3DArr[a][2]=0;this.Time3DChartOption.series[0].data=this.time3DArr.map(function(e){return{value:[e[1],e[0],e[2]]}}),this.t3DChart.setOption(this.Time3DChartOption),this.areaSelectgraphicsArr=[],this.connectareaQuery.where="belonging = '"+e.value+"'",this.testfl.queryFeatures(this.connectareaQuery).then(function(e){t.showQueryResult(e)})},provinceSelect:function(){if(1==this.areaSelectmode){this.eagleview.graphics.removeAll(),this.graphicsLayer.graphics.removeAll(),this.graphicsLayer2.graphics.removeAll(),this.webmap.remove(this.areaSelectionLayer),this.areaSelectmode=0,this.testfpl.visible=!0,this.testfl.visible=!0,this.basemap.visible=!0;for(var e=0;e<48;e++)this.time3DArr[e][2]=0;this.Time3DChartOption.series[0].data=this.time3DArr.map(function(e){return{value:[e[1],e[0],e[2]]}}),this.t3DChart.setOption(this.Time3DChartOption),this.areaSelectgraphicsArr=[];var t=new this.Point({latitude:32,longitude:116.3});this.view.goTo({target:t,zoom:4},{duration:1e3})}else 0==this.areaSelectmode&&(this.areaSelectmode=1)},sketchAreaSelect:function(){if(0==this.areaSelectmode)this.areaSelectmode=2,this.eagleview.ui.add(this.sketch);else if(2==this.areaSelectmode){this.areaSelectmode=0,this.eagleview.graphics.removeAll(),this.graphicsLayer.graphics.removeAll(),this.graphicsLayer2.graphics.removeAll(),this.webmap.remove(this.areaSelectionLayer),this.eagleview.ui.remove(this.sketch);for(var e=0;e<48;e++)this.time3DArr[e][2]=0;this.Time3DChartOption.series[0].data=this.time3DArr.map(function(e){return{value:[e[1],e[0],e[2]]}}),this.t3DChart.setOption(this.Time3DChartOption),this.areaSelectgraphicsArr=[]}},connectedAreaSelect:function(){var e=this;if(0==this.areaSelectmode){this.areaSelectmode=3;var t=document.getElementById("connectedAreaOption"),a=t.options[t.selectedIndex].text;this.connectareaQuery.where="belonging = '"+a+"'",this.testfl.queryFeatures(this.connectareaQuery).then(function(t){e.showQueryResult(t)})}else if(3==this.areaSelectmode){this.areaSelectmode=0,this.eagleview.graphics.removeAll(),this.graphicsLayer.graphics.removeAll(),this.graphicsLayer2.graphics.removeAll(),this.webmap.remove(this.areaSelectionLayer);for(var i=0;i<48;i++)this.time3DArr[i][2]=0;this.Time3DChartOption.series[0].data=this.time3DArr.map(function(e){return{value:[e[1],e[0],e[2]]}}),this.t3DChart.setOption(this.Time3DChartOption),this.areaSelectgraphicsArr=[]}},mouseGetDirection:function(e){var t,a,i=void 0;return i="",t=e.offsetX,10,(a=e.offsetY)<10?i+="n":a>this.c.offsetHeight-10&&(i+="s"),t<10?i+="w":t>this.c.offsetWidth-10&&(i+="e"),i},mouseUp:function(){this.resizeable=!1},mouseDown:function(e){var t=this.mouseGetDirection(e);""!==t&&(this.resizeable=!0,this.direc=t,this.clientX=e.clientX,this.clientY=e.clientY)},mouseMove:function(e){var t=this.mouseGetDirection(e),a=void 0;a=""===t?"default":t+"-resize",this.c.style.cursor=a,this.resizeable&&(-1!==this.direc.indexOf("e")&&(this.c.style.width=Math.max(this.minW,this.c.offsetWidth+(e.clientX-this.clientX))+"px",this.clientX=e.clientX),-1!==this.direc.indexOf("s")&&(this.c.style.height=Math.max(this.minH,this.c.offsetHeight+(this.clientY-e.clientY))+"px",this.clientY=e.clientY),-1!==this.direc.indexOf("n")&&(this.c.style.height=Math.max(this.minH,this.c.offsetHeight+(e.clientY-this.clientY))+"px",this.clientY=e.clientY),-1!==this.direc.indexOf("w")&&(this.c.style.width=Math.max(this.minW,this.c.offsetWidth+(this.clientX-e.clientX))+"px",this.clientX=e.clientX))},printMap:function(){var e=this;this.printTask.execute(this.params,e).then(function(t){window.open(t.url,"_blank"),e.isLoading=!1},function(e){alert(Error),e.isLoading=!1})},tableToExcel:function(e){for(var t="Id,名称,经度,纬度,脱贫日期,官网\n",a=0;a<e.length;a++){for(var i in e[a].attributes)"time"!=e[a].attributes&&(t+=e[a].attributes[i]+"\t,");t+="\n"}var s="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(t),r=document.createElement("a");r.href=s,r.download="json数据表.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r)},changeAutoCurve:function(){var e=["#de1c31","#12a182","#813c85","#11659a","#fed71a","#8e804b","#f9723d","#f9e8d0","#e16c96","#28FF28","#FCFCFC","#CECEFF","#708090","\t#4DFFFF","#FF359A","#AD5A5A","#B3D9D9"],t=[],a=this;[["甘肃省",this.GanSuData],["广西壮族自治区",this.GuangXiData],["新疆维吾尔自治区",this.XinJiangData],["西藏自治区",this.XiZangData],["青海省",this.QingHaiData],["宁夏回族自治区",this.NingXiaData],["内蒙古自治区",this.NeiMengGuData],["贵州省",this.GuiZhouData],["四川省",this.SiChuanData],["云南省",this.YunNanData],["湖南省",this.HuNanData],["湖北省",this.HuBeiData],["河北省",this.HeBeiData],["重庆市",this.ChongQingData],["吉林省",this.JiLinData],["陕西省",this.ShanXiData]].forEach(function(i,s){t.push({name:i[0]+" Top10",type:"lines",coordinateSystem:"arcgis",effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbolSize:3},lineStyle:{color:e[s],width:1,curveness:.2,opacity:.2},data:a.convertData(i[1])},{name:i[0]+" Top10",type:"lines",coordinateSystem:"arcgis",symbol:["none","arrow"],symbolSize:10,effect:{show:!0,period:6,trailLength:.1,symbol:"pin",symbolSize:8,color:"#FFE53B"},lineStyle:{color:e[s],width:1.5,opacity:.6,curveness:.2},data:a.convertData(i[1])})});var i={series:t};this.allSeries=t,this.autoLinecChart.setChartOption(i)},handlespatialAnalystClick:function(e,t){this.testView.ui.remove(this.legendE),this.testView.ui.remove(this.legendHotSpot),this.testView.ui.remove(this.legendCluster),"1"==this.spatialAnalystMode?(this.view.goTo({target:[109.3,36.5],zoom:5},{duration:1e3}),document.getElementById("spatialAnalyst").style.height="106px",this.webmap.remove(this.HotSpotGZ),this.webmap.remove(this.ClusterGZ),this.handleCheckedYearsChange_1(this.spatialYearList_1)):"2"==this.spatialAnalystMode?(this.view.goTo({target:[106.70741,26.598194],zoom:7},{duration:1e3}),document.getElementById("spatialAnalyst").style.height="154px",this.webmap.remove(this.standardEllipse),this.webmap.remove(this.meanCenter),this.webmap.remove(this.ClusterGZ),this.handleCheckedYearsChange_2(this.spatialYear_2)):"3"==this.spatialAnalystMode&&(this.view.goTo({target:[106.70741,26.598194],zoom:7},{duration:1e3}),document.getElementById("spatialAnalyst").style.height="154px",this.webmap.remove(this.standardEllipse),this.webmap.remove(this.meanCenter),this.webmap.remove(this.HotSpotGZ),this.handleCheckedYearsChange_3(this.spatialYearList_3))},handleCheckedYearsChange_1:function(e){if(this.webmap.remove(this.standardEllipse),this.webmap.remove(this.meanCenter),0!=e.length){this.webmap.add(this.standardEllipse),this.webmap.add(this.meanCenter);for(var t="Range = '"+this.ellipseMode+e[0]+"'",a="year_pro = '"+this.ellipseMode+e[0]+"'",i=1;i<e.length;i++)t+="OR Range = '"+this.ellipseMode+e[i]+"'",a+="OR year_pro = '"+this.ellipseMode+e[i]+"'";this.meanCenter.definitionExpression=a,this.standardEllipse.definitionExpression=t,this.testView.ui.add(this.legendE,"bottom-left")}},handleCheckedYearsChange_2:function(e){this.webmap.remove(this.HotSpotGZ);var t="F2015NLMY";switch(e){case 2:switch(this.spotClusterTarget){case 1:t="F2015GDP";break;case 2:t="F2015NC";break;case 3:t="F2015NLMY"}break;case 4:switch(this.spotClusterTarget){case 1:t="F2016GDP";break;case 2:t="F2016NC";break;case 3:this.hotSpotrRenderer.field="F2016NMLY"}break;case 6:switch(this.spotClusterTarget){case 1:t="F2017GDP";break;case 2:t="F2017NC";break;case 3:t="F2017NMLY"}break;case 8:switch(this.spotClusterTarget){case 1:t="F2018GDP";break;case 2:t="F2018NC";break;case 3:t="F2018NMLY"}break;case 10:switch(this.spotClusterTarget){case 1:t="F2019GDP";break;case 2:t="F2019NC";break;case 3:t="F2019NMLY"}}var a=new this.ClassBreaksRenderer({field:t,legendOptions:{title:" "},classBreakInfos:[{minValue:-3,maxValue:-3,symbol:this.hotSpotSymbol[0],label:"Cold Spot - 99% Confidence"},{minValue:-2,maxValue:-2,symbol:this.hotSpotSymbol[1],label:"Cold Spot - 95% Confidence"},{minValue:-1,maxValue:-1,symbol:this.hotSpotSymbol[2],label:"Cold Spot - 90% Confidence"},{minValue:0,maxValue:0,symbol:this.hotSpotSymbol[3],label:"Not Significant"},{minValue:1,maxValue:1,symbol:this.hotSpotSymbol[4],label:"Hot Spot - 90% Confidence"},{minValue:2,maxValue:2,symbol:this.hotSpotSymbol[5],label:"Hot Spot - 95% Confidence"},{minValue:3,maxValue:3,symbol:this.hotSpotSymbol[6],label:"Hot Spot - 99% Confidence"}]});this.hotSpotRenderer=a,this.HotSpotGZ.renderer=this.hotSpotRenderer,this.webmap.add(this.HotSpotGZ),this.testView.ui.add(this.legendHotSpot,"bottom-left")},handleCheckedYearsChange_3:function(e){this.webmap.remove(this.HotSpotGZ);var t="F2015NLMY";switch(e){case 2:switch(this.spotClusterTarget){case 1:t="F2015GDP";break;case 2:t="F2015NC";break;case 3:t="F2015NLMY"}break;case 4:switch(this.spotClusterTarget){case 1:t="F2016GDP";break;case 2:t="F2016NC";break;case 3:this.hotSpotrRenderer.field="F2016NMLY"}break;case 6:switch(this.spotClusterTarget){case 1:t="F2017GDP";break;case 2:t="F2017NC";break;case 3:t="F2017NMLY"}break;case 8:switch(this.spotClusterTarget){case 1:t="F2018GDP";break;case 2:t="F2018NC";break;case 3:t="F2018NMLY"}break;case 10:switch(this.spotClusterTarget){case 1:t="F2019GDP";break;case 2:t="F2019NC";break;case 3:t="F2019NMLY"}}var a=new this.ClassBreaksRenderer({field:t,legendOptions:{title:" "},classBreakInfos:[{minValue:-2,maxValue:-2,symbol:this.hotSpotSymbol[0],label:"低-低 聚类"},{minValue:-1,maxValue:-1,symbol:this.hotSpotSymbol[1],label:"低-高 离群"},{minValue:0,maxValue:0,symbol:this.hotSpotSymbol[2],label:"无显著性"},{minValue:1,maxValue:1,symbol:this.hotSpotSymbol[3],label:"高-低 离群"},{minValue:2,maxValue:2,symbol:this.hotSpotSymbol[4],label:"低-低 聚类"}]});this.clusterRenderer=a,this.ClusterGZ.renderer=this.clusterRenderer,this.webmap.add(this.ClusterGZ),this.testView.ui.add(this.legendCluster,"bottom-left")},handleSpotClusterTarget:function(e){switch(this.spatialAnalystMode){case"1":this.handleCheckedYearsChange_1(this.spatialYearList_1);break;case"2":this.handleCheckedYearsChange_2(this.spatialYear_2);break;case"3":this.handleCheckedYearsChange_3(this.spatialYear_3)}},selectEvent:function(e){if(this.anaShow=!1,this.isGDPTitleShow=!1,this.Is2DShow=!0,this.testView.ui.add(this.legendd,"bottom-left"),this.testView.ui.remove(this.legendE),this.testfl.visible=!0,this.view.graphics.removeAll(),this.graphicsLayer.graphics.removeAll(),this.graphicsLayer2.graphics.removeAll(),this.isChartShow2_3_up=!1,this.isChartShow2_3_down=!1,this.testView.ui.remove(this.legendE),this.testView.ui.remove(this.legendHotSpot),this.testView.ui.remove(this.legendCluster),this.webmap.remove(this.abcSelectionLineLayer),this.webmap.remove(this.abcSelectionPointLayer),this.webmap.remove(this.areaSelectionLayer),this.webmap.remove(this.meanCenter),this.webmap.remove(this.HotSpotGZ),this.webmap.remove(this.ClusterGZ),this.webmap.remove(this.standardEllipse),this.webmap.remove(this.meanCenter),this.autoLinecChart.chart&&0!=this.autoLinecChart.chart._chartsViews.length&&this.autoLinecChart.removeLayer(),"1-2"==e)this.$refs.closeLegendChild.style.top="39.4%",this.$refs.closeLegendChild.style.left="1.5%",this.$refs.closeLegendChild.style.width="200px",0==this.legendShow&&this.testView.ui.remove(this.legendd),this.windowShow(12),this.testfl.definitionExpression="time >= 0",this.$refs.timeChild.alreadyRun=0,this.changeArea(this.$refs.timeChild.alreadyRun),this.$refs.timeChild.rendType="fireFly",this.changeCluster();else if("1-3"==e)this.$refs.closeLegendChild.style.top="80%",this.$refs.closeLegendChild.style.left="1%",this.$refs.closeLegendChild.style.width="160px",0==this.legendShow&&this.testView.ui.remove(this.legendd),this.windowShow(13),this.testfl.featureReduction=null,this.$refs.timeChild.rendType="heat",this.testfl.definitionExpression="time >= 0",this.$refs.timeChild.alreadyRun=0,this.changeHeatmap(this.$refs.timeChild.alreadyRun);else if("1-4"==e)this.$refs.closeLegendChild.style.top="76.5%",this.$refs.closeLegendChild.style.left="1%",this.$refs.closeLegendChild.style.width="175px",0==this.legendShow&&this.testView.ui.remove(this.legendd),this.windowShow(14),this.testfl.featureReduction=null,this.$refs.timeChild.rendType="jY",this.$refs.timeChild.alreadyRun=0,this.changeNoSee(this.$refs.timeChild.alreadyRun);else if("1-5"==e)this.$refs.closeLegendChild.style.top="74%",this.$refs.closeLegendChild.style.left="1%",this.$refs.closeLegendChild.style.width="205px",0==this.legendShow&&this.testView.ui.remove(this.legendd),this.windowShow(15),this.testfl.featureReduction=null,this.testfl.definitionExpression="time >= 0",this.$refs.timeChild.rendType="fireFly",this.$refs.timeChild.alreadyRun=0,this.changeArea(this.$refs.timeChild.alreadyRun);else if("1-6"==e){this.view.goTo({target:[109.3,36.5],zoom:5},{duration:1e3});var t=new this.echartsLayer(this.testView,this.$echarts);this.autoLinecChart=t,this.changeAutoCurve(),this.testfl.featureReduction=null,this.testfl.definitionExpression="time <= 0",this.windowShow(16)}else"2-1"==e?(this.anaShow=!0,this.filterShow=!1,this.testView.ui.remove(this.legendd),this.testfl.visible=!1,this.windowShow(21)):"2-2"==e?(this.anaShow=!0,this.filterShow=!1,this.testfl.featureReduction=null,this.testfl.definitionExpression="time >= 0",this.changeNoSee(0),this.windowShow(22)):"2-3"==e?(this.anaShow=!0,document.getElementById("Area3D").style.width="290px",this.IsProvinceDivShow=!1,this.IsConnectDivShow=!1,this.view3D.ui.remove(this.barSlider),this.map3D.remove(this.areaSelection3DLayer),this.areaMode="",this.filterShow=!1,this.Is2DShow=!1,this.windowShow(23),this.testfl.featureReduction=null,this.testfl.definitionExpression="time >= 0",this.changeNoSee(0)):"6"==e?this.$router.replace("/register"):"4"==e?this.filterShow=!this.filterShow:"5"==e&&(this.isLoading=!0,this.printMap())},convertData:function(e){for(var t=[],a=0;a<e.length;a++){var i=e[a],s=this.geoCoordMap[i[1].name],r=this.geoCoordMap[i[0].name];s&&r&&t.push({fromName:i[1].name,toName:i[0].name,coords:[s,r],value:i[1].value})}return t},back:function(){var e=this;this.targetUrl="http://www.cpad.gov.cn/",this.btnShow=!0,this.isS=!1,this.graphicsLayer.graphics.removeAll(),this.webmap.remove(this.graphicsLayer_),this.graphicsLayer_=1,this.clickGraphicsLayer.graphics.removeAll(),this.testfpl.visible=!0,this.testfl.visible=!0,this.basemap.visible=!0,this.isMapShow=!0,this.isPhotoShow=!1;var t=new this.Point({latitude:32,longitude:116.3});this.view.goTo({target:t,zoom:4},{duration:1e3}),this.currentArea="中国",this.$refs.timeChild.alreadyRun>=244?this.currentNum=this.poorAN[this.$refs.timeChild.alreadyRun-245]:this.currentNum=832,this.isPoorShow=!1,setTimeout(function(){e.currentPoor=[]},1e3),1==this.legendShow&&this.testView.ui.add(this.legendd,"bottom-left");for(var a=0;a<this.poorAN.length;a++)this.poorAN[a]=this.tempPA[a];this.numChartOption.yAxis[0].data=function(){for(var e=[],t=0;t<832;t++)e.push(t);return e.push(832),e}();for(a=0;a<this.centerM.length;a++)this.centerM[a]=this.tempCM[a];for(a=0;a<this.poorM.length;a++)this.poorM[a]=this.tempPM[a];for(a=0;a<this.poorN.length;a++)this.poorN[a]=this.tempPN[a];for(a=0;a<this.poorL.length;a++)this.poorL[a]=this.tempPL[a];this.numChartOption.series[0].data=[],this.GDPChartOption.series[0].data=[],this.GDPChartOption.series[1].data=[],this.poorChartOption.series[0].data=[],this.poorChartOption.series[1].data=[],this.updateNumChart(this.$refs.timeChild.alreadyRun),this.isPoorCountryShow=!1,this.isChartShow=!0,this.isCurrrentNewsShow=!0,this.timeAndPoorShow=!0,this.isTimeShow=!0},poorCountryS:function(e){var t=this;this.isMapShow=!0,this.isPhotoShow=!1,this.isPoorCountryShow=!1,this.clickGraphicsLayer.graphics.removeAll(),this.currentIndex=e,this.currentPoorCountry.name=this.result.features[e].attributes.name,this.btnsColorClassArr=["activeBtnColor","blurBtnColor","blurBtnColor"];var a=new this.Point({latitude:this.result.features[e].attributes.latitude,longitude:this.result.features[e].attributes.longitude});if(this.view.goTo({target:a,zoom:8},{duration:1e3}),this.isChartShow=!1,this.isCurrrentNewsShow=!1,this.timeAndPoorShow=!1,this.isTimeShow=!1,this.result.features[e].attributes.time<=this.$refs.timeChild.alreadyRun){this.result.features[e].symbol={type:"picture-marker",url:"static/img/导航.png",width:"30px",height:"30px"},this.clickGraphicsLayer.graphics.add(this.result.features[e])}1==this.$refs.timeChild.isStart&&this.$refs.timeChild.startRun(),setTimeout(function(){if(0==t.isPoorCountryShow){t.currentPoorCountry.date=new Date(parseInt(t.result.features[e].attributes.date)).toLocaleString().split(" ")[0],t.currentPoorCountry.position.latitude=t.result.features[e].attributes.latitude,t.currentPoorCountry.position.longitude=t.result.features[e].attributes.longitude,t.axios.get("http://120.27.240.160:3000/?tableName=china&name="+t.result.features[e].attributes.name).then(function(e){t.currentPoorCountry.office=e.data[0].office,t.currentPoorCountry.intro=e.data[0].intro});var a=[];t.axios.get("http://120.27.240.160:3000/?tableName=word&name="+t.result.features[e].attributes.name).then(function(i){void 0==i.data[0][1]?t.wordCloudOption.title.text="暂无数据":t.wordCloudOption.title.text="词云";for(var s=1;s<=20;s++)a.push({name:i.data[0][s.toString()]});t.axios.get("http://120.27.240.160:3000/?tableName=freq&name="+t.result.features[e].attributes.name).then(function(e){for(var i=1;i<=20;i++)a[i-1].value=parseInt(e.data[0][i.toString()]);t.wordCloudOption.series[0].data=a,t.wordcloud.setOption(t.wordCloudOption)})}),t.axios.get("http://120.27.240.160:3000/getimgbyname?name="+t.result.features[e].attributes.name).then(function(a){if(0!=a.data){t.mapImgSrcArr.length=0,t.photoImgSrcArr.length=0;for(i=1;i<=2;i++)t.mapImgSrcArr.push("data:image/png;base64,"+a.data["img"+i].data);for(i=3;i<=4;i++)t.photoImgSrcArr.push("data:image/png;base64,"+a.data["img"+i].data)}else{t.$notify.error({title:"错误",message:"抱歉"+t.result.features[e].attributes.name+"暂无对比照片",position:"top-left",duration:3e3}),t.mapImgSrcArr.length=0,t.photoImgSrcArr.length=0;for(var i=1;i<=2;i++)t.mapImgSrcArr.push("static/img/暂无图片.png");for(var i=1;i<=2;i++)t.photoImgSrcArr.push("static/img/暂无图片.png")}});var i=[{year:2015},{year:2016},{year:2017},{year:2018},{year:2019}],s=[];t.axios.get("http://120.27.240.160:3000/getpoorareapartdata?name="+t.result.features[e].attributes.name+"&year=2015").then(function(a){if(0==a.data.length)t.$notify.error({title:"错误",message:"抱歉"+t.result.features[e].attributes.name+"暂无图片数据",position:"top-left",duration:3e3}),t.PChartOption.series[0].data.length=0,t.MChartOption.series[0].data.length=0,t.pChart.setOption(t.PChartOption),t.MChart.setOption(t.MChartOption);else for(var r=2015;r<=2019;r++)!function(a){t.axios.get("http://120.27.240.160:3000/getpoorareapartdata?name="+t.result.features[e].attributes.name+"&year="+a).then(function(e){if(s.push({year:a,people:parseFloat(e.data[0].people),money:parseFloat(e.data[0].money)/1e4}),5==s.length){for(var r=0;r<5;r++)for(var n=0;n<5;n++)s[n].year==i[r].year&&i.push({people:s[n].people,money:s[n].money});var o=[],l=[];for(r=5;r<=9;r++)o.push(i[r].people),l.push(i[r].money);t.PChartOption.series[0].data.length=0,t.MChartOption.series[0].data.length=0,t.PChartOption.series[0].data=o,t.MChartOption.series[0].data=l,t.pChart.setOption(t.PChartOption),t.MChart.setOption(t.MChartOption)}})}(r)});var r=new t.Map({basemap:"satellite"}),n=new t.MapView({container:"poorShowMapBody",map:r,zoom:14,center:[parseFloat(t.result.features[e].attributes.longitude),parseFloat(t.result.features[e].attributes.latitude)],constraints:{maxZoom:20,minZoom:4}});n.ui.remove("zoom"),n.ui.remove("attribution");var o=new t.FeatureLayer({url:"https://services3.arcgis.com/XDzy9VWpT2sZyZqz/arcgis/rest/services/%E9%9D%A2%E6%95%B0%E6%8D%AE/FeatureServer"});o.definitionExpression="name='"+t.result.features[e].attributes.name+"'";setTimeout(function(){var e=r.allLayers.items[0];r.add(o);var a=new t.Swipe({leadingLayers:[e],trailingLayers:[o],position:100,view:n});n.ui.add(a)},1e3),t.isPoorCountryShow=!0}},1e3)},changePoorCountryShow:function(){if(this.isPoorCountryShow=!1,this.isChartShow=!0,this.isCurrrentNewsShow=!0,this.timeAndPoorShow=!0,this.isTimeShow=!0,this.clickGraphicsLayer.graphics.removeAll(),this.isMapShow=!0,this.isPhotoShow=!1,1!=this.result&&parseInt(this.result.features[this.currentIndex].attributes.time)>this.$refs.timeChild.alreadyRun){this.result.features[this.currentIndex].symbol={type:"picture-marker",url:"static/img/贫困县标识.png",width:"30px",height:"30px"}}},newsIndexSub:function(){var e=this;this.isNewsShow=!1,setTimeout(function(){e.isNewsShow=!0,e.currentNewsIndex>0?(e.currentNewsIndex--,clearInterval(e.IntervalID),e.IntervalID=setInterval(function(){e.isNewsShow=!1,setTimeout(function(){e.isNewsShow=!0,e.currentNewsIndex<e.dataNews.length-1?e.currentNewsIndex++:e.currentNewsIndex=0},300)},3500)):(e.currentNewsIndex=e.dataNews.length-1,clearInterval(e.IntervalID),e.IntervalID=setInterval(function(){e.isNewsShow=!1,setTimeout(function(){e.isNewsShow=!0,e.currentNewsIndex<e.dataNews.length-1?e.currentNewsIndex++:e.currentNewsIndex=0},300)},3500))},300)},openLegend:function(){this.legendShow=!0,this.testView.ui.add(this.legendd,"bottom-left")},newsIndexAdd:function(){var e=this;this.isNewsShow=!1,setTimeout(function(){e.isNewsShow=!0,e.currentNewsIndex<e.dataNews.length-1?(e.currentNewsIndex++,clearInterval(e.IntervalID),e.IntervalID=setInterval(function(){e.isNewsShow=!1,setTimeout(function(){e.isNewsShow=!0,e.currentNewsIndex<e.dataNews.length-1?e.currentNewsIndex++:e.currentNewsIndex=0},300)},3500)):(e.currentNewsIndex=0,clearInterval(e.IntervalID),e.IntervalID=setInterval(function(){e.isNewsShow=!1,setTimeout(function(){e.isNewsShow=!0,e.currentNewsIndex<e.dataNews.length-1?e.currentNewsIndex++:e.currentNewsIndex=0},300)},3500))},300)},photoShow:function(){this.btnsColorClassArr=["blurBtnColor","blurBtnColor","activeBtnColor"],document.getElementById("beforeImg").setAttribute("src",this.photoImgSrcArr[0]),document.getElementById("nowImg").setAttribute("src",this.photoImgSrcArr[1]),this.isMapShow=!1,this.isPhotoShow=!0},sliderMove:function(e){var t=document.getElementById("sliderContainer"),a=document.getElementById("poorShowPhotoBody");document.getElementById("poorShowPhotoBody").clientWidth;a.onmousemove=function(e){e.clientX-615>0&&e.clientX<1600&&(t.style.left=e.clientX-615+"px",document.getElementById("bIContatiner").style.width=e.clientX-615+"px")}},mapBodyShow:function(){this.btnsColorClassArr=["blurBtnColor","activeBtnColor","blurBtnColor"],document.getElementById("beforeImg").setAttribute("src",this.mapImgSrcArr[1]),document.getElementById("nowImg").setAttribute("src",this.mapImgSrcArr[0]),this.isMapShow=!1,this.isPhotoShow=!0},layerShow:function(){this.btnsColorClassArr=["activeBtnColor","blurBtnColor","blurBtnColor"],this.isMapShow=!0,this.isPhotoShow=!1},sliderFixed:function(){document.getElementById("poorShowPhotoBody").onmousemove={}},showSidebar:function(e){e.pageX<=64&&!this.isPoorShow&&e.pageY>=190&&e.pageY<=610?(0==this.sidebarShow&&(this.sidebarShow=!0),this.sidebarTipShow=!1):(1==this.sidebarShow&&(this.sidebarShow=!1),this.sidebarTipShow=!0)},changePoint:function(e){var t=this;this.filterArray=[];var a="";if(e.forEach(function(e,i){1==e[0]&&t.filterOptions[0].children.forEach(function(i,s){i.value===e[1]&&(a=a+"province='"+i.label+"' or ",t.filterArray.push(i.label))})}),a="("+(a=a.substring(0,a.length-3))+")",this.expression=a,"()"==a){a="(time > -1)";for(var i=2;i<=29;i++)this.filterArray.push(this.filterOptions[0].children[i-2].label)}"heat"!=this.$refs.timeChild.rendType&&"jY"!=this.$refs.timeChild.rendType||(a=a+" and (time > "+this.$refs.timeChild.alreadyRun+")"),this.testfl.definitionExpression=a},querySearch:function(e,t){var a=this;this.axios.get("http://120.27.240.160:3000/like?tableName=china&name="+e).then(function(e){var i=[];e.data.forEach(function(e,t){-1!=a.filterArray.indexOf(e.province)&&i.push({value:e.name,data:e.date,intro:e.intro,latitude:e.latitude,longitude:e.longitude,name:e.name,office:e.office})}),i.length>0?t(i):t([{value:"无搜索结果"}])})},goToPoor:function(e){var t=this;if("无搜索结果"!=e.value){var a=new this.Point({latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)});this.view.goTo({target:a,zoom:8},{duration:1e3}),setTimeout(function(){t.currentPoorCountry.name=e.name,t.currentPoorCountry.position.latitude=parseFloat(e.latitude),t.currentPoorCountry.position.longitude=parseFloat(e.longitude),t.currentPoorCountry.intro=e.intro,t.currentPoorCountry.office=e.office;var a=[];t.axios.get("http://120.27.240.160:3000/?tableName=word&name="+e.name).then(function(i){void 0==i.data[0][1]?t.wordCloudOption.title.text="暂无数据":t.wordCloudOption.title.text="词云";for(var s=1;s<=20;s++)a.push({name:i.data[0][s.toString()]});t.axios.get("http://120.27.240.160:3000/?tableName=freq&name="+e.name).then(function(e){for(var i=1;i<=20;i++)a[i-1].value=parseInt(e.data[0][i.toString()]);t.wordCloudOption.series[0].data=a,t.wordcloud.setOption(t.wordCloudOption)})});var i=new t.Map({basemap:"satellite"}),s=new t.MapView({container:"poorShowMapBody",map:i,zoom:14,center:[parseFloat(e.longitude),parseFloat(e.latitude)],constraints:{maxZoom:20,minZoom:4}});s.ui.remove("zoom"),s.ui.remove("attribution"),t.isPoorCountryShow=!0},1e3)}else this.$message({showClose:!0,message:"无搜索结果,请重试!"})},closeLegend:function(){this.testView.ui.remove(this.legendd),this.legendShow=!1}},mounted:function(){var e=this;this._createMapView(),this.provinceArea=this.loadAll_provinceArea(),this.connectArea=this.loadAll_connectArea();var t=document.getElementById("numChart"),a=this.$echarts.init(t);this.numChart=a,a.setOption(this.numChartOption);var i=document.getElementById("GDPChart"),s=this.$echarts.init(i);this.GDPChart=s,s.setOption(this.GDPChartOption);var r=document.getElementById("poorChart"),n=this.$echarts.init(r);this.poorChart=n,n.setOption(this.poorChartOption);var o=document.getElementById("poorCountryPChart"),l=this.$echarts.init(o);this.pChart=l,l.setOption(this.PChartOption);var h=document.getElementById("poorCountryMChart"),c=this.$echarts.init(h);this.MChart=c,c.setOption(this.MChartOption);var d=this.$echarts.init(document.getElementById("wordCloud"));this.wordcloud=d,d.setOption(this.wordCloudOption);var u=document.getElementById("autoTimeChart"),p=this.$echarts.init(u);this.ATChart=p,p.setOption(this.AutoTimeChartOption);var m=document.getElementById("barLineChart"),v=this.$echarts.init(m);this.BLChart=v,v.setOption(this.BarLineChartOption);var g=document.getElementById("radarChart"),f=this.$echarts.init(g);this.RaChart=f,f.setOption(this.RaChartOption);var w=document.getElementById("time3DChart"),y=this.$echarts.init(w);this.t3DChart=y,y.setOption(this.Time3DChartOption),this.IntervalID=setInterval(function(){e.isNewsShow=!1,setTimeout(function(){e.isNewsShow=!0,e.currentNewsIndex<e.dataNews.length-1?e.currentNewsIndex++:e.currentNewsIndex=0},300)},3500);for(var b=document.getElementsByTagName("img"),C=0;C<b.length;C++)b[C].onmousedown=function(e){e.preventDefault()};for(C=2;C<=29;C++)this.filterArray.push(this.filterOptions[0].children[C-2].label)},data:function(){return{testfl:{},testView:{zoom:0},geoCoordMap:{"山西省":[112.563627,37.86388],"北京市":[116.411087,39.899854],"天津市":[117.219014,39.106335],"上海市":[121.465592,31.224566],"重庆市":[106.568786,29.559948],"河北省":[114.521071,38.036379],"辽宁省":[123.455141,41.80233],"吉林省":[125.34753,43.875518],"黑龙江省":[126.644935,45.735449],"江苏省":[118.804623,32.053068],"浙江省":[120.169311,30.255578],"安徽省":[117.235678,31.768192],"福建省":[119.305321,26.069997],"江西省":[115.914271,28.668507],"山东省":[117.021693,36.649844],"河南省":[113.765129,34.760326],"湖北省":[114.339819,30.548614],"湖南省":[112.971207,28.102466],"广东省":[113.268977,23.131036],"海南省":[110.333116,20.019824],"四川省":[104.078062,30.629764],"贵州省":[106.705849,26.611781],"云南省":[102.712251,25.040609],"陕西省":[108.95579,34.28058],"甘肃省":[103.823851,36.050994],"青海省":[101.791632,36.633645],"台湾省":[120.907637,23.725125],"内蒙古自治区":[111.770306,40.814857],"广西壮族自治区":[108.310376,22.806877],"宁夏回族自治区":[106.261583,38.484109],"新疆维吾尔自治区":[87.620827,43.819221],"香港特别行政区":[114.1844,22.270577],"澳门特别行政区":[113.585509,22.140142],"西藏自治区":[91.117212,29.646922]},GanSuData:[[{name:"甘肃省"},{name:"天津市",value:16}],[{name:"甘肃省"},{name:"福建省",value:14}],[{name:"甘肃省"},{name:"山东省",value:9}]],GuangXiData:[[{name:"广西壮族自治区"},{name:"广东省",value:17}]],NeiMengGuData:[[{name:"内蒙古自治区"},{name:"北京市",value:16}]],NingXiaData:[[{name:"宁夏回族自治区"},{name:"福建省",value:8}]],HuBeiData:[[{name:"湖北省"},{name:"浙江省",value:8}]],HuNanData:[[{name:"湖南省"},{name:"山东省",value:7}]],JiLinData:[[{name:"吉林省"},{name:"浙江省",value:4}]],ChongQingData:[[{name:"重庆市"},{name:"山东省",value:14}]],ShanXiData:[[{name:"陕西省"},{name:"江苏省",value:19}]],HeBeiData:[[{name:"河北省"},{name:"北京市",value:15}],[{name:"河北省"},{name:"天津市",value:4}]],YunNanData:[[{name:"云南省"},{name:"上海市",value:16}],[{name:"云南省"},{name:"广东省",value:14}]],SiChuanData:[[{name:"四川省"},{name:"浙江省",value:16}],[{name:"四川省"},{name:"广东省",value:29}]],XinJiangData:[[{name:"新疆维吾尔自治区"},{name:"北京市",value:4}],[{name:"新疆维吾尔自治区"},{name:"天津市",value:3}],[{name:"新疆维吾尔自治区"},{name:"上海市",value:4}],[{name:"新疆维吾尔自治区"},{name:"江苏省",value:5}],[{name:"新疆维吾尔自治区"},{name:"浙江省",value:2}],[{name:"新疆维吾尔自治区"},{name:"山东省",value:4}],[{name:"新疆维吾尔自治区"},{name:"广东省",value:4}]],XiZangData:[[{name:"西藏自治区"},{name:"北京市",value:4}],[{name:"西藏自治区"},{name:"天津市",value:4}],[{name:"西藏自治区"},{name:"辽宁省",value:3}],[{name:"西藏自治区"},{name:"上海市",value:5}],[{name:"西藏自治区"},{name:"江苏省",value:4}],[{name:"西藏自治区"},{name:"浙江省",value:3}],[{name:"西藏自治区"},{name:"福建省",value:4}],[{name:"西藏自治区"},{name:"山东省",value:5}],[{name:"西藏自治区"},{name:"广东省",value:7}]],QingHaiData:[[{name:"青海省"},{name:"北京市",value:6}],[{name:"青海省"},{name:"天津市",value:4}],[{name:"青海省"},{name:"上海市",value:6}],[{name:"青海省"},{name:"江苏省",value:14}],[{name:"青海省"},{name:"浙江省",value:8}],[{name:"青海省"},{name:"山东省",value:4}]],GuiZhouData:[[{name:"贵州省"},{name:"辽宁省",value:3}],[{name:"贵州省"},{name:"上海市",value:8}],[{name:"贵州省"},{name:"江苏省",value:10}],[{name:"贵州省"},{name:"浙江省",value:22}],[{name:"贵州省"},{name:"山东省",value:6}],[{name:"贵州省"},{name:"广东省",value:17}]],defaultRender:{type:"simple",symbol:{type:"simple-marker",size:6,outline:{width:.5,color:[255,255,255,.5]}},visualVariables:[{type:"color",field:"date",stops:[{value:new Date(2015,1,1).getTime(),color:"#00ffff"},{value:new Date(2021,12,31).getTime(),color:"#2f3f56"}]}]},clusterConfig:{type:"cluster",clusterRadius:"100px",popupTemplate:{title:"贫困县聚类",content:"{cluster_count} 个贫困县",fieldInfos:[{fieldName:"cluster_count",format:{places:0,digitSeparator:!0}}]},clusterMinSize:"24px",clusterMaxSize:"60px",labelingInfo:[{deconflictionStrategy:"none",labelExpressionInfo:{expression:"Text($feature.cluster_count, '#,###')"},labelPlacement:"center-center"}]},pDefaultRenderer:{},numChartOption:{title:{text:"数量",textStyle:{fontSize:"18px",color:"white"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},legend:{data:[{name:"贫困县现有数量",textStyle:{color:["#184f86"]}},{name:"脱贫数量",textStyle:{color:["#54FF9F"]}}],top:"20px"},toolbox:{show:!0,feature:{dataView:{readOnly:!1},saveAsImage:{}}},dataZoom:{show:!0,start:0,end:0},xAxis:[{type:"category",boundaryGap:!1,data:function(){var e=new Date("2017-1-1"),t=new Date("2020-12-31"),a=[];for(a.push(e.toLocaleDateString());e<t;)e.setDate(e.getDate()+3),a.push(e.toLocaleDateString());return a.pop(),a.push("2020-12-31"),a}()}],yAxis:[{type:"category",data:function(){for(var e=[],t=0;t<832;t++)e.push(t);return e.push(832),e}(),boundaryGap:!1}],series:[{name:"贫困县现有数量",type:"line",data:[]},{name:"脱贫数量",type:"line",data:[]}]},startTime:"2012-1-1",GDPChartOption:{title:{text:"经济",textStyle:{fontSize:"18px",color:"white"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},legend:{data:[{name:"中央财政专项扶贫资金/十亿元",textStyle:{color:["#FF7F24"]}},{name:"人均可支配收入/万元",textStyle:{color:["#FF3030"]}}],top:"20px",textStyle:{color:"white"}},toolbox:{show:!0,feature:{dataView:{readOnly:!1},saveAsImage:{}}},xAxis:[{type:"category",boundaryGap:!1,data:[2013,2014,2015,2016,2017,2018,2019,2020]}],yAxis:[{type:"value",min:0,max:150},{type:"value",min:0,max:5}],series:[{name:"中央财政专项扶贫资金/十亿元",type:"bar",data:[],itemStyle:{normal:{color:"#FF7F24"}}},{name:"人均可支配收入/万元",yAxisIndex:1,type:"bar",data:[],itemStyle:{normal:{color:"#FF3030"}}}]},currentNum:832,poorChartOption:{title:{text:"贫困",textStyle:{fontSize:"18px",color:"white"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},legend:{data:[{name:"贫困人口/十万人",textStyle:{color:["#FFFF00"]}},{name:"贫困发生率/%",textStyle:{color:["#B8860B"]}}],top:"20px",textStyle:{color:"white"}},toolbox:{show:!0,feature:{dataView:{readOnly:!1},saveAsImage:{}}},xAxis:[{type:"category",boundaryGap:!1,data:[2012,2013,2014,2015,2016,2017,2018,2019,2020]}],yAxis:[{type:"value",min:0,max:1250},{type:"value",min:0,max:50}],series:[{name:"贫困人口/十万人",type:"bar",data:[1223.8],itemStyle:{normal:{color:"#FFFF00"}}},{name:"贫困发生率/%",type:"bar",yAxisIndex:1,data:[12.7],itemStyle:{normal:{color:"#B8860B"}}}]},dynamicTags:[],inputVisible:!1,inputFlag:!1,inputValue:"",AutoTimeChartOption:{baseOption:{color:["#3CB371","#DC143C","#FFD700"],timeline:{axisType:"category",autoPlay:!0,playInterval:1e3,data:["2015","2016","2017","2018","2019"]},title:{subtext:"数据来自全国各省年鉴",textStyle:{color:"rgba(221,221,221,1)",fontSize:18,lineHeight:20}},tooltip:{feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},legend:{left:"right",top:"25px",textStyle:{fontSize:13,color:"#fff"}},calculable:!0,grid:{y2:40,top:80,bottom:80,tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0,formatter:function(e){return e.value.replace("\n","")}}},axisLabel:{textStyle:{color:"#fff"}}}},xAxis:[c()({type:"category",axisLabel:{interval:0},data:["地区生产总值","第一产业","第二产业","第三产业"],splitLine:{show:!1}},"axisLabel",{textStyle:{color:"#fff"}})],yAxis:[{type:"value",name:"产业年增长（亿元）",axisLabel:{formatter:"{value}",textStyle:{color:"#fff"}},color:"#fff"}],series:[]},options:[{title:{text:"2015贫困县经济指标对比"},series:[{data:[]},{data:[]},{data:[]}]},{title:{text:"2016贫困县经济指标对比"},series:[{data:[]},{data:[]},{data:[]}]},{title:{text:"2017贫困县经济指标对比"},series:[{data:[]},{data:[]},{data:[]}]},{title:{text:"2018贫困县经济指标对比"},series:[{data:[]},{data:[]},{data:[]}]},{title:{text:"2019贫困县经济指标对比"},series:[{data:[]},{data:[]},{data:[]}]}]},BarLineChartOption:{color:[],title:{text:"人口数据对比",textStyle:{color:"rgba(221,221,221,1)",fontSize:18,lineHeight:20}},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},legend:{data:[" "," "," "," "," "],textStyle:{fontSize:13,color:"#fff"},top:"25px",bottom:"25px"},xAxis:[{type:"category",data:["2015","2016","2017","2018","2019"],axisPointer:{type:"shadow"},axisLabel:{textStyle:{color:"#fff"}}}],yAxis:[{type:"value",name:"年末常住人口（万人）（折线）",axisLabel:{formatter:"{value}",textStyle:{color:"#fff"}}},{type:"value",name:"居民人均可支配\n收入（元）（柱状）",axisLabel:{formatter:"{value}",textStyle:{color:"#fff"}}}],grid:{top:"35%",y2:40},series:[{name:" ",type:"bar"},{name:" ",type:"bar"},{name:" ",type:"bar"},{name:" ",type:"line",yAxisIndex:1},{name:" ",type:"line",yAxisIndex:1},{name:" ",type:"line",yAxisIndex:1}]},RaChartOption:{color:["#3CB371","#DC143C","#FFD700"],title:{text:"产业结构对比",textStyle:{color:"rgba(221,221,221,1)",fontSize:18,lineHeight:20}},tooltip:{trigger:"item",feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},legend:{textStyle:{fontSize:13,color:"#fff"},top:"25px",left:"0",orient:"vertical"},radar:[{indicator:[{text:"农业",max:80},{text:"林业",max:80},{text:"畜牧业",max:80},{text:"渔业",max:80},{text:"服务业",max:100}],center:["50%","50%"],radius:100,name:{textStyle:{fontSize:14,color:"white",backgroundColor:"#666",borderRadius:4,padding:[3,5]}}}],series:[{name:"产业结构占比",type:"radar",radarIndex:0,data:[{value:[0,0,0,0,0],name:" ",areaStyle:{color:new this.$echarts.graphic.RadialGradient(.1,.6,1,[{color:"rgba(60,179,113, 0.1)",offset:0},{color:"rgba(60,179,113, 1)",offset:1}])},label:{show:!0,formatter:function(e){return e.value},textStyle:{fontSize:12,color:"rgb(60,179,113)",textBorderColor:"white",textBorderWidth:2}}},{value:[0,0,0,0,0],name:" ",areaStyle:{color:new this.$echarts.graphic.RadialGradient(.1,.6,1,[{color:"rgba(220,20,60, 0.1)",offset:0},{color:"rgba(220,20,60, 1)",offset:1}])},label:{show:!0,formatter:function(e){return e.value},textStyle:{fontSize:12,color:"rgb(220,20,60)",textBorderColor:"white",textBorderWidth:2}}},{value:[0,0,0,0,0],name:" ",areaStyle:{color:new this.$echarts.graphic.RadialGradient(.1,.6,1,[{color:"rgba(255, 215, 0, 0.1)",offset:0},{color:"rgba(255, 215, 0, 1)",offset:1}])},label:{show:!0,formatter:function(e){return e.value},textStyle:{fontSize:12,color:"rgb(255, 215, 0)",textBorderColor:"white",textBorderWidth:2}}}]}]},Time3DChartOption:{title:{text:"脱贫时间3D可视化",textStyle:{color:"rgba(221,221,221,1)",fontSize:18,lineHeight:20}},tooltip:{formatter:function(e){return e.value[1]+2017+" 年<br>"+(e.value[0]+1)+" 月<br>"+e.value[2]+" 个"}},visualMap:{max:20,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},textStyle:{fontSize:12,color:"#fff"}},xAxis3D:{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisLabel:{show:!0,interval:0,textStyle:{fontSize:12,color:"#fff"}}},yAxis3D:{type:"category",data:["2017","2018","2019","2020"],axisLabel:{show:!0,textStyle:{fontSize:12,color:"#fff"}}},zAxis3D:{type:"value",axisLabel:{show:!0,textStyle:{fontSize:12,color:"#fff"}}},grid3D:{boxWidth:140,boxDepth:50,boxHeight:100,viewControl:{},light:{main:{intensity:1.2,shadow:!0},ambient:{intensity:.3}}},series:[{type:"bar3D",shading:"lambert",label:{fontSize:16,borderWidth:1},emphasis:{label:{fontSize:20,color:"#900"},itemStyle:{color:"#900"}}}]},defaultProps:{children:"children",label:"label"},yearSlidervalue:0,yearmarks:{0:{style:{color:"#FFD700",fontSize:"18px"},label:this.$createElement("strong","2015")},5:{style:{color:"#B0C4DE",fontSize:"18px"},label:this.$createElement("strong","2016")},10:{style:{color:"#B0C4DE",fontSize:"18px"},label:this.$createElement("strong","2017")},15:{style:{color:"#B0C4DE",fontSize:"18px"},label:this.$createElement("strong","2018")},20:{style:{color:"#B0C4DE",fontSize:"18px"},label:this.$createElement("strong","2019")}},isS:!1,isPoorShow:!1,poorData:[{name:"安徽",povertyCounty:["砀山县","阜南县","霍邱县","金寨县","利辛县","临泉县","灵壁县","潜山县","石台县","寿县","舒城县","泗县","宿松县","太湖县","望江县","萧县","颍东区","颍上县","裕安区","岳西县"]},{name:"海南",povertyCounty:["白沙县","保亭县","临高县","琼中县"]},{name:"甘肃",povertyCounty:["六盘山区","兰州市","永登县","皋兰县","榆中县","白银市","靖远县","会宁县","景泰县","天水市","清水县","秦安县","甘谷县","武山县","张家川回族自治县","北道区","武威市","古浪县","平凉市","崆峒区","泾川县","灵台县","庄浪县","静宁县","庆阳市","庆城县","环县","华池县","合水县","正宁县","宁县","镇原县","定西市","安定区","通渭县","陇西县","渭源县","临洮县","漳县","岷县","临夏回族自治州","临夏市","临夏县","康乐县","永靖县","广河县","和政县","东乡族自治县","积石山自治县","秦巴山区","陇南市","武都区","成县","文县","宕昌县","康县","西和县","礼县","徽县","两当县","藏族地区武威市","天祝藏族自治县","甘南藏族自治州","合作市","临潭县","卓尼县","舟曲县","迭部县","玛曲县","碌曲县","夏河县"]}],date:function(){var e=new Date("2012-1"),t=new Date("2016-12"),a=[];for(a.push(e.toLocaleDateString());e<t;)e.setMonth(e.getMonth()+1),a.push(e.toLocaleDateString());for(a.pop(),e=new Date("2017-1-1"),t=new Date("2020-12-31"),a.push(e.toLocaleDateString());e<t;)e.setDate(e.getDate()+3),a.push(e.toLocaleDateString());return a.pop(),a.pop(),a.push("2020-12-31"),a}(),allNews:[{time:-1,date:"1964年2月",content:"《关于在社会主义教育运动中加强农村社会保险工作，帮助贫下中农克服困难的报告》揭示了农村贫困问题的正式提出"},{time:-1,date:"1979年至1985年",content:"改革开放以工代赈帮助为主、救济为辅"},{time:-1,date:"1986年5月16日",content:"贫困地区经济开发领导小组成立，我国开始以“贫困县”为单位开展扶贫工作，并确定了331个国家级贫困县"},{time:-1,date:"1994年4月15日",content:"《国家八七扶贫攻坚计划》提出“用七年时间基本解决8000万农村贫困人口温饱问题”"},{time:-1,date:"2001年6月13日",content:"出台《中国农村扶贫开发纲要（2001-2010年）》，“整村推进”成为扶贫重点"},{time:-1,date:"2011年12月1日",content:"通过《中国农村扶贫开发纲要（2011-2020年）》，扶贫开发进入“两不愁三保障”阶段，将片区作为扶贫主战场"},{time:42,date:"2012年11月8日",content:"十八大把脱贫攻坚纳入“五位一体”总体布局和“四个全面”战略布局，标志着扶贫攻坚战的全面打响"},{time:64,date:"2013年11月3日",content:"“精准扶贫”概念首次被提出"},{time:240,date:"2016年11月23日",content:"《十三五”扶贫攻坚规划正式提出了2020年前实现“两不愁三保障”的扶贫攻坚总目标》"},{time:304,date:"2017年6月",content:"深度贫困成为该阶段扶贫攻坚的重难点"},{time:350,date:"2017年10月18日",content:"十九大将“精准脱贫”列为决胜全面建设小康社会的三大攻坚战之一"},{time:719,date:"2020年11月23日",content:"新时代攻坚脱贫目标任务如期完成，在该阶段实行标准下农村贫困人口全部脱贫，贫困县全部摘帽"},{time:732,date:"2021年2月25日",content:"国家乡村振兴局成立"},{time:732,date:"2021年4月6日",content:"《人类减贫的中国实践》白皮书发布"}],currentNews:{time:-1,date:"2011年12月31日",content:"通过《中国农村扶贫开发纲要（2011-2020年）》，扶贫开发进入“两不愁三保障”阶段，将片区作为扶贫主战场"},PChartOption:{title:{text:"人口",textStyle:{fontSize:"18px",color:"rgb(204,45,48)"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},legend:{data:[{name:"总人口",textStyle:{color:["rgb(204,45,48)"]}}],top:"20px"},toolbox:{show:!0,feature:{dataView:{readOnly:!1},saveAsImage:{}}},dataZoom:{show:!1},xAxis:[{type:"category",boundaryGap:!1,data:[2017,2018,2019,2020,2021]}],yAxis:[{type:"category",data:function(){for(var e=[],t=0;t<50;t++)e.push(t);return e}(),boundaryGap:!1}],series:[{yAxisIndex:0,name:"总人口",type:"line",data:[],itemStyle:{normal:{color:"#FF3030"}}}]},MChartOption:{title:{text:"收入",textStyle:{fontSize:"18px",color:"#54FF9F"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},legend:{data:[{name:"人均可支配收入/万",textStyle:{color:["#54FF9F"]}}],top:"20px"},toolbox:{show:!0,feature:{dataView:{readOnly:!1},saveAsImage:{}}},dataZoom:{show:!1},xAxis:[{type:"category",boundaryGap:!1,data:[2017,2018,2019,2020,2021]}],yAxis:[{type:"value",min:0,max:3}],series:[{name:"人均可支配收入/万",type:"line",data:[],itemStyle:{normal:{color:"#54FF9F"}}}]},wordCloudOption:{title:{text:"词云",x:"center",textStyle:{color:"orange"},left:"0px"},backgroundColor:"rgb(0,15,26)",series:[{textStyle:{color:"orange"},type:"wordCloud",gridSize:10,sizeRange:[14,60],rotationRange:[0,0],left:"center",top:"center",right:null,bottom:null,width:"200%",height:"200%",data:[{name:"十九大精神",value:15e3},{name:"两学一做",value:10081},{name:"中华民族",value:9386},{name:"马克思主义",value:7500},{name:"民族复兴",value:7500},{name:"社会主义制度",value:6500},{name:"国防白皮书",value:6500},{name:"创新",value:6e3},{name:"民主革命",value:4500},{name:"文化强国",value:3800},{name:"国家主权",value:3e3}]}]},currentIndex:-1,currentPoor:[],currentColor:[],currentArea:"中国",dataNews:[{time:-1,date:"1964年2月",content:"《关于在社会主义教育运动中加强农村社会保险工作，帮助贫下中农克服困难的报告》揭示了农村贫困问题的正式提出"},{time:-1,date:"1979年至1985年",content:"改革开放以工代赈帮助为主、救济为辅"},{time:-1,date:"1986年5月16日",content:"贫困地区经济开发领导小组成立，我国开始以“贫困县”为单位开展扶贫工作，并确定了331个国家级贫困县"},{time:-1,date:"1994年4月15日",content:"《国家八七扶贫攻坚计划》提出“用七年时间基本解决8000万农村贫困人口温饱问题”"},{time:-1,date:"2001年6月13日",content:"出台《中国农村扶贫开发纲要（2001-2010年）》，“整村推进”成为扶贫重点"},{time:-1,date:"2011年12月1日",content:"通过《中国农村扶贫开发纲要（2011-2020年）》，扶贫开发进入“两不愁三保障”阶段，将片区作为扶贫主战场"}],currentNewsIndex:0,sidebarShow:!1,isChartShow:!0,isCurrrentNewsShow:!0,timeAndPoorShow:!0,isTimeShow:!0,isMapShow:!0,isPhotoShow:!1,isLoading:!1,time3DArr:[[0,0,0],[0,1,0],[0,2,0],[0,3,0],[0,4,0],[0,5,0],[0,6,0],[0,7,0],[0,8,0],[0,9,0],[0,10,0],[0,11,0],[1,0,0],[1,1,0],[1,2,0],[1,3,0],[1,4,0],[1,5,0],[1,6,0],[1,7,0],[1,8,0],[1,9,0],[1,10,0],[1,11,0],[2,0,0],[2,1,0],[2,2,0],[2,3,0],[2,4,0],[2,5,0],[2,6,0],[2,7,0],[2,8,0],[2,9,0],[2,10,0],[2,11,0],[3,0,0],[3,1,0],[3,2,0],[3,3,0],[3,4,0],[3,5,0],[3,6,1],[3,7,0],[3,8,0],[3,9,0],[3,10,0],[3,11,5]],MODE:11,spotClusterTarget:1,spotClusterTargetOptions:[{value:1,label:"人均生产总值(元)"},{value:2,label:"农村人口可支配收入(元)"},{value:3,label:"农林牧渔产业增加值(万元)"}],areaSelectmode:0,areaMode:"",areaModeOptions:[{value:1,label:"省份分析"},{value:2,label:"划区分析"},{value:3,label:"贫困县连片区分析"}],provinceArea:[],provinceAreaName:"",connectArea:[],sidebarTipShow:!1,connectAreaName:"",IsProvinceDivShow:!1,IsConnectDivShow:!1,areaSelectgraphicsArr:[],chooseABC:1,iscontrastABCShow:!1,isArea3DShow:!1,btnsColorClassArr:["activeBtnColor","blurBtnColor","blurBtnColor"],isChartShowTwoOne:!1,ellipseMode:"China",isChartShow2_2:!1,isChartShow2_3_up:!1,isChartShow2_3_down:!1,isYearSliderShow:!1,isGDPTitleShow:!1,IsAddButtonShow:!0,resizeable:!1,spatialYearList_1:[],spatialYear_2:2,spatialYear_3:3,spatialAnalystMode:"1",clientX:0,clientY:0,minW:8,minH:8,c:document.getElementById("GDP3Dcharts"),direc:"",change3DFlag:!1,Is2DShow:!0,centerM:[38.1,42.9,46.5,66.5,86.5,106.5,126.5,146.5],tempCM:[38.1,42.9,46.5,66.5,86.5,106.5,126.5,146.5],poorM:[1.83108,2.01671,2.19662,2.3821,2.59738,2.8228,3.07328,3.2189],tempPM:[.608,.685,.765,.845,.938,1.037,1.157,1.259],poorN:[989.9,824.9,701.7,557.5,433.5,304.6,166,55.1,0],tempPN:[989.9,824.9,701.7,557.5,433.5,304.6,166,55.1,0],poorL:[10.2,8.5,7.2,5.7,4.5,3.1,1.7,.6,0],tempPL:[10.2,8.5,7.2,5.7,4.5,3.1,1.7,.6,0],tempPA:[832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,769,769,769,769,769,769,769,769,769,769,769,769,755,755,753,715,690,690,690,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,659,659,659,659,659,659,659,659,659,659,659,659,659,659,655,655,655,655,655,652,652,652,652,652,635,614,587,582,475,475,447,405,405,405,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,374,374,374,374,374,374,374,374,374,374,374,362,362,362,362,362,362,362,362,332,332,328,323,228,174,151,151,151,151,151,151,151,151,151,151,151,151,146,146,146,146,113,113,107,98,98,98,98,83,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,33,25,17,0],poorAN:[832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,832,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,831,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,809,769,769,769,769,769,769,769,769,769,769,769,769,755,755,753,715,690,690,690,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,684,659,659,659,659,659,659,659,659,659,659,659,659,659,659,655,655,655,655,655,652,652,652,652,652,635,614,587,582,475,475,447,405,405,405,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,393,374,374,374,374,374,374,374,374,374,374,374,362,362,362,362,362,362,362,362,332,332,328,323,228,174,151,151,151,151,151,151,151,151,151,151,151,151,146,146,146,146,113,113,107,98,98,98,98,83,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,33,25,17,0],isPoorCountryShow:!1,expression:"",isNewsShow:!0,currentPoorCountry:{name:"",date:"",position:{longitude:"",latitude:""},office:"",intro:""},props:{multiple:!0},filterOptions:[{value:1,label:"省份",children:[{value:2,label:"安徽省"},{value:3,label:"山西省"},{value:4,label:"河北省"},{value:5,label:"辽宁省"},{value:6,label:"吉林省"},{value:7,label:"黑龙江省"},{value:8,label:"江苏省"},{value:9,label:"福建省"},{value:10,label:"江西省"},{value:11,label:"河南省"},{value:12,label:"湖北省"},{value:13,label:"湖南省"},{value:14,label:"广东省"},{value:15,label:"海南省"},{value:16,label:"四川省"},{value:17,label:"贵州省"},{value:18,label:"云南省"},{value:19,label:"陕西省"},{value:20,label:"甘肃省"},{value:21,label:"青海省"},{value:22,label:"上海市"},{value:23,label:"天津市"},{value:24,label:"重庆市"},{value:25,label:"内蒙古自治区"},{value:26,label:"广西壮族自治区"},{value:27,label:"西藏自治区"},{value:28,label:"宁夏回族自治区"},{value:29,label:"新疆维吾尔自治区"}]}],anaShow:!1,filterShow:!1,filterModel:"",filterArray:[],result:1,legendShow:!0,btnShow:!0,targetUrl:"http://www.cpad.gov.cn/",provincesHref:[{name:"新疆",url:"http://fpzg.cpad.gov.cn/429463/429470/429503/index.html"},{name:"甘肃",url:"http://fpzg.cpad.gov.cn/429463/429470/429500/index.html"},{name:"青海",url:"http://fpzg.cpad.gov.cn/429463/429470/429501/index.html"},{name:"宁夏",url:"http://fpzg.cpad.gov.cn/429463/429470/429502/index.html"},{name:"云南",url:"http://fpzg.cpad.gov.cn/429463/429470/429497/index.html"},{name:"西藏",url:"http://fpzg.cpad.gov.cn/429463/429470/429498/index.html"},{name:"陕西",url:"http://fpzg.cpad.gov.cn/429463/429470/429499/index.html"},{name:"重庆",url:"http://fpzg.cpad.gov.cn/429463/429470/429494/index.html"},{name:"四川",url:"http://fpzg.cpad.gov.cn/429463/429470/429495/index.html"},{name:"贵州",url:"http://fpzg.cpad.gov.cn/429463/429470/429496/index.html"},{name:"广东",url:"http://fpzg.cpad.gov.cn/429463/429470/429491/index.html"},{name:"广西",url:"http://fpzg.cpad.gov.cn/429463/429470/429492/index.html"},{name:"海南",url:"http://fpzg.cpad.gov.cn/429463/429470/429493/index.html"},{name:"河南",url:"http://fpzg.cpad.gov.cn/429463/429470/429488/index.html"},{name:"湖北",url:"http://fpzg.cpad.gov.cn/429463/429470/429489/index.html"},{name:"湖南",url:"http://fpzg.cpad.gov.cn/429463/429470/429490/index.html"},{name:"福建",url:"http://fpzg.cpad.gov.cn/429463/429470/429485/index.html"},{name:"江西",url:"http://fpzg.cpad.gov.cn/429463/429470/429486/index.html"},{name:"山东",url:"http://fpzg.cpad.gov.cn/429463/429470/429487/index.html"},{name:"江苏",url:"http://fpzg.cpad.gov.cn/429463/429470/429482/index.html"},{name:"浙江",url:"http://fpzg.cpad.gov.cn/429463/429470/429483/index.html"},{name:"安徽",url:"http://fpzg.cpad.gov.cn/429463/429470/429484/index.html"},{name:"吉林",url:"http://fpzg.cpad.gov.cn/429463/429470/429479/index.html"},{name:"黑龙江",url:"http://fpzg.cpad.gov.cn/429463/429470/429480/index.html"},{name:"上海",url:"http://fpzg.cpad.gov.cn/429463/429470/429481/index.html"},{name:"山西",url:"http://fpzg.cpad.gov.cn/429463/429470/429476/index.html"},{name:"内蒙古",url:"http://fpzg.cpad.gov.cn/429463/429470/429477/index.html"},{name:"辽宁",url:"http://fpzg.cpad.gov.cn/429463/429470/429478/index.html"},{name:"北京",url:"http://fpzg.cpad.gov.cn/429463/429470/429473/index.html"},{name:"天津",url:"http://fpzg.cpad.gov.cn/429463/429470/429474/index.html"},{name:"河北",url:"http://fpzg.cpad.gov.cn/429463/429470/429475/index.html"}],mapImgSrcArr:["static/img/暂无图片.png","static/img/暂无图片.png"],photoImgSrcArr:["static/img/暂无图片.png","static/img/暂无图片.png"]}},props:{earseLoad:Function}}),w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mapShow-body",ondragstart:"return false;",oncontextmenu:"return false;"},on:{mouseup:e.sliderFixed,mousemove:e.showSidebar}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{id:"Loading"}},[e._m(0)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.Is2DShow,expression:"Is2DShow"}],attrs:{id:"viewDiv"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.Is2DShow,expression:"!Is2DShow"}],attrs:{id:"view3DDiv"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.legendShow&&e.btnShow&&!e.anaShow,expression:"legendShow && btnShow && !anaShow"}],ref:"closeLegendChild",attrs:{id:"labelTextContainer"}},[a("span",[e._v("图例")]),e._v(" "),a("el-button",{staticClass:"closeLegendBtn",attrs:{size:"mini",icon:"el-icon-close"},on:{click:e.closeLegend}})],1),e._v(" "),e._m(1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.legendShow&&e.btnShow&&!e.anaShow,expression:"!legendShow && btnShow && !anaShow"}],attrs:{id:"openLegendBtnContainer",title:"打开标签"},on:{click:e.openLegend}},[a("div",{attrs:{id:"forPosition"}},[a("el-button",{staticClass:"iconfont closeLegendIcon",attrs:{size:"mini"}},[e._v("")])],1)]),e._v(" "),e._m(2),e._v(" "),a("transition",{attrs:{name:"sidebarTipAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.sidebarTipShow,expression:"sidebarTipShow"}],attrs:{id:"sidebarTip"}},[a("div",{attrs:{id:"tipImgContainer"}},[a("img",{staticClass:"tipImg",attrs:{src:"static/img/右箭头.png"}})])])]),e._v(" "),a("transition",{attrs:{name:"sideBarAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.sidebarShow,expression:"sidebarShow"}],attrs:{id:"sidebar"}},[a("el-col",{attrs:{span:24}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#fff","active-text-color":"#928dab",collapse:!0,id:"elMenu"},on:{select:e.selectEvent}},[a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-search"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("搜索")])]),e._v(" "),a("el-submenu",{staticClass:"first-item",attrs:{index:"1","unique-opened":!0}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v(" "),a("span",[e._v("减贫地图")])]),e._v(" "),a("el-menu-item",{attrs:{index:"1-2"}},[e._v("       贫  困  聚  合  图")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-3"}},[e._v("       贫  困  热  力  图")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-4"}},[e._v("       贫  困  渐  隐  图")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-5"}},[e._v("       分  散  萤  火  图\n            ")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-6"}},[e._v("       帮  扶  轨  迹  图")])],2),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v(" "),a("span",[e._v("减贫分析")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1"}},[e._v("     贫  困  时  空  分  析")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-2"}},[e._v("     对  比  图  表  分  析")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-3"}},[e._v("     三  维  区  域  分  析")])],2),e._v(" "),a("el-menu-item",{attrs:{index:"5"}},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("地图导出")])]),e._v(" "),a("el-menu-item",{attrs:{index:"6"}},[a("i",{staticClass:"el-icon-s-custom"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("防返贫系统")])])],1)],1)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.timeAndPoorShow,expression:"timeAndPoorShow"}],attrs:{id:"timeAndNum"}},[a("div",{attrs:{id:"timeChange"}},[e._v("\n      "+e._s(e.startTime)+"\n    ")]),e._v(" "),a("div",{attrs:{id:"numChange"}},[a("div",{attrs:{id:"currentNumt"}},[a("a",{attrs:{id:"provinceGoToA",href:e.targetUrl,target:"_blank"}},[e._v(e._s(e.currentArea))]),e._v("剩余\n      ")]),e._v("\n      "+e._s(e.currentNum)+"\n      "),a("div",{attrs:{id:"currentNumb"}},[e._v("个贫困县")])])]),e._v(" "),a("transition",{attrs:{name:"allCharts"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChartShow,expression:"isChartShow"}],attrs:{id:"charts"}},[a("div",{attrs:{id:"chartTitle"}},[e._v("实时图表更新")]),e._v(" "),a("div",{attrs:{id:"numChart"}}),e._v(" "),a("div",{attrs:{id:"GDPChart"}}),e._v(" "),a("div",{attrs:{id:"poorChart"}})])]),e._v(" "),a("timeAxis",{directives:[{name:"show",rawName:"v-show",value:e.isTimeShow,expression:"isTimeShow"}],ref:"timeChild",attrs:{changeArea:e.changeArea,updateTime:e.updateTime,changeNoSee:e.changeNoSee,changeHeatmap:e.changeHeatmap,updateNumChart:e.updateNumChart}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isS,expression:"isS"}],attrs:{id:"backSystem"},on:{click:e.back}},[a("span",{staticClass:"span1"}),e._v(" "),a("span",{staticClass:"span2"}),e._v(" "),a("span",{staticClass:"span3"}),e._v(" "),a("span",{staticClass:"span4"}),e._v("\n    返回主界面\n  ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPoorShow,expression:"isPoorShow"}],attrs:{id:"proPoorTitle"}},[e._v("点击下表查看贫困县详细信息")]),e._v(" "),a("transition",{attrs:{name:"poorShowtrans"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPoorShow,expression:"isPoorShow"}],attrs:{id:"proPoor"}},[a("div",{attrs:{id:"proPoorContent"}},e._l(e.currentPoor,function(t,i){return a("li",{key:i,staticClass:"poorLi",style:{color:e.currentColor[i]},on:{click:function(t){return e.poorCountryS(i)}}},[e._v("\n          "+e._s(t)+"\n        ")])}),0)])]),e._v(" "),a("transition",{attrs:{name:"poorCountryAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPoorCountryShow,expression:"isPoorCountryShow"}],attrs:{id:"poorCountryShow"}},[a("el-button",{staticClass:"closeButton",attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:function(t){return e.changePoorCountryShow()}}}),e._v(" "),a("div",{attrs:{id:"poorShowBook"}},[a("div",{attrs:{id:"poorShowBookName"}},[e._v("\n          "+e._s(e.currentPoorCountry.name)+"\n        ")]),e._v(" "),a("div",{attrs:{id:"poorShowBookDate"}},[e._v("\n          "+e._s("脱贫日期:"+e.currentPoorCountry.date)+"\n        ")]),e._v(" "),a("div",{attrs:{id:"poorShowBookPosition"}},[a("div",{attrs:{id:"longitude"}},[e._v("\n            "+e._s("经度:"+e.currentPoorCountry.position.longitude)+"\n          ")]),e._v(" "),a("div",{attrs:{id:"latitude"}},[e._v("\n            "+e._s("纬度:"+e.currentPoorCountry.position.latitude)+"\n          ")])]),e._v(" "),a("div",{attrs:{id:"poorShowBookOffice"}},[a("a",{attrs:{href:e.currentPoorCountry.office,target:"_blank"}},[e._v(e._s(e.currentPoorCountry.name+"人民政府官网"))])]),e._v(" "),a("div",{attrs:{id:"poorShowBookIntro"}},[a("span",{attrs:{id:"jianjieSpan"}},[e._v("简介:")]),e._v(" "+e._s(e.currentPoorCountry.intro)+"\n        ")])]),e._v(" "),a("div",{attrs:{id:"poorShowMap"}},[a("div",{attrs:{id:"poorShowMapTitle"}},[a("span",{staticClass:"todayAndBefore"},[e._v("今昔对比")]),e._v(" "),a("el-button",{class:e.btnsColorClassArr[0],attrs:{id:"layerBtn"},on:{click:e.layerShow}},[e._v("图层")]),e._v(" "),a("el-button",{class:e.btnsColorClassArr[1],attrs:{id:"stateBtn"},on:{click:e.mapBodyShow}},[e._v("卫星图")]),e._v(" "),a("el-button",{class:e.btnsColorClassArr[2],attrs:{id:"PhotoBtn"},on:{click:e.photoShow}},[e._v("照片")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isMapShow,expression:"isMapShow"}],attrs:{id:"poorShowMapBody"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoShow,expression:"isPhotoShow"}],attrs:{id:"poorShowPhotoBody"},on:{mouseup:e.sliderFixed}},[a("div",{attrs:{id:"sliderContainer"}},[a("div",{attrs:{id:"sliderBtn"},on:{mousedown:e.sliderMove,mouseup:e.sliderFixed}})]),e._v(" "),a("div",{attrs:{id:"bIContatiner"}},[a("img",{attrs:{id:"beforeImg"}})]),e._v(" "),a("div",{attrs:{id:"nIContatiner"}},[a("img",{attrs:{id:"nowImg"}})])])]),e._v(" "),a("div",{attrs:{id:"poorShowCharts"}},[a("div",{attrs:{id:"poorCountryPChart"}}),e._v(" "),a("div",{attrs:{id:"wordCloud"}}),e._v(" "),a("div",{attrs:{id:"poorCountryMChart"}})]),e._v(" "),a("div")],1)]),e._v(" "),a("transition",{attrs:{name:"filterAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.filterShow,expression:"filterShow"}],attrs:{id:"filter"}},[a("div",{attrs:{id:"cascader"}},[a("el-cascader",{attrs:{options:e.filterOptions,props:e.props,"collapse-tags":"",placeholder:"选择过滤关键词",clearable:""},on:{change:e.changePoint}})],1),e._v(" "),a("div",{attrs:{id:"filterMid"}}),e._v(" "),a("div",{attrs:{id:"autocomplete"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{placeholder:"搜县名、搜特点","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},on:{select:e.goToPoor},model:{value:e.filterModel,callback:function(t){e.filterModel=t},expression:"filterModel"}})],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isCurrrentNewsShow,expression:"isCurrrentNewsShow"}],attrs:{id:"currrentNews"}},[a("span",{staticClass:"curS1"}),e._v(" "),a("span",{staticClass:"curS2"}),e._v(" "),a("transition",{attrs:{name:"newsShow"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isNewsShow,expression:"isNewsShow"}],attrs:{id:"CurNewsCon"}},[e._v("\n        🔈"+e._s(e.dataNews[e.currentNewsIndex].date)+","+e._s(e.dataNews[e.currentNewsIndex].content)+"\n      ")])]),e._v(" "),a("div",{attrs:{id:"newsBtn"}},[a("button",{staticClass:"arrowsLeft",on:{click:e.newsIndexSub}}),e._v(" "),a("button",{staticClass:"bn-arrows-right",on:{click:e.newsIndexAdd}},[e._v(">")])])],1),e._v(" "),a("transition",{attrs:{name:"contrastWindowOne"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChartShowTwoOne,expression:"isChartShowTwoOne"}],attrs:{id:"spatialAnalyst"}},[a("div",{attrs:{id:"spatialAnalystLabel"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handlespatialAnalystClick},model:{value:e.spatialAnalystMode,callback:function(t){e.spatialAnalystMode=t},expression:"spatialAnalystMode"}},[a("el-tab-pane",{attrs:{label:"标准差椭圆",name:"1"}},[a("div",[a("el-checkbox-group",{on:{change:e.handleCheckedYearsChange_1},model:{value:e.spatialYearList_1,callback:function(t){e.spatialYearList_1=t},expression:"spatialYearList_1"}},[a("el-checkbox",{attrs:{label:"2015"}}),e._v(" "),a("el-checkbox",{attrs:{label:"2016"}}),e._v(" "),a("el-checkbox",{attrs:{label:"2017"}}),e._v(" "),a("el-checkbox",{attrs:{label:"2018"}}),e._v(" "),a("el-checkbox",{attrs:{label:"2019"}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"冷热点分析",name:"2"}},[a("div",[a("el-radio-group",{on:{change:e.handleCheckedYearsChange_2},model:{value:e.spatialYear_2,callback:function(t){e.spatialYear_2=t},expression:"spatialYear_2"}},[a("el-radio",{attrs:{label:2}},[e._v("2015")]),e._v(" "),a("el-radio",{attrs:{label:4}},[e._v("2016")]),e._v(" "),a("el-radio",{attrs:{label:6}},[e._v("2017")]),e._v(" "),a("el-radio",{attrs:{label:8}},[e._v("2018")]),e._v(" "),a("el-radio",{attrs:{label:10}},[e._v("2019")])],1),e._v(" "),a("div",{staticClass:"SpotClusterTarget"},[a("el-select",{attrs:{placeholder:"请选择分析指标"},on:{change:e.handleSpotClusterTarget},model:{value:e.spotClusterTarget,callback:function(t){e.spotClusterTarget=t},expression:"spotClusterTarget"}},e._l(e.spotClusterTargetOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"聚类与离群分析",name:"3"}},[a("div",[a("el-radio-group",{on:{change:e.handleCheckedYearsChange_3},model:{value:e.spatialYear_3,callback:function(t){e.spatialYear_3=t},expression:"spatialYear_3"}},[a("el-radio",{attrs:{label:3}},[e._v("2015")]),e._v(" "),a("el-radio",{attrs:{label:6}},[e._v("2016")]),e._v(" "),a("el-radio",{attrs:{label:9}},[e._v("2017")]),e._v(" "),a("el-radio",{attrs:{label:12}},[e._v("2018")]),e._v(" "),a("el-radio",{attrs:{label:15}},[e._v("2019")])],1),e._v(" "),a("div",{staticClass:"SpotClusterTarget"},[a("el-select",{attrs:{placeholder:"请选择分析指标"},on:{change:e.handleSpotClusterTarget},model:{value:e.spotClusterTarget,callback:function(t){e.spotClusterTarget=t},expression:"spotClusterTarget"}},e._l(e.spotClusterTargetOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)])],1)],1)])]),e._v(" "),a("transition",{attrs:{name:"contrastWindowTwo"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.iscontrastABCShow,expression:"iscontrastABCShow"}],attrs:{id:"contrastABC"}},[a("div",{attrs:{id:"uiABCLabel"}},[e._l(e.dynamicTags,function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v("\n          "+e._s(t)+"\n        ")])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.IsAddButtonShow,expression:"IsAddButtonShow"}],staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 输入或地图选择贫困县")])],2),e._v(" "),a("div",{attrs:{id:"confirmContrast"},on:{click:e.contrastResultShow}},[e._v("对 比 分 析")])])]),e._v(" "),a("transition",{attrs:{name:"allCharts"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChartShow2_2,expression:"isChartShow2_2"}],attrs:{id:"concharts"}},[a("div",{attrs:{id:"autoTimeChart"}}),e._v(" "),a("div",{attrs:{id:"barLineChart"}}),e._v(" "),a("div",{attrs:{id:"radarChart"}})])]),e._v(" "),a("transition",{attrs:{name:"contrastWindowThree"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isArea3DShow,expression:"isArea3DShow"}],attrs:{id:"Area3D"}},[a("div",{attrs:{id:"areaModeDiv"}},[a("el-select",{attrs:{placeholder:"请选择划区分析方式"},on:{change:e.handleAreaModeDiv},model:{value:e.areaMode,callback:function(t){e.areaMode=t},expression:"areaMode"}},e._l(e.areaModeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.IsProvinceDivShow,expression:"IsProvinceDivShow"}],attrs:{id:"provinceAreaDiv"}},[a("el-row",{staticClass:"demo-autocomplete"},[a("el-col",{attrs:{span:12}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch_provinceArea,placeholder:"请输入省份名称"},on:{select:e.handleSelect_provinceArea},model:{value:e.provinceAreaName,callback:function(t){e.provinceAreaName=t},expression:"provinceAreaName"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.IsConnectDivShow,expression:"IsConnectDivShow"}],attrs:{id:"connectAreaDiv"}},[a("el-row",{staticClass:"demo-autocomplete"},[a("el-col",{attrs:{span:12}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch_connectArea,placeholder:"请输入贫困县连片区名称"},on:{select:e.handleSelect_connectArea},model:{value:e.connectAreaName,callback:function(t){e.connectAreaName=t},expression:"connectAreaName"}})],1)],1)],1)])]),e._v(" "),a("transition",{attrs:{name:"Area3DWindow"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChartShow2_3_down,expression:"isChartShow2_3_down"}],attrs:{id:"time3DContainer"}},[a("div",{staticStyle:{width:"500px",height:"400px"},attrs:{id:"time3DChart"}})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isGDPTitleShow,expression:"isGDPTitleShow"}],attrs:{id:"sliderTitle"}},[e._v("人均GDP(元)")]),e._v(" "),a("transition",{attrs:{name:"allCharts"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChartShow2_3_up,expression:"isChartShow2_3_up"}],attrs:{id:"GDP3Dcharts"}},[a("div"),e._v(" "),a("div",{attrs:{id:"eagleEyeDiv"}}),e._v(" "),a("div",{attrs:{id:"containerDiv"}},[a("div",{attrs:{id:"slider"}})])])]),e._v(" "),a("div",{attrs:{id:"23Dtemp"}}),e._v(" "),a("transition",{attrs:{name:"yearSelectionWindow"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isYearSliderShow,expression:"isYearSliderShow"}],attrs:{id:"yearSelectionDiv"}},[a("div",{staticStyle:{width:"700px",height:"100px","margin-top":"25px","margin-bottom":"50px","margin-left":"100px"},attrs:{id:"yearSelection"}},[a("el-slider",{attrs:{step:5,min:0,max:20,marks:e.yearmarks,"show-tooltip":!1,"show-stops":""},on:{change:e.changeYear3D},model:{value:e.yearSlidervalue,callback:function(t){e.yearSlidervalue=t},expression:"yearSlidervalue"}})],1)])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"threeBalls"}},[t("div",{staticClass:"loader-inner ball-beat"},[t("div"),this._v(" "),t("div"),this._v(" "),t("div")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"esri-widget",attrs:{id:"infoDiv"}},[t("div",{attrs:{id:"legendDiv"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"iconContainer"}},[t("img",{attrs:{src:"static/img/icon.png",id:"systemIcon"}}),this._v(" "),t("span",{staticClass:"iconText"},[this._v("扶贫视界")])])}]};var y={components:{mapShowBody:a("VU/8")(f,w,!1,function(e){a("ik31"),a("rj6T")},"data-v-6b323918",null).exports},props:{earseLoad:Function}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"mapShow-bodyer"}},[t("mapShowBody",{attrs:{earseLoad:this.earseLoad}})],1)},staticRenderFns:[]};var C=a("VU/8")(y,b,!1,function(e){a("p25U")},null,null).exports,x={name:"descriptionList",data:function(){return{photoArr:[]}},mounted:function(){""!=this.photo1&&(0,this.photoArr.push(this.photo1)),""!=this.photo2&&(0,this.photoArr.push(this.photo2)),""!=this.photo3&&(0,this.photoArr.push(this.photo3)),""!=this.photo4&&(0,this.photoArr.push(this.photo4)),""!=this.photo5&&(0,this.photoArr.push(this.photo5))},props:{state:String,time:String,endtime:String,text:String,photo1:String,photo2:String,photo3:String,photo4:String,photo5:String}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"itemm"}},[a("div",{attrs:{id:"photocontainer"}},e._l(e.photoArr,function(e){return a("img",{key:e,staticClass:"photos",attrs:{src:"data:image/png;base64,"+e}})}),0),e._v(" "),a("div",{staticClass:"reqTitle"},[e._v("申请信息")]),e._v(" "),a("div",{staticClass:"textContent"},[a("div",{attrs:{id:"threeContents"}},[a("div",{staticClass:"textItem"},[a("span",{staticClass:"reqTitles1"},[e._v("申请状态:")]),a("span",{staticClass:"reqContent1"},[e._v(e._s(e.state))])]),e._v(" "),a("div",{staticClass:"textItem"},[a("span",{staticClass:"reqTitles1"},[e._v("申请时间:")]),a("span",{staticClass:"reqContent1"},[e._v(e._s(e.time))])]),e._v(" "),a("div",{staticClass:"textItem"},[a("span",{staticClass:"reqTitles1"},[e._v("完成时间:")]),a("span",{staticClass:"reqContent1"},[e._v(e._s(e.endtime))])])]),e._v(" "),a("div",{attrs:{id:"oneContent"}},[a("div",{staticClass:"textItem"},[a("span",{staticClass:"reqTitles2"},[e._v("申请内容:")]),a("span",{staticClass:"reqContent2"},[e._v(e._s(e.text))])])])])])},staticRenderFns:[]};var _={name:"diffi",mounted:function(){this.param=new FormData},components:{descriptionItem:a("VU/8")(x,S,!1,function(e){a("1H3y")},"data-v-ca9b7206",null).exports},data:function(){return{fileList:[],textContent:"",srcArr:[],noneReq:!1,descriptionList:[],data:null,colors:["#99A9BF","#F7BA2A","#FF9900"],gradeBox:!1,proFinish:!1}},props:{username:Array,needkeys:Array},methods:{beforeupload:function(e){if(this.fileList.length>5)return this.$message({message:"最多只能上传五张图片!",type:"warning"}),!1;var t=window.URL||window.webkitURL;return this.srcArr.push(t.createObjectURL(e)),this.fileList.push(e),!1},submit:function(){var e=this;this.fileList.length<1?this.$message({message:"请至少上传一张图片!",type:"warning"}):this.$confirm("每个用户在审核完成之前只能申请1次困难援助，请务必认真填写","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,s=t.getDate();t=a.toString()+"-"+i.toString()+"-"+s.toString(),e.param.append("time",t),e.param.append("name",e.needkeys[5]),e.param.append("id",e.needkeys[6]),e.param.append("phone",e.username[2]),e.param.append("position",e.needkeys[9]),e.param.append("longitude",e.needkeys[10]),e.param.append("latidude",e.needkeys[11]),e.param.append("text",e.textContent),e.fileList.forEach(function(t,a){e.param.append("img"+a,t)}),e.axios.post("http://120.27.240.160:3000/diffi",e.param,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$message({type:"success",message:"申请成功！请等待审核！"})}),e.noneReq=!1,e.$refs.myRequestBtn.$el.style.backgroundColor="rgb(84,101,169)",e.$refs.newRequestBtn.$el.style.backgroundColor="rgb(94,94,94)"}).catch(function(){e.$message({type:"info",message:"已取消申请"})})},showMyReq:function(){this.$refs.myRequestBtn.$el.style.backgroundColor="rgb(84,101,169)",this.$refs.newRequestBtn.$el.style.backgroundColor="rgb(94,94,94)",this.noneReq=!1},newReq:function(){var e=this;this.axios.get("http://120.27.240.160:3000/hasreq?id="+this.needkeys[6]).then(function(t){t.data.length>=1?e.$message({message:"你还有未完成的申请~",type:"warning"}):(e.$refs.myRequestBtn.$el.style.backgroundColor="rgb(94,94,94)",e.$refs.newRequestBtn.$el.style.backgroundColor="rgb(84,101,169)",e.noneReq=!0)})},initReq:function(){var e=this;0!=this.descriptionList.length&&(this.descriptionList.length=0),this.axios.get("http://120.27.240.160:3000/getReq?id="+this.needkeys[6]).then(function(t){t.data.forEach(function(t,a){0==t.state?t.state="申请审批中":1==t.state?t.state="已完成处理":t.state="负责人赶往中",t.time=t.time.split("T")[0],t.endtime=t.endtime.split("T")[0],"1899-12-31"==t.endtime&&(t.endtime="未完成"),e.descriptionList.push(t)}),"负责人赶往中"==t.data[0].state&&(e.proFinish=!0)})},showGrade:function(){this.gradeBox=!0},submitGrade:function(){var e=this,t=this.data,a=this.needkeys[6],i=new Date,s=i.getFullYear(),r=i.getMonth()+1,n=i.getDate();i=s.toString()+"-"+r.toString()+"-"+n.toString(),this.axios.get("http://120.27.240.160:3000/submitrequest?id="+a+"&grade="+t+"&date="+i).then(function(t){e.$message({message:"感谢您的评价!",type:"success"}),e.gradeBox=!1,e.proFinish=!1,e.initReq()})},refresh:function(){var e=this;0!=this.descriptionList.length&&(this.descriptionList.length=0),this.axios.get("http://120.27.240.160:3000/getReq?id="+this.needkeys[6]).then(function(t){t.data.forEach(function(t,a){0==t.state?t.state="申请审批中":1==t.state?t.state="已完成处理":t.state="负责人赶往中",t.time=t.time.split("T")[0],t.endtime=t.endtime.split("T")[0],"1899-12-31"==t.endtime&&(t.endtime="未完成"),e.descriptionList.push(t)}),"负责人赶往中"==t.data[0].state&&(e.proFinish=!0)})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"diffiBody"}},[e._m(0),e._v(" "),a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"selectFun"}},[a("el-button",{ref:"myRequestBtn",staticClass:"myRequestBtn",attrs:{type:"text"},on:{click:e.showMyReq}},[e._v("\n        我的申请\n      ")]),e._v(" "),a("el-button",{ref:"newRequestBtn",staticClass:"newRequestBtn",attrs:{type:"text"},on:{click:e.newReq}},[e._v("\n        新的申请\n      ")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.noneReq,expression:"noneReq"}]},[a("div",{attrs:{id:"picture"}},[e._l(e.srcArr,function(e){return a("div",{staticClass:"block"},[a("el-image",{staticStyle:{width:"300px",height:"320px"},attrs:{src:e}})],1)}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{"before-upload":e.beforeupload,action:"","list-type":"text"}},[a("el-button",{staticClass:"upBtn",attrs:{size:"small",type:"primary"}},[e._v("点击上传，最多只能上传5张图片")])],1)],2),e._v(" "),a("div",{attrs:{id:"text"}},[a("div",{attrs:{id:"textTitle"}},[e._v("申报理由")]),e._v(" "),a("el-input",{staticClass:"inputArea",attrs:{type:"textarea",rows:21,placeholder:"在此处请填写具体情况"},model:{value:e.textContent,callback:function(t){e.textContent=t},expression:"textContent"}})],1),e._v(" "),a("div",{attrs:{id:"submitBtn"}},[a("el-button",{attrs:{type:"success"},on:{click:e.submit}},[e._v("提    交")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.noneReq,expression:"!noneReq"}],attrs:{id:"myRequest"}},[a("div",{attrs:{id:"poorRefresh"}},[a("el-button",{attrs:{circle:"",type:"primary",icon:"el-icon-refresh",title:"刷新请求列表"},on:{click:e.refresh}})],1),e._v(" "),e._l(e.descriptionList,function(e,t){return a("descriptionItem",{key:t,attrs:{state:e.state,time:e.time,endtime:e.endtime,text:e.text,photo1:e.photo1,photo2:e.photo2,photo3:e.photo3,photo4:e.photo4,photo5:e.photo5}})})],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.proFinish,expression:"proFinish"}],attrs:{id:"finishReq"}},[a("div",{attrs:{id:"finishBtn"}},[a("el-button",{attrs:{type:"success",plain:""},on:{click:e.showGrade}},[e._v("问题已解决")])],1)]),e._v(" "),a("transition",{attrs:{name:"gradeAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.gradeBox,expression:"gradeBox"}],attrs:{id:"fightGrade"}},[a("span",[e._v("\n        请填写对负责人的评价：\n      ")]),e._v(" "),a("el-rate",{attrs:{colors:e.colors,"show-text":""},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}}),e._v(" "),a("div",{attrs:{id:"submitBtns"}},[a("el-button",{staticClass:"submitReqBtn",attrs:{type:"primary"},on:{click:e.submitGrade}},[e._v("提交")])],1)],1)])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"diffiBackImgContainer"}},[t("img",{attrs:{src:"static/img/backgroundImg.jpg"}})])}]};var I=a("VU/8")(_,A,!1,function(e){a("AfM+")},"data-v-6e4f0670",null).exports,D=a("BO1k"),F=a.n(D),k={name:"messageWall",props:{username:String},data:function(){return{personComment:"",allMessage:[],allMessageShow:!1}},methods:{submitPersonComment:function(){var e=this,t=this.personComment,a=this.username,i=new Date,s=i.getFullYear(),r=i.getMonth()+1,n=i.getDate();i=s.toString()+"-"+r.toString()+"-"+n.toString();var o=new URLSearchParams;o.append("content",t),o.append("username",a),o.append("time",i),this.axios.post("http://120.27.240.160:3000/insert",o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){0!=t.data?(e.$message({message:"留言成功!",type:"success"}),e.personComment="",e.refreshAllRequest()):e.$message({message:"留言失败!原因：禁止发表重复留言",type:"warning"})})},initMessageWall:function(){void 0!=this.intercalId&&clearInterval(this.intercalId)},openAllMessage:function(){this.allMessageShow=!0,this.refreshAllRequest()},refreshAllRequest:function(){var e=this;this.allMessage.length=0,this.axios.get("http://120.27.240.160:3000/usergetallmessage").then(function(t){var a=!0,i=!1,s=void 0;try{for(var r,n=F()(t.data);!(a=(r=n.next()).done);a=!0){var o=r.value;o.time=o.time.split("T")[0]}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}for(var l=0;l<t.data.length;l++)e.allMessage.push({username:t.data[l].username,time:t.data[l].time,content:t.data[l].content})})},closeAllMessageBox:function(){this.allMessageShow=!1}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"MessageWallContainer"}},[e._m(0),e._v(" "),e._m(1),e._v(" "),a("div",{attrs:{id:"messageWallContentContainer"}},[e._m(2),e._v(" "),a("div",{attrs:{id:"messageContainer"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.personComment,expression:"personComment"}],attrs:{id:"textAreaContent",placeholder:"请输入100字以内",autofocus:""},domProps:{value:e.personComment},on:{input:function(t){t.target.composing||(e.personComment=t.target.value)}}})]),e._v(" "),a("div",{attrs:{id:"messageSubmitContainer"},on:{click:e.submitPersonComment}},[a("img",{attrs:{src:"static/img/btn.png"}})])]),e._v(" "),a("div",{attrs:{id:"commentA"}},[e._v("\n  国家还未如此强大的年代，各前辈就有“来生再出生在中国的愿望”这样的感慨，如今我们更有理由赞美，中国是这世上最好的国家。\n  ")]),e._v(" "),e._m(3),e._v(" "),a("div",{attrs:{id:"commentC"}},[e._v("\n      青春扶贫一线闪光\n  ")]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),a("div",{attrs:{id:"seeMoreTextBtnContainer"}},[a("el-button",{attrs:{type:"text"},on:{click:e.openAllMessage}},[e._v("点击查看更多留言")])],1),e._v(" "),a("transition",{attrs:{name:"allMessageAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.allMessageShow,expression:"allMessageShow"}],attrs:{id:"allMessageContainer"}},[a("div",{attrs:{id:"closeAllMessageBtnContainer",title:"关闭所有留言"}},[a("el-button",{attrs:{id:"closeAllMessageBtn",circle:"",icon:"el-icon-close"},on:{click:e.closeAllMessageBox}})],1),e._v(" "),a("div",{attrs:{id:"allMessageTitle"}},[e._v("所有留言")]),e._v(" "),e._l(e.allMessage,function(t){return a("div",{key:t.content,staticClass:"singleMessageContainer"},[a("div",{staticClass:"messageNameAndTime"},[a("span",{staticClass:"messageName"},[e._v("\n          "+e._s(t.username)+"\n        ")]),e._v(" "),a("span",{staticClass:"messageTime"},[e._v("\n          "+e._s(t.time)+"\n        ")])]),e._v(" "),a("div",{staticClass:"messageContent"},[e._v("\n        "+e._s(t.content)+"\n      ")])])})],2)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"leftImg"}},[t("img",{attrs:{src:"static/img/wheatLeft.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"rightImg"}},[t("img",{attrs:{src:"static/img/wheatRight.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"messageWallTextContainer"}},[t("img",{attrs:{src:"static/img/mark.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentB"}},[t("span",[this._v("党建引领，产业富民。让更多贫困地区旧貌换新颜，祖国一片欣欣向荣的景象。")]),this._v(" "),t("br"),this._v("2020年是全面建成小康社会和十三五规划收官之年，一定会"),t("br"),this._v("画上一个圆满的句号，谱写中华人民的乐谱华章！\n  ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentD"}},[this._v("\n    在扶贫的路上我要有一分热，发一分光。"),t("br"),this._v("\n    让老百姓富起来也是我的心愿！\n  ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentE"}},[this._v("\n    吃水不忘挖井人，让我们不忘初心，牢记使命，\n    "),t("span",[this._v("永远跟党走！")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentF"}},[this._v("\n    脱贫攻坚加把劲,不破楼兰终不还!在全面建成小康社会的最后一程,"),t("span",[this._v("在中华民族伟大复兴的关键一步,坚持脱贫攻坚不放松!我们一定能如期完成脱贫攻坚历史性任务!")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentG"}},[this._v("\n    我国脱贫路上，一个也不能落下，"),t("span",[this._v("实现共同富裕，是人类历史上的伟大创举。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentH"}},[this._v("\n    又是一个具有历史意义的八年！伟大的中国人民勠力同心，攻坚克难，利用八年时间实现了整体脱贫，共同富裕，"),t("span",[this._v("这必将成为中国历史和世界历史上最伟大的胜利。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentI"}},[this._v("\n    脱贫攻坚是国家长远发展大局中的重要一环，"),t("span",[this._v("各部门通力协作的精神值得发扬光大！")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"commentJ"}},[this._v("\n    我自己家就是受益者，"),t("span",[this._v("脱贫攻坚必胜。")])])}]};var M={name:"normalUser",components:{diffi:I,messageWall:a("VU/8")(k,L,!1,function(e){a("zWM1")},"data-v-11e61d48",null).exports},props:{sizeForm:Array,center:Object},created:function(){},data:function(){return{centerShow:!0,diffiShow:!1,type:"",imgurl:"",keys:["用户名","密码","手机号码","性别"],needkeys:[{key:"姓名",value:""},{key:"身份证号",value:""},{key:"所属贫困县",value:""},{key:"建档立卡号",value:""},{key:"真实住址",value:""}],Arr:[],isPoor:!1,isCancel:!1,editAbled:["true","true","true","true","true","true","true","true","true"],map:{zoom:15,show:!0,dragging:!0},messageWallShow:!1,intercalId:void 0}},methods:{letCenterShow:function(){this.centerShow=!0,this.messageWallShow=!1,this.diffiShow=!1},warn:function(){this.$message({message:"请先在个人中心认证成为贫困户!",type:"warning"})},letMessageWallShow:function(){this.centerShow=!1,this.diffiShow=!1,this.messageWallShow=!0,this.$refs.messageWallChild.initMessageWall()},init:function(){var e=this;if(0==this.sizeForm[0])this.type="普通用户",this.imgurl="static/img/用户.png",this.$refs.diffiUp.style.opacity="50%",this.isPoor=!1,this.sizeForm.forEach(function(t,a){a<=4&&e.Arr.push(t)}),this.Arr.shift();else{this.type="认证贫困户",this.imgurl="static/img/农民.png",this.isPoor=!0,this.sizeForm.forEach(function(t,a){a<=4&&e.Arr.push(t)}),this.Arr.shift();for(var t=5;t<this.sizeForm.length-2;t++)this.needkeys[t-5].value=this.sizeForm[t];this.warn=function(){e.centerShow=!1,e.diffiShow=!0,e.messageWallShow=!1}}this.$refs.diffiChild.initReq()},writeForm:function(){this.isPoor=!0,this.isCancel=!0;for(var e=4;e<=8;e++)this.editAbled[e]=!1},edit:function(e){if(!1!==this.editAbled[e])if(0!=e){for(var t=0;t<4;t++)this.editAbled.splice(t,1,!0);this.editAbled.splice(e,1,!1)}else this.$message({message:"用户名不可更改!",type:"warning"});else this.editAbled.splice(e,1,!0)},cancel:function(){this.isPoor=!1,this.isCancel=!1;for(var e=4;e<=8;e++)this.editAbled[e]=!0},submit:function(){for(var e=this,t=[],a=0;a<4;a++){if(""==this.needkeys[a].value)return void this.$message({message:"信息必须填写完整!",type:"warning"});t.push(this.needkeys[a].value)}this.$notify.info({title:"消息",message:"信息校验中,请稍后"});var i=new URLSearchParams;i.append("name",this.needkeys[0].value),i.append("id",this.needkeys[1].value),i.append("jid",this.needkeys[3].value),i.append("belong",this.needkeys[2].value),i.append("position",this.needkeys[4].value),i.append("username",this.sizeForm[1]),this.axios.get("http://120.27.240.160:3000/getposition?address="+this.needkeys[4].value,{header:{"Content-Type":"text/html;charset=utf-8"}}).then(function(t){var a=t.data.lng,s=t.data.lat;i.append("longitude",a),i.append("latitude",s),e.axios.post("http://120.27.240.160:3000/tobepoor",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){setTimeout(function(){if(1==t.data){e.$notify({title:"成功",message:"贫困户认证成功！您可以提出困难申报！",type:"success"});for(var a=4;a<=7;a++)e.editAbled.splice(a,1,!0);e.isCancel=!1,e.imgurl="static/img/农民.png",e.type="认证贫困户",e.warn=function(){e.centerShow=!1,e.messageWallShow=!1,e.diffiShow=!0},e.axios.get("http://120.27.240.160:3000/login?username="+e.sizeForm[1]+"&passWord="+e.sizeForm[2]).then(function(t){e.$refs.diffiChild.needkeys.length=0,e.$refs.diffiChild.needkeys.push(1),e.$refs.diffiChild.needkeys.push(t.data[0].username),e.$refs.diffiChild.needkeys.push(t.data[0].passWord),e.$refs.diffiChild.needkeys.push(t.data[0].phone),e.$refs.diffiChild.needkeys.push(t.data[0].sexy),e.$refs.diffiChild.needkeys.push(t.data[0].name),e.$refs.diffiChild.needkeys.push(t.data[0].id),e.$refs.diffiChild.needkeys.push(t.data[0].belong),e.$refs.diffiChild.needkeys.push(t.data[0].jid),e.$refs.diffiChild.needkeys.push(t.data[0].position),e.$refs.diffiChild.needkeys.push(t.data[0].longitude),e.$refs.diffiChild.needkeys.push(t.data[0].latitude)})}else 0==t.data?e.$notify.error({title:"错误",message:"贫困户认证失败！请校验信息后再试"}):e.$notify.error({title:"错误",message:"贫困户认证失败！该卡号已被注册！"})},1e3)})})},submitChange:function(){for(var e=this,t=0;t<4;t++)this.editAbled.splice(t,1,!0);this.$notify.info({title:"消息",message:"信息录入中,请稍后"});var a=new URLSearchParams;a.append("passWord",this.Arr[1]),a.append("phone",this.Arr[2]),a.append("sexy",this.Arr[3]),a.append("username",this.Arr[0]),this.axios.post("http://120.27.240.160:3000/changeinfo",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){setTimeout(function(){e.$notify({title:"成功",message:"信息修改成功！",type:"success"})},800)})},backToMainMap:function(){var e=this;this.$confirm("返回地图后需要重新登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.replace("/mapshow")}).catch(function(){e.$message({type:"info",message:"取消返回"})})}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"nomalBody"}},[a("div",{attrs:{id:"topBar"}},[a("div",{staticClass:"selectOption",attrs:{id:"personCenter"},on:{click:e.letCenterShow}},[e._m(0),e._v(" "),a("span",[e._v("个人中心")])]),e._v(" "),a("div",{ref:"diffiUp",staticClass:"selectOption",attrs:{id:"diffi"},on:{click:e.warn}},[e._m(1),e._v("\n          困难上报\n        ")]),e._v(" "),a("div",{staticClass:"selectOption",attrs:{id:"talk"},on:{click:e.letMessageWallShow}},[e._m(2),e._v("\n          留言墙\n        ")]),e._v(" "),a("div",{staticClass:"selectOption",attrs:{id:"backToMainMap"},on:{click:e.backToMainMap}},[e._m(3),e._v("\n          返回地图\n        ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.centerShow,expression:"centerShow"}],attrs:{id:"CenterBody"}},[e._m(4),e._v(" "),a("div",{attrs:{id:"Container"}},[a("div",{attrs:{id:"Content"}},[a("div",{attrs:{id:"photo"}},[a("img",{attrs:{src:e.imgurl,id:"imgUser"}}),e._v(" "),a("div",{attrs:{id:"typeDiv"}},[e._v(e._s(e.type))])]),e._v(" "),a("div",{attrs:{id:"hasinfo"}},e._l(e.Arr,function(t,i){return a("div",{staticClass:"InfoLine"},[a("span",{staticClass:"leftSpan"},[e._v(e._s(e.keys[i]))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.Arr[i],expression:"Arr[index]"}],staticClass:"hasInfoIn",attrs:{disabled:e.editAbled[i]},domProps:{value:e.Arr[i]},on:{input:function(t){t.target.composing||e.$set(e.Arr,i,t.target.value)}}}),e._v(" "),a("el-button",{staticClass:"editBtn",attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.edit(i)}}})],1)}),0),e._v(" "),a("div"),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPoor&&!e.isCancel,expression:"!isPoor && !isCancel"}],attrs:{id:"indBtn"}},[a("el-button",{attrs:{type:"success"},on:{click:e.writeForm}},[e._v("申请成为认证贫困户")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPoor,expression:"isPoor "}],attrs:{id:"specialInfo"}},[e._v("贫困户专属信息")]),e._v(" "),a("div",{attrs:{id:"basicInfo"}},[e._v("基本信息")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPoor,expression:"isPoor"}],attrs:{id:"needInfo"}},e._l(e.needkeys,function(t,i){return a("div",[a("span",{staticClass:"spanToInput"},[e._v(e._s(t.key))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.needkeys[i].value,expression:"needkeys[index].value"}],staticClass:"needInfoInput",attrs:{disabled:e.editAbled[i+4]},domProps:{value:e.needkeys[i].value},on:{input:function(t){t.target.composing||e.$set(e.needkeys[i],"value",t.target.value)}}})])}),0),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isCancel,expression:"isCancel"}],attrs:{id:"cancel"}},[a("el-button",{staticClass:"cancellBtn",attrs:{type:"danger"},on:{click:e.cancel}},[e._v("取消申请")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.submit}},[e._v("提交申请")])],1)]),e._v(" "),a("div",{attrs:{id:"xgBtn"}},[a("el-button",{staticClass:"submitChangeOfPerson",attrs:{type:"primary"},on:{click:e.submitChange}},[e._v("提交修改")])],1)])]),e._v(" "),a("diffi",{directives:[{name:"show",rawName:"v-show",value:e.diffiShow,expression:"diffiShow"}],ref:"diffiChild",attrs:{username:e.Arr,needkeys:e.sizeForm}}),e._v(" "),a("messageWall",{directives:[{name:"show",rawName:"v-show",value:e.messageWallShow,expression:"messageWallShow"}],ref:"messageWallChild",attrs:{username:e.sizeForm[1]}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"icon1"}},[t("i",{staticClass:"iconfont"},[this._v("")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"icon3"}},[t("i",{staticClass:"iconfont"},[this._v("")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"icon2"}},[t("i",{staticClass:"iconfont"},[this._v("")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"icon4"}},[t("i",{staticClass:"iconfont"},[this._v("")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"backImgContainer"}},[t("img",{attrs:{src:"static/img/backgroundImg.jpg"}})])}]};var T={components:{noramlUser:a("VU/8")(M,O,!1,function(e){a("fHBs")},"data-v-8dc8820c",null).exports},props:{earseLoad:Function},beforeDestroy:function(){},mounted:function(){var e=this;setTimeout(function(){e.earseLoad()},500),function(e,t,a){var i={calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:!1,calibrateY:!0,invertX:!0,invertY:!0,limitX:!1,limitY:!1,scalarX:10,scalarY:10,frictionX:.1,frictionY:.1};function s(e,t){this.element=e,this.layers=e.getElementsByClassName("layer");var a={calibrateX:this.data(this.element,"calibrate-x"),calibrateY:this.data(this.element,"calibrate-y"),invertX:this.data(this.element,"invert-x"),invertY:this.data(this.element,"invert-y"),limitX:this.data(this.element,"limit-x"),limitY:this.data(this.element,"limit-y"),scalarX:this.data(this.element,"scalar-x"),scalarY:this.data(this.element,"scalar-y"),frictionX:this.data(this.element,"friction-x"),frictionY:this.data(this.element,"friction-y")};for(var s in a)null===a[s]&&delete a[s];this.extend(this,i,t,a),this.calibrationTimer=null,this.calibrationFlag=!0,this.enabled=!1,this.depths=[],this.raf=null,this.ox=0,this.oy=0,this.ow=0,this.oh=0,this.cx=0,this.cy=0,this.ix=0,this.iy=0,this.mx=0,this.my=0,this.vx=0,this.vy=0,this.onMouseMove=this.onMouseMove.bind(this),this.onDeviceOrientation=this.onDeviceOrientation.bind(this),this.onOrientationTimer=this.onOrientationTimer.bind(this),this.onCalibrationTimer=this.onCalibrationTimer.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.initialise()}s.prototype.extend=function(){if(arguments.length>1)for(var e=arguments[0],t=1,a=arguments.length;t<a;t++){var i=arguments[t];for(var s in i)e[s]=i[s]}},s.prototype.data=function(e,t){return this.deserialize(e.getAttribute("data-"+t))},s.prototype.deserialize=function(e){return"true"===e||"false"!==e&&("null"===e?null:!isNaN(parseFloat(e))&&isFinite(e)?parseFloat(e):e)},s.prototype.offset=function(e){for(var t=0,a=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,a+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:a,left:t}},s.prototype.camelCase=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},s.prototype.transformSupport=function(a){for(var i=t.createElement("div"),s=!1,r=null,n=!1,o=null,l=null,h=0,c=this.vendors.length;h<c;h++)if(null!==this.vendors[h]?(o=this.vendors[h][0]+"transform",l=this.vendors[h][1]+"Transform"):(o="transform",l="transform"),void 0!==i.style[l]){s=!0;break}switch(a){case"2D":n=s;break;case"3D":s&&(t.body.appendChild(i),i.style[l]="translate3d(1px,1px,1px)",n=void 0!==(r=e.getComputedStyle(i).getPropertyValue(o))&&r.length>0&&"none"!==r,t.body.removeChild(i))}return n},s.prototype.ww=null,s.prototype.wh=null,s.prototype.hw=null,s.prototype.hh=null,s.prototype.portrait=null,s.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|IEMobile)/),s.prototype.vendors=[null,["-webkit-","webkit"],["-moz-","Moz"],["-o-","O"],["-ms-","ms"]],s.prototype.motionSupport=void 0!==e.DeviceMotionEvent,s.prototype.orientationSupport=void 0!==e.DeviceOrientationEvent,s.prototype.orientationStatus=0,s.prototype.transform2DSupport=s.prototype.transformSupport("2D"),s.prototype.transform3DSupport=s.prototype.transformSupport("3D"),s.prototype.initialise=function(){this.transform3DSupport&&this.accelerate(this.element),"static"===e.getComputedStyle(this.element).getPropertyValue("position")&&(this.element.style.position="relative");for(var t=0,a=this.layers.length;t<a;t++){var i=this.layers[t];this.transform3DSupport&&this.accelerate(i),i.style.position=t?"absolute":"relative",i.style.display="block",i.style.height="100%",i.style.width="100%",i.style.left=0,i.style.top=0,this.depths.push(this.data(i,"depth")||0)}this.updateDimensions(),this.enable(),this.queueCalibration(this.calibrationDelay)},s.prototype.updateDimensions=function(){this.ox=this.offset(this.element).left,this.oy=this.offset(this.element).top,this.ow=this.element.offsetWidth,this.oh=this.element.offsetHeight,this.ww=e.innerWidth,this.wh=e.innerHeight,this.hw=this.ww/2,this.hh=this.wh/2},s.prototype.queueCalibration=function(e){clearTimeout(this.calibrationTimer),this.calibrationTimer=setTimeout(this.onCalibrationTimer,e)},s.prototype.enable=function(){this.enabled||(this.enabled=!0,this.orientationSupport?(this.portrait=null,e.addEventListener("deviceorientation",this.onDeviceOrientation),setTimeout(this.onOrientationTimer,this.supportDelay)):(this.cx=0,this.cy=0,this.portrait=!1,e.addEventListener("mousemove",this.onMouseMove)),e.addEventListener("resize",this.onWindowResize),this.raf=requestAnimationFrame(this.onAnimationFrame))},s.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.orientationSupport?e.removeEventListener("deviceorientation",this.onDeviceOrientation):e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("resize",this.onWindowResize),cancelAnimationFrame(this.raf))},s.prototype.calibrate=function(e,t){this.calibrateX=void 0===e?this.calibrateX:e,this.calibrateY=void 0===t?this.calibrateY:t},s.prototype.invert=function(e,t){this.invertX=void 0===e?this.invertX:e,this.invertY=void 0===t?this.invertY:t},s.prototype.friction=function(e,t){this.frictionX=void 0===e?this.frictionX:e,this.frictionY=void 0===t?this.frictionY:t},s.prototype.scalar=function(e,t){this.scalarX=void 0===e?this.scalarX:e,this.scalarY=void 0===t?this.scalarY:t},s.prototype.limit=function(e,t){this.limitX=void 0===e?this.limitX:e,this.limitY=void 0===t?this.limitY:t},s.prototype.clamp=function(e,t,a){return e=Math.max(e,t),e=Math.min(e,a)},s.prototype.css=function(e,t,a){for(var i=null,s=0,r=this.vendors.length;s<r;s++)if(i=null!==this.vendors[s]?this.camelCase(this.vendors[s][1]+"-"+t):t,void 0!==e.style[i]){e.style[i]=a;break}},s.prototype.accelerate=function(e){this.css(e,"transform","translate3d(0,0,0)"),this.css(e,"transform-style","preserve-3d"),this.css(e,"backface-visibility","hidden")},s.prototype.setPosition=function(e,t,a){t+="%",a+="%",this.transform3DSupport?this.css(e,"transform","translate3d("+t+","+a+",0)"):this.transform2DSupport?this.css(e,"transform","translate("+t+","+a+")"):(e.style.left=t,e.style.top=a)},s.prototype.onOrientationTimer=function(e){this.orientationSupport&&0===this.orientationStatus&&(this.disable(),this.orientationSupport=!1,this.enable())},s.prototype.onCalibrationTimer=function(e){this.calibrationFlag=!0},s.prototype.onWindowResize=function(e){this.updateDimensions()},s.prototype.onAnimationFrame=function(){var e=this.ix-this.cx,t=this.iy-this.cy;(Math.abs(e)>this.calibrationThreshold||Math.abs(t)>this.calibrationThreshold)&&this.queueCalibration(0),this.portrait?(this.mx=(this.calibrateX?t:this.iy)*this.scalarX,this.my=(this.calibrateY?e:this.ix)*this.scalarY):(this.mx=(this.calibrateX?e:this.ix)*this.scalarX,this.my=(this.calibrateY?t:this.iy)*this.scalarY),isNaN(parseFloat(this.limitX))||(this.mx=this.clamp(this.mx,-this.limitX,this.limitX)),isNaN(parseFloat(this.limitY))||(this.my=this.clamp(this.my,-this.limitY,this.limitY)),this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY;for(var a=0,i=this.layers.length;a<i;a++){var s=this.layers[a],r=this.depths[a],n=this.vx*r*(this.invertX?-1:1),o=this.vy*r*(this.invertY?-1:1);this.setPosition(s,n,o)}this.raf=requestAnimationFrame(this.onAnimationFrame)},s.prototype.onDeviceOrientation=function(e){if(!this.desktop&&null!==e.beta&&null!==e.gamma){this.orientationStatus=1;var t=(e.beta||0)/30,a=(e.gamma||0)/30,i=this.wh>this.ww;this.portrait!==i&&(this.portrait=i,this.calibrationFlag=!0),this.calibrationFlag&&(this.calibrationFlag=!1,this.cx=t,this.cy=a),this.ix=t,this.iy=a}},s.prototype.onMouseMove=function(e){this.ix=(e.pageX-this.hw)/this.hw,this.iy=(e.pageY-this.hh)/this.hh},e.Parallax=s}(window,document),function(){for(var e=0,t=["ms","moz","webkit","o"],a=0;a<t.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[t[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[a]+"CancelAnimationFrame"]||window[t[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,a){var i=(new Date).getTime(),s=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+s)},s);return e=i+s,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var t=document.getElementById("scene"),a=(new Parallax(t),this);$(".login").on("submit",function(e){e.preventDefault();var t=$(this),i=t.find("button > .state");if(t.addClass("loading"),i.html("验证中"),""===a.radio)return a.$message.error("登陆失败!请选择您的用户类型!"),void setTimeout(function(){t.removeClass("ok loading"),t.removeClass("warn"),i.html("登陆系统")},500);"1"==a.radio?a.axios.get("http://120.27.240.160:3000/login?username="+a.username+"&passWord="+a.passWord).then(function(e){e.data.length>0?(t.addClass("ok"),i.html("欢迎进入系统!"),setTimeout(function(){0==e.data[0].type?(a.$route.meta.normal=!0,a.normalShow=!0,a.passArr.push(0),a.passArr.push(e.data[0].username),a.passArr.push(e.data[0].passWord),a.passArr.push(e.data[0].phone),a.passArr.push(e.data[0].sexy),a.$refs.userChild.init()):(a.$route.meta.normal=!0,a.normalShow=!0,a.passArr.push(1),a.passArr.push(e.data[0].username),a.passArr.push(e.data[0].passWord),a.passArr.push(e.data[0].phone),a.passArr.push(e.data[0].sexy),a.passArr.push(e.data[0].name),a.passArr.push(e.data[0].id),a.passArr.push(e.data[0].belong),a.passArr.push(e.data[0].jid),a.passArr.push(e.data[0].position),a.passArr.push(e.data[0].longitude),a.passArr.push(e.data[0].latitude),a.$refs.userChild.init()),a.isLoadShow=!1,a.$route.meta.login=!1},2e3)):(t.addClass("warn"),i.html("账号或密码有误,请重新登录！"),setTimeout(function(){t.removeClass("ok loading"),t.removeClass("warn"),i.html("登陆系统")},1e3))}):a.axios.get("http://120.27.240.160:3000/admin?username="+a.username+"&passWord="+a.passWord).then(function(e){e.data.length>0?(t.addClass("ok"),i.html("管理员！欢迎进入系统!"),setTimeout(function(){a.$router.replace({name:"admin",params:{adminArea:e.data[0].adminarea}}),a.isLoadShow=!1},2e3)):(t.addClass("warn"),i.html("账号或密码有误,请重新登录！"),setTimeout(function(){t.removeClass("ok loading"),t.removeClass("warn"),i.html("登陆系统")},1e3))})})},methods:{backMap:function(){this.$router.replace("/mapshow")},jump:function(){this.$router.replace({path:"/mapshow"})},signUp:function(){this.signUpShow=!0},cancelSign:function(){this.signUpShow=!1},submitData:function(){var e=this,t=new URLSearchParams;t.append("username",this.sizeForm.username),t.append("passWord",this.sizeForm.passWord),t.append("phonenumber",this.sizeForm.phonenumber),t.append("sexy",this.sizeForm.sexy),this.axios.post("http://120.27.240.160:3000/sign",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){0==t.data?(e.$message({message:"用户名重复!请重新注册!",type:"warning"}),e.sizeForm.username="",e.sizeForm.passWord="",e.sizeForm.phonenumber="",e.sizeForm.sexy=""):(e.$message({message:"成功创建账号!",type:"success"}),e.sizeForm.username="",e.sizeForm.passWord="",e.sizeForm.phonenumber="",e.sizeForm.sexy="",e.signUpShow=!1)})}},data:function(){return{radio:"",isLoadShow:!0,username:"",passWord:"",normalShow:!1,poorShow:!1,adminShow:!1,signUpShow:!1,sizeForm:{type:"",username:"",passWord:"",phonenumber:"",sexy:""},passArr:[]}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"register-bodyer"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoadShow,expression:"isLoadShow"}],attrs:{id:"backBtn"}},[a("el-button",{staticClass:"el-button",attrs:{type:"success",icon:"el-icon-back"},on:{click:e.backMap}},[e._v("返回")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoadShow,expression:"isLoadShow"}],staticClass:"stars"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoadShow,expression:"isLoadShow"}],staticClass:"twinkling"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoadShow,expression:"isLoadShow"}],staticClass:"wrapper"},[e._m(0)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoadShow,expression:"isLoadShow"}],attrs:{id:"chooseUserTypeContainer"}},[a("el-radio",{staticClass:"radioInRegister",attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("用户")]),e._v(" "),a("el-radio",{staticClass:"radioInRegister",attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("管理员")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoadShow,expression:"isLoadShow"}],staticClass:"wrapper2"},[a("form",{staticClass:"login"},[a("p",{staticClass:"title"},[e._v("防返贫系统登录界面")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"用户名",autofocus:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("i",{staticClass:"fa fa-user"}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.passWord,expression:"passWord"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.passWord},on:{input:function(t){t.target.composing||(e.passWord=t.target.value)}}}),e._v(" "),a("i",{staticClass:"fa fa-key"}),e._v(" "),a("a",{attrs:{href:"#"},on:{click:e.signUp}},[e._v("还没有账户?点我注册")]),e._v(" "),e._m(1)])]),e._v(" "),a("transition",{attrs:{name:"signAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.signUpShow&&e.isLoadShow,expression:"signUpShow && isLoadShow"}],attrs:{id:"signForm"}},[a("div",{attrs:{id:"formTitle"}},[e._v("注册\n        "),a("div",{attrs:{id:"titleSpan"}})]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.sizeForm.username,expression:"sizeForm.username"}],attrs:{id:"username",placeholder:"用户名",autocomplete:"off"},domProps:{value:e.sizeForm.username},on:{input:function(t){t.target.composing||e.$set(e.sizeForm,"username",t.target.value)}}}),e._v(" "),a("div",{attrs:{id:"border1"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.sizeForm.passWord,expression:"sizeForm.passWord"}],attrs:{id:"passWord",placeholder:"密码",autocomplete:"off"},domProps:{value:e.sizeForm.passWord},on:{input:function(t){t.target.composing||e.$set(e.sizeForm,"passWord",t.target.value)}}}),e._v(" "),a("div",{attrs:{id:"border2"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.sizeForm.phonenumber,expression:"sizeForm.phonenumber"}],attrs:{id:"phoneNumber",placeholder:"手机号码",autocomplete:"off"},domProps:{value:e.sizeForm.phonenumber},on:{input:function(t){t.target.composing||e.$set(e.sizeForm,"phonenumber",t.target.value)}}}),e._v(" "),a("div",{attrs:{id:"border3"}}),e._v(" "),a("div",{attrs:{id:"sexy"}},[a("el-radio",{attrs:{label:"男"},model:{value:e.sizeForm.sexy,callback:function(t){e.$set(e.sizeForm,"sexy",t)},expression:"sizeForm.sexy"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:e.sizeForm.sexy,callback:function(t){e.$set(e.sizeForm,"sexy",t)},expression:"sizeForm.sexy"}},[e._v("女")])],1),e._v(" "),a("div",{attrs:{id:"btns"}},[a("button",{attrs:{id:"btn1"},on:{click:e.submitData}},[e._v("提交")]),e._v(" "),a("button",{attrs:{id:"btn2"},on:{click:e.cancelSign}},[e._v("取消")])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoadShow,expression:"!(isLoadShow)"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.normalShow,expression:"normalShow"}]},[a("noramlUser",{ref:"userChild",attrs:{sizeForm:e.passArr,center:{lng:e.passArr[10],lat:e.passArr[11]}}})],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"scene",attrs:{id:"scene"}},[t("li",{staticClass:"layer",attrs:{"data-depth":"0.00"}}),this._v(" "),t("li",{staticClass:"layer",attrs:{"data-depth":"0.30"}},[t("a",{attrs:{href:"#0"}},[this._v("防返贫系统")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",[t("i",{staticClass:"spinner"}),this._v(" "),t("span",{staticClass:"state"},[this._v("登陆系统")])])}]};var N=a("VU/8")(T,P,!1,function(e){a("H0DG")},null,null).exports,B=a("Zrlr"),E=a.n(B),z=a("wxAW"),R=a.n(z),V={data:function(){return{whichBtn:!0,ing:!1}},watch:{"itemData.state":{handler:function(e,t){"处理中"==e?(this.whichBtn=!1,this.ing=!1):"已处理"==e&&(this.whichBtn=!0)}}},name:"detailedInfo",props:{itemData:Object,index:Number,openDetails:Function,openHandle:Function},mounted:function(){"未处理"==this.itemData.state?(this.whichBtn=!1,this.ing=!0):"处理中"==this.itemData.state&&(this.whichBtn=!1,this.ing=!1)},methods:{changeBtn:function(){this.whichBtn=!0},hasHander:function(){this.$message({message:"负责人火速处理中!",type:"warning"})},fineshed:function(){this.$message({message:"已经完成处理!",type:"success"})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"listli"}},[a("div",{attrs:{id:"itemIndex"}},[e._v(e._s(e.index+1))]),e._v(" "),a("div",{attrs:{id:"itemTitle"}},[a("div",{attrs:{id:"itemName"}},[e._v(e._s(e.itemData.name))]),e._v(" "),a("div",{attrs:{id:"itemState"}},[e._v(e._s(e.itemData.state))]),e._v(" "),a("div",{attrs:{id:"details"},on:{click:function(t){return e.openDetails(e.index)}}},[e._v("详情")])]),e._v(" "),a("div",[a("div",{staticClass:"time",attrs:{id:"contentTime"}},[e._v(e._s("报告时间 "+e.itemData.time))]),e._v(" "),a("div",{staticClass:"time",attrs:{id:"contentEndtime"}},[e._v(e._s("处理时间 "+e.itemData.endtime))]),e._v(" "),a("div",{attrs:{id:"contentEndPosition"}},[e._v(e._s("申请地址 "+e.itemData.position))])]),e._v(" "),a("div",{attrs:{id:"itemBtn"}},[e.whichBtn?a("el-button",{staticClass:"reqBtn1",attrs:{type:"success",size:"mini"}}):e.ing?a("el-button",{staticClass:"reqBtn2",attrs:{type:"danger",size:"mini"}}):a("el-button",{staticClass:"reqBtn3",attrs:{type:"warning"}}),e._v(" "),e.whichBtn?a("div",{staticClass:"hovers",attrs:{id:"itemText1"},on:{click:e.fineshed}},[e._v("已处理")]):e.ing?a("div",{staticClass:"hovers",attrs:{id:"itemText2"},on:{click:function(t){return e.openHandle(e.index)}}},[e._v("去处理")]):a("div",{staticClass:"hovers",attrs:{id:"itemText3"},on:{click:e.hasHander}},[e._v("处理中")])],1)])},staticRenderFns:[]};var G=a("VU/8")(V,q,!1,function(e){a("zOve")},"data-v-03d99d92",null).exports,Y={name:"functionList",components:{},props:{adminChartShow:Function,analysis3D:Function,openPersonManage:Function,openMessageAdmin:Function},methods:{backMap:function(){var e=this;this.$confirm("返回地图后需要重新登陆,确定返回吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.replace("/mapshow")})},showChart:function(){this.adminChartShow(),ce.$emit("showChart")}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"functionContainerf"}},[e._m(0),e._v(" "),a("div",{attrs:{id:"titleContent"}},[e._v("防返贫服务系统管理平台")]),e._v(" "),a("div",{attrs:{id:"bottomBorder"}}),e._v(" "),a("div",{attrs:{id:"backBtn",title:"返回地图"}},[a("el-button",{staticClass:"backMapBtn",attrs:{icon:"el-icon-s-fold",circle:""},on:{click:e.backMap}})],1),e._v(" "),a("div",{attrs:{id:"functionContainer"}},[a("div",{attrs:{id:"mathChart"}},[a("div",{attrs:{id:"icon1"},on:{click:e.showChart}},[a("i",{staticClass:"iconfont",attrs:{id:"adminIconfont1"}},[e._v("")])]),e._v(" "),a("div",{attrs:{id:"description1"}},[e._v("数据图表")])]),e._v(" "),a("div",{attrs:{id:"threeDAnalyse"}},[a("div",{attrs:{id:"icon2"},on:{click:e.analysis3D}},[a("i",{staticClass:"iconfont",attrs:{id:"adminIconfont2"}},[e._v("")])]),e._v(" "),a("div",{attrs:{id:"description2"}},[e._v("三维分析")])]),e._v(" "),a("div",{attrs:{id:"wbAnalyse"}},[a("div",{attrs:{id:"icon3"},on:{click:e.openMessageAdmin}},[a("i",{staticClass:"iconfont",attrs:{id:"adminIconfont3"}},[e._v("")])]),e._v(" "),a("div",{attrs:{id:"description3"}},[e._v("舆情分析")])]),e._v(" "),a("div",{attrs:{id:"peopleManage"}},[a("div",{attrs:{id:"icon4"},on:{click:e.openPersonManage}},[a("i",{staticClass:"iconfont",attrs:{id:"adminIconfont4"}},[e._v("")])]),e._v(" "),a("div",{attrs:{id:"description4"}},[e._v("人员管理")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"spinner-box"},[t("div",{staticClass:"blue-orbit leo"}),this._v(" "),t("div",{staticClass:"green-orbit leo"}),this._v(" "),t("div",{staticClass:"red-orbit leo"}),this._v(" "),t("div",{staticClass:"white-orbit w1 leo"}),t("div",{staticClass:"white-orbit w2 leo"}),t("div",{staticClass:"white-orbit w3 leo"})])}]};var W=a("VU/8")(Y,H,!1,function(e){a("ncYI")},"data-v-6f0689a0",null).exports,U={name:"adminCharts",props:{closeCharts:Function,adminArea:String},created:function(){var e=this;ce.$on("showChart",function(){e.refreshchinaLineChart()})},mounted:function(){var e=this,t=30,a=function(a){e.axios.get("http://120.27.240.160:3000/getpoorbyprovince?province="+a.label).then(function(e){var i=[],s=!0,r=!1,n=void 0;try{for(var o,l=F()(e.data);!(s=(o=l.next()).done);s=!0){var h=o.value;i.push({value:t,label:h.name}),t++}}catch(e){r=!0,n=e}finally{try{!s&&l.return&&l.return()}finally{if(r)throw n}}a.children=i})},i=!0,s=!1,r=void 0;try{for(var n,o=F()(this.selectOption);!(i=(n=o.next()).done);i=!0){a(n.value)}}catch(e){s=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw r}}},watch:{whichKind:function(e){1==e?this.refreshchinaLineChart():2==e?this.refreshShan():this.refreshZhuChart()}},methods:{refreshchinaLineChart:function(){var e=this;this.axios.get("http://120.27.240.160:3000/getreqnumbydate").then(function(t){e.chinaLineChart=e.$echarts.init(e.$refs.chinaLineChart),e.chinaLineChartOption.series[0].data=t.data,e.chinaLineChart.setOption(e.chinaLineChartOption)})},refreshShan:function(){var e=this;this.shanOption.series[0].data.length=0,this.axios.get("http://120.27.240.160:3000/getreqnumbybelong").then(function(t){var a=!0,i=!1,s=void 0;try{for(var r,n=F()(t.data);!(a=(r=n.next()).done);a=!0){var o=r.value;e.shanOption.series[0].data.push({name:o.belong,value:o.num})}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}e.shanChart=e.$echarts.init(e.$refs.shanChart),e.shanChart.setOption(e.shanOption)})},refreshZhuChart:function(){var e=this;this.ZhuChartOption.xAxis[0].data.length=0,this.ZhuChartOption.xAxis[1].data.length=0,this.ZhuChartOption.series[0].data.length=0,this.ZhuChartOption.series[1].data.length=0,this.axios.get("http://120.27.240.160:3000/getreqnumbyname").then(function(t){var a=!0,i=!1,s=void 0;try{for(var r,n=F()(t.data);!(a=(r=n.next()).done);a=!0){var o=r.value;e.ZhuChartOption.xAxis[0].data.push(o.belong),e.ZhuChartOption.series[0].data.push(o.num)}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}e.axios.get("http://120.27.240.160:3000/getreqnumbynamestate").then(function(t){var a=!0,i=!1,s=void 0;try{for(var r,n=F()(t.data);!(a=(r=n.next()).done);a=!0){var o=r.value;e.ZhuChartOption.xAxis[1].data.push(o.belong),e.ZhuChartOption.series[1].data.push(o.num)}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}e.zhuChart=e.$echarts.init(e.$refs.zhuChart),e.zhuChart.setOption(e.ZhuChartOption)})})},changeToOther:function(){this.whichKind++},changeToChina:function(){this.whichKind--},changeArea1:function(){var e=this;this.whichArea=1,this.color[0]="#80bdff",this.color[1]="rgb(91,85,230)",this.color[2]="rgb(91,85,230)",document.getElementById("chinaBtnContainer").style.color="black",document.getElementById("countryBtnContainer").style.color="white",document.getElementById("chargeBtnContainer").style.color="white",this.axios.get("http://120.27.240.160:3000/getreqnumbydate").then(function(t){e.chinaLineChart=e.$echarts.init(e.$refs.chinaLineChart),e.chinaLineChartOption.series[0].data=t.data,e.chinaLineChart.setOption(e.chinaLineChartOption)})},changeArea2:function(){var e=this;this.whichArea=2,this.color[1]="#80bdff",this.color[0]="rgb(91,85,230)",this.color[2]="rgb(91,85,230)",document.getElementById("chinaBtnContainer").style.color="white",document.getElementById("countryBtnContainer").style.color="black",document.getElementById("chargeBtnContainer").style.color="white","全国"==this.adminArea?this.getreqnumbypoornameUrl="http://120.27.240.160:3000/getreqnumbypoorname?name=秭归县":this.getreqnumbypoornameUrl="http://120.27.240.160:3000/getreqnumbypoorname?name="+this.adminArea,this.axios.get(this.getreqnumbypoornameUrl).then(function(t){e.totalNum=t.data[0],e.waitNum=t.data[1],e.peopleNum=t.data[2]}),this.axios.get("http://120.27.240.160:3000/getpoorjsonbyname?name="+this.adminArea).then(function(t){e.$echarts.registerMap("zigui",t.data),e.$echarts.init(e.$refs.map).setOption({tooltip:{trigger:"item",textStyle:{fontSize:"12",color:"black"},backgroundColor:"rgba(50,50,50,0)",padding:0,enterable:!0,position:"inside",formatter:function(e){return'<div class="mapStyle">\n\t\t\t\t\t\t<div>'+e.name+"</div>\n\t\t\t\t\t\t</div>"}},geo:[{show:!0,map:"zigui",aspectScale:1,zoom:1.15,label:{normal:{show:!1},emphasis:{show:!0}},visualMap:[{show:!0,type:"piecewise",itemWidth:20,itemHeight:40,calculable:!0,categories:["4A","3A","其他"],textStyle:{color:"#fff"},inRange:{symbol:"path://M512 144.896c-141.312 0-256.512 115.2-256.512 256.512 0 178.688 164.864 372.224 227.328 445.44 9.728 11.776 15.872 18.944 18.432 22.528 2.56 3.584 6.656 5.632 10.752 5.632 3.584 0 7.168-1.536 9.728-4.096l1.024-1.024 0.512-1.024c2.048-3.072 7.68-9.728 18.944-23.04 61.952-73.728 226.816-268.8 226.816-444.416C768.512 260.096 653.312 144.896 512 144.896z m0 352.256c-52.736 0-95.744-43.008-95.744-95.744s43.008-95.744 95.744-95.744 95.744 43.008 95.744 95.744-43.008 95.744-95.744 95.744z",color:["#D65769","#D9C124","#32F597"]},dimension:[[{name:"4A"}]],seriesIndex:3}],roam:!1,itemStyle:{normal:{areaColor:"#00FFFF",borderWidth:4,shadowColor:"#0098d9",borderColor:"#00FFFF",shadowBlur:12,shadowOffsetX:0,shadowOffsetY:12}}}],series:[{name:"申请数量",type:"map",mapType:"zigui",aspectScale:1,zoom:1.15,label:{normal:{show:!0,textStyle:{color:"#fff",fontSize:"12"}},emphasis:{show:!1,textStyle:{fontSize:"12"}}},itemStyle:{normal:{areaColor:"#0371a0",borderColor:"#00FFFF"}},animation:!1,data:[{name:"伍家岗区",value:351}]}]})})},changeArea3:function(){var e=this;this.chargePeopleOption.xAxis[0].data.length=0,this.chargePeopleOption.series[0].data.length=0,this.chargePeopleOption.series[1].data.length=0,this.whichArea=3,this.color[2]="#80bdff",this.color[1]="rgb(91,85,230)",this.color[0]="rgb(91,85,230)",document.getElementById("chinaBtnContainer").style.color="white",document.getElementById("countryBtnContainer").style.color="white",document.getElementById("chargeBtnContainer").style.color="black","全国"==this.adminArea?this.getallchargepeoplesUrl="http://120.27.240.160:3000/getallchargepeoples":this.getallchargepeoplesUrl="http://120.27.240.160:3000/getpartchargepeoples?chargearea="+this.adminArea,this.axios.get(this.getallchargepeoplesUrl).then(function(t){var a=!0,i=!1,s=void 0;try{for(var r,n=F()(t.data);!(a=(r=n.next()).done);a=!0){var o=r.value;e.chargePeopleOption.xAxis[0].data.push(o.name),e.chargePeopleOption.series[0].data.push(o.num),e.chargePeopleOption.series[1].data.push(o.grade)}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}e.chargePeopleChart=e.$echarts.init(e.$refs.chargePeopleChart),e.chargePeopleChart.setOption(e.chargePeopleOption)})},handleChange:function(e){var t=this,a=!0,i=!1,s=void 0;try{for(var r,n=F()(this.selectOption[e[0]-2].children);!(a=(r=n.next()).done);a=!0){var o=r.value;o.value==e[1]&&(this.axios.get("http://120.27.240.160:3000/getreqnumbypoorname?name="+o.label).then(function(e){t.totalNum=e.data[0],t.waitNum=e.data[1],t.peopleNum=e.data[2]}),this.axios.get("http://120.27.240.160:3000/getpoorjsonbyname?name="+o.label).then(function(e){t.$echarts.registerMap("zigui",e.data),t.$echarts.init(t.$refs.map).setOption({tooltip:{trigger:"item",textStyle:{fontSize:"12",color:"black"},backgroundColor:"rgba(50,50,50,0)",padding:0,enterable:!0,position:"inside",formatter:function(e){return'<div class="mapStyle">\n\t\t\t\t\t\t<div>'+e.name+"</div>\n\t\t\t\t\t\t</div>"}},geo:[{show:!0,map:"zigui",aspectScale:1,zoom:1.15,label:{normal:{show:!1},emphasis:{show:!0}},visualMap:[{show:!0,type:"piecewise",itemWidth:20,itemHeight:40,calculable:!0,categories:["4A","3A","其他"],textStyle:{color:"#fff"},inRange:{symbol:"path://M512 144.896c-141.312 0-256.512 115.2-256.512 256.512 0 178.688 164.864 372.224 227.328 445.44 9.728 11.776 15.872 18.944 18.432 22.528 2.56 3.584 6.656 5.632 10.752 5.632 3.584 0 7.168-1.536 9.728-4.096l1.024-1.024 0.512-1.024c2.048-3.072 7.68-9.728 18.944-23.04 61.952-73.728 226.816-268.8 226.816-444.416C768.512 260.096 653.312 144.896 512 144.896z m0 352.256c-52.736 0-95.744-43.008-95.744-95.744s43.008-95.744 95.744-95.744 95.744 43.008 95.744 95.744-43.008 95.744-95.744 95.744z",color:["#D65769","#D9C124","#32F597"]},dimension:[[{name:"4A"}]],seriesIndex:3}],roam:!1,itemStyle:{normal:{areaColor:"#00FFFF",borderWidth:4,shadowColor:"#0098d9",borderColor:"#00FFFF",shadowBlur:12,shadowOffsetX:0,shadowOffsetY:12}}}],series:[{name:"申请数量",type:"map",mapType:"zigui",aspectScale:1,zoom:1.15,label:{normal:{show:!0,textStyle:{color:"#fff",fontSize:"12"}},emphasis:{show:!1,textStyle:{fontSize:"12"}}},itemStyle:{normal:{areaColor:"#0371a0",borderColor:"#00FFFF"}},animation:!1,data:[{name:"伍家岗区",value:351}]}]})}))}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}}},data:function(){return{whichKind:1,whichArea:1,color:["#80bdff","rgb(91,85,230)","rgb(91,85,230)"],totalNum:"",waitNum:"",peopleNum:"",selectValue:"",chinaLineChartOption:{tooltip:{trigger:"axis",position:function(e){return[e[0],"10%"]}},title:{left:"center",text:"请求数量变化折线图",textStyle:{color:"white"}},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:function(){var e=[],t=new Date(2021,6,1),a=new Date(2021,9,16);for(e.push(t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate());t<a;)t.setDate(t.getDate()+1),e.push(t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate());return e}()},yAxis:{type:"value",boundaryGap:[0,"100%"]},dataZoom:[{start:0,end:10}],series:[{name:"请求数量",icona:"el-icon-arrow-right",type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(255, 70, 131)"},areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])},data:[]}]},shanOption:{title:{text:"系统注册贫困人口分布",left:"center",textStyle:{color:"white"}},legend:{left:"left",textStyle:{color:"white"}},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},series:[{name:"面积模式",type:"pie",radius:[50,250],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:[]}]},ZhuChartOption:{title:{left:"center",textStyle:{color:"white"},text:"请求数量相关图表"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:[{name:"总请求数量",textStyle:{color:"white"}},{name:"未处理请求数量",textStyle:{color:"white"}}],top:"bottom"},tooltip:{},xAxis:[{type:"category",gridIndex:0,data:[]},{type:"category",gridIndex:1,data:[]}],yAxis:[{gridIndex:0},{gridIndex:1}],grid:[{bottom:"55%"},{top:"55%"}],series:[{type:"bar",seriesLayoutBy:"row",data:[],xAxisIndex:0,yAxisIndex:0,name:"总请求数量"},{type:"bar",seriesLayoutBy:"row",data:[],xAxisIndex:1,yAxisIndex:1,name:"未处理请求数量"}]},chargePeopleOption:{title:{text:"负责人处理申请数和评价情况",left:"center",textStyle:{color:"white"}},tooltip:{trigger:"axis"},legend:{data:["处理总数","评价情况"],top:"bottom",textStyle:{color:"white"}},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"处理总数",type:"bar",data:[],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"评价情况",type:"bar",data:[],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]},selectOption:[{value:2,label:"安徽省",children:[]},{value:3,label:"山西省",children:[]},{value:4,label:"河北省",children:[]},{value:5,label:"辽宁省",children:[]},{value:6,label:"吉林省",children:[]},{value:7,label:"黑龙江省",children:[]},{value:8,label:"江苏省",children:[]},{value:9,label:"福建省",children:[]},{value:10,label:"江西省",children:[]},{value:11,label:"河南省",children:[]},{value:12,label:"湖北省",children:[]},{value:13,label:"湖南省",children:[]},{value:14,label:"广东省",children:[]},{value:15,label:"海南省",children:[]},{value:16,label:"四川省",children:[]},{value:17,label:"贵州省",children:[]},{value:18,label:"云南省",children:[]},{value:19,label:"陕西省",children:[]},{value:20,label:"甘肃省",children:[]},{value:21,label:"青海省",children:[]},{value:22,label:"上海市",children:[]},{value:23,label:"天津市",children:[]},{value:24,label:"重庆市",children:[]},{value:25,label:"内蒙古自治区",children:[]},{value:26,label:"广西壮族自治区",children:[]},{value:27,label:"西藏自治区",children:[]},{value:28,label:"宁夏回族自治区",children:[]},{value:29,label:"新疆维吾尔自治区",children:[]}]}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"chartsContainer"}},[a("div",{attrs:{id:"chartTitle"}},[a("div",{style:{backgroundColor:e.color[0]},attrs:{id:"chinaBtnContainer",title:"全国尺度下的图表"},on:{click:e.changeArea1}},[e._v("\n      全国尺度图表\n    ")]),e._v(" "),a("div",{style:{backgroundColor:e.color[1]},attrs:{id:"countryBtnContainer",title:"贫困县尺度下的图表"},on:{click:e.changeArea2}},[e._v("\n      贫困县请求数量一览\n    ")]),e._v(" "),a("div",{style:{backgroundColor:e.color[2]},attrs:{id:"chargeBtnContainer",title:"负责人评分相关图表"},on:{click:e.changeArea3}},[e._v("\n      负责人评价图表\n    ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.whichArea,expression:"whichArea==1"}],attrs:{id:"chinaChartContainer"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:3!=e.whichKind,expression:"whichKind!=3"}],attrs:{id:"chageBtnContainer"},on:{click:e.changeToOther}},[a("el-button",{staticClass:"changeBtn",attrs:{icon:"el-icon-arrow-right"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1!=e.whichKind,expression:"whichKind!=1"}],attrs:{id:"chageBtnContainer2"},on:{click:e.changeToChina}},[a("el-button",{staticClass:"changeBtn2",attrs:{icon:"el-icon-arrow-left"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.whichKind,expression:"whichKind==1"}],ref:"chinaLineChart",attrs:{id:"chinaLineChartContainer"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.whichKind,expression:"whichKind==2"}],attrs:{id:"otherChartsContainer"}},[a("div",{ref:"shanChart",attrs:{id:"shanChart"}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.whichKind,expression:"whichKind==3"}],ref:"zhuChart",attrs:{id:"zhuChartContainer"}}),e._v(" "),a("div")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.whichArea,expression:"whichArea==2"}],attrs:{id:"totalNum"}},[a("div",{attrs:{id:"totalNumTitle"}},[e._v("请求总数量")]),e._v("\n    "+e._s(e.totalNum)+"\n  ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.whichArea,expression:"whichArea==2"}],attrs:{id:"waitNum"}},[a("div",{attrs:{id:"waitNumTitle"}},[e._v("待处理请求数量")]),e._v("\n    "+e._s(e.waitNum)+"\n  ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.whichArea,expression:"whichArea==2"}],attrs:{id:"peopleNum"}},[a("div",{attrs:{id:"peopleNumTitle"}},[e._v("系统注册贫困户")]),e._v("\n    "+e._s(e.peopleNum)+"\n  ")]),e._v(" "),a("div"),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.whichArea&&"全国"==e.adminArea,expression:"whichArea==2 && adminArea=='全国'"}],attrs:{id:"selectContainer"}},[a("el-cascader",{attrs:{options:e.selectOption,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})],1),e._v(" "),a("div",{attrs:{id:"poorCountryCloseBtnContaniner"},on:{click:function(t){return e.closeCharts()}}},[a("el-button",{staticClass:"pcCloseBtn",attrs:{circle:"",icon:"el-icon-close"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.whichArea,expression:"whichArea==2"}],ref:"map",attrs:{id:"poorCountryChart"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.whichArea,expression:"whichArea==3"}],ref:"chargePeopleChart",attrs:{id:"chargePeopleChartContainer"}})])},staticRenderFns:[]};var Z=a("VU/8")(U,X,!1,function(e){a("96DD")},"data-v-7ecdd520",null).exports,j={name:"personManage",props:{adminArea:String},data:function(){return{showEdit:[],chagepeopleInfoShow:!1,showIdc:["","","","",""],adminTableShow:!0,chargePeopleTableShow:!1,userTableShow:!1,adminTableData:[],chargePeopleTableData:[],userTableData:[],search:"",curIndex:null,curIdc:"",chargePeopleTableLength:void 0,chargePersonInfo:{idc:"",name:"",sexy:"",chargearea:"",position:""}}},created:function(){},methods:{handleEdit:function(e,t){var a=this;this.showEdit.forEach(function(e,t){a.showEdit[t]=!1}),this.showIdc[0]=t.idc,this.showIdc[1]=t.name,this.showIdc[2]=t.sexy,this.showIdc[3]=t.chargearea,this.showIdc[4]=t.position,this.curIndex=e,this.curIdc=t.idc,this.showEdit.splice(this.curIndex,1,!0)},refreshAdminTable:function(){var e=this;"全国"==this.adminArea?this.getalladminUrl="http://120.27.240.160:3000/getalladmin":this.getalladminUrl="http://120.27.240.160:3000/getpartadmin?adminarea="+this.adminArea,this.axios.get(this.getalladminUrl).then(function(t){e.adminTableData=t.data})},refreshChargePeopleTable:function(){var e=this;"全国"==this.adminArea?this.getallchargepeopleUrl="http://120.27.240.160:3000/getallchargepeople":this.getallchargepeopleUrl="http://120.27.240.160:3000/getpartchargepeople?chargearea="+this.adminArea,this.showEdit.length=0,this.axios.get(this.getallchargepeopleUrl).then(function(t){e.chargePeopleTableData=t.data,e.chargePeopleTableLength=t.data.length;for(var a=0;a<t.data.length;a++)e.showEdit.push(!1)})},refreshUserTable:function(){var e=this;"全国"==this.adminArea?this.getallusersUrl="http://120.27.240.160:3000/getallusers":this.getallusersUrl="http://120.27.240.160:3000/getpartusers?belong="+this.adminArea,this.axios.get(this.getallusersUrl).then(function(t){e.userTableData=t.data})},selectEvent:function(e){1==e?(this.adminTableShow=!0,this.chargePeopleTableShow=!1,this.userTableShow=!1,this.refreshAdminTable()):2==e?(this.adminTableShow=!1,this.chargePeopleTableShow=!0,this.userTableShow=!1,this.refreshChargePeopleTable()):(this.adminTableShow=!1,this.chargePeopleTableShow=!1,this.userTableShow=!0,this.refreshUserTable())},saveChargePeopleInfo:function(e,t){var a=this;if(this.curIndex===e){var i=t.idc,s=this.showIdc[0],r=this.showIdc[1],n=this.showIdc[2],o=this.showIdc[3],l=this.showIdc[4];this.axios.get("http://120.27.240.160:3000/updatechargepeople?idcold="+i+"&idc="+s+"&name="+r+"&sexy="+n+"&chargearea="+o+"&position="+l).then(function(e){a.$message({message:"更新成功！",type:"success"}),a.refreshChargePeopleTable(),a.showEdit.forEach(function(e,t){a.showEdit[t]=!1}),a.showIdc.forEach(function(e,t){a.showIdc[t]=""})})}},deleteChargePeopleInfo:function(e,t){var a=this,i=t.idc;this.$confirm("确定要删除该负责人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.axios.get("http://120.27.240.160:3000/deletechargeperson?idc="+i).then(function(e){a.$message({message:"删除成功！",type:"success"}),a.refreshChargePeopleTable()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},deleteUserInfo:function(e,t){var a=this,i=t.username;this.$confirm("确定要删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.axios.get("http://120.27.240.160:3000/deleteuser?username="+i).then(function(e){a.$message({message:"删除成功！",type:"success"}),a.refreshUserTable()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},insertChargePerson:function(){var e=this,t=this.chargePersonInfo.idc,a=this.chargePersonInfo.name,i=this.chargePersonInfo.sexy,s=this.chargePersonInfo.chargearea,r=this.chargePersonInfo.position;""!==t&&""!==a&&""!==i&&""!==s&&""!==r?this.axios.get("http://120.27.240.160:3000/insertchargepeople?idc="+t+"&name="+a+"&sexy="+i+"&chargearea="+s+"&position="+r).then(function(t){if(0!=t.data)for(var a in e.$message({message:"新建负责人成功",type:"success"}),e.refreshChargePeopleTable(),e.chagepeopleInfoShow=!1,e.chargePersonInfo)e.chargePersonInfo[a]="";else e.$message.error("新建负责人失败!用户名不能重复")}):this.$message.error("信息必须填写完整!")},closeAdd:function(){this.chagepeopleInfoShow=!1},emitClosePersonManage:function(){this.$emit("closePersonManage")}}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.chagepeopleInfoShow,expression:"chagepeopleInfoShow"}],attrs:{id:"chargePeoleInfoBox"}},[a("div",{attrs:{id:"chargePeoleInfoBoxTitle"}},[e._v("负责人信息表单")]),e._v(" "),a("el-input",{staticClass:"chargePersonInput",attrs:{placeholder:"id号"},model:{value:e.chargePersonInfo.idc,callback:function(t){e.$set(e.chargePersonInfo,"idc",t)},expression:"chargePersonInfo.idc"}}),e._v(" "),a("el-input",{staticClass:"chargePersonInput",attrs:{placeholder:"姓名"},model:{value:e.chargePersonInfo.name,callback:function(t){e.$set(e.chargePersonInfo,"name",t)},expression:"chargePersonInfo.name"}}),e._v(" "),a("el-input",{staticClass:"chargePersonInput",attrs:{placeholder:"性别"},model:{value:e.chargePersonInfo.sexy,callback:function(t){e.$set(e.chargePersonInfo,"sexy",t)},expression:"chargePersonInfo.sexy"}}),e._v(" "),a("el-input",{staticClass:"chargePersonInput",attrs:{placeholder:"负责贫困县"},model:{value:e.chargePersonInfo.chargearea,callback:function(t){e.$set(e.chargePersonInfo,"chargearea",t)},expression:"chargePersonInfo.chargearea"}}),e._v(" "),a("el-input",{staticClass:"chargePersonInput",attrs:{placeholder:"具体位置"},model:{value:e.chargePersonInfo.position,callback:function(t){e.$set(e.chargePersonInfo,"position",t)},expression:"chargePersonInfo.position"}}),e._v(" "),a("div",{attrs:{id:"submitBtnContainer"}},[a("el-button",{attrs:{type:"success"},on:{click:e.insertChargePerson}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"warn"},on:{click:e.closeAdd}},[e._v("取消")])],1)],1),e._v(" "),a("el-container",[a("el-aside",{staticClass:"peopleManageAside",attrs:{width:"200px"}},[a("el-menu",{staticClass:"personManageMenu",attrs:{"text-color":"#fff"},on:{select:e.selectEvent}},[a("el-menu-item",{attrs:{index:"1"}},[e._v("\n          管理员信息查看\n        ")]),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[e._v("\n          负责人信息管理\n        ")]),e._v(" "),a("el-menu-item",{attrs:{index:"3"}},[e._v("\n          用户信息管理\n        ")])],1)],1),e._v(" "),a("el-container",[a("div",{attrs:{id:"personManageCloseBtnContainer"}},[a("el-button",{staticClass:"personManageCloseBtn",attrs:{icon:"el-icon-close",type:"warning",circle:""},on:{click:e.emitClosePersonManage}})],1),e._v(" "),a("el-header",{staticClass:"peopleManageTitle"},[a("el-col",{attrs:{span:24}},[a("div",[e._v("人员信息管理界面")])])],1),e._v(" "),a("el-main",{staticClass:"personManageTable"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.adminTableShow,expression:"adminTableShow"}],attrs:{data:e.adminTableData,"max-height":"600"}},[a("el-table-column",{attrs:{label:"管理员账户",prop:"username"}}),e._v(" "),a("el-table-column",{attrs:{label:"密码",prop:"password"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.adminTableShow,expression:"!adminTableShow"}],attrs:{size:"mini",placeholder:"placeholder"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(e){}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.chargePeopleTableShow,expression:"chargePeopleTableShow"}],attrs:{data:e.chargePeopleTableData,"max-height":"600"}},[a("el-table-column",{attrs:{label:"idc"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showEdit[t.$index]?a("el-input",{attrs:{type:"text"},model:{value:e.showIdc[0],callback:function(t){e.$set(e.showIdc,0,t)},expression:"showIdc[0]"}}):a("span",[e._v(e._s(t.row.idc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showEdit[t.$index]?a("el-input",{attrs:{type:"text"},model:{value:e.showIdc[1],callback:function(t){e.$set(e.showIdc,1,t)},expression:"showIdc[1]"}}):a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showEdit[t.$index]?a("el-input",{attrs:{type:"text"},model:{value:e.showIdc[2],callback:function(t){e.$set(e.showIdc,2,t)},expression:"showIdc[2]"}}):a("span",[e._v(e._s(t.row.sexy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负责贫困县"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showEdit[t.$index]?a("el-input",{attrs:{type:"text"},model:{value:e.showIdc[3],callback:function(t){e.$set(e.showIdc,3,t)},expression:"showIdc[3]"}}):a("span",[e._v(e._s(t.row.chargearea))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showEdit[t.$index]?a("el-input",{attrs:{type:"text"},model:{value:e.showIdc[4],callback:function(t){e.$set(e.showIdc,4,t)},expression:"showIdc[4]"}}):a("span",[e._v(e._s(t.row.position))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-document-add"},on:{click:function(t){e.chagepeopleInfoShow=!e.chagepeopleInfoShow}}},[e._v("添加负责人")])]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.saveChargePeopleInfo(t.$index,t.row)}}},[e._v("save")]),e._v(" "),a("el-button",{staticClass:"deleteBtn",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteChargePeopleInfo(t.$index,t.row)}}},[e._v("Delete")])]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.userTableShow,expression:"userTableShow"}],staticStyle:{width:"100%"},attrs:{data:e.userTableData,"max-height":"600"}},[a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),e._v(" "),a("el-table-column",{attrs:{label:"密码",prop:"passWord"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户类型",prop:"type"}}),e._v(" "),a("el-table-column",{attrs:{label:"身份证号",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属贫困县",prop:"belong"}}),e._v(" "),a("el-table-column",{attrs:{label:"位置",prop:"position"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(e){}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUserInfo(t.$index,t.row)}}},[e._v("Delete")])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(j,J,!1,function(e){a("9Zue")},"data-v-0d9802bf",null).exports,K={name:"messageAdmin",props:{adminArea:String},mounted:function(){var e=this,t=30,a=function(a){if("中国"==a.label)return"continue";e.axios.get("http://120.27.240.160:3000/getpoorbyprovince?province="+a.label).then(function(e){var i=[],s=!0,r=!1,n=void 0;try{for(var o,l=F()(e.data);!(s=(o=l.next()).done);s=!0){var h=o.value;i.push({value:t,label:h.name}),t++}}catch(e){r=!0,n=e}finally{try{!s&&l.return&&l.return()}finally{if(r)throw n}}a.children=i})},i=!0,s=!1,r=void 0;try{for(var n,o=F()(this.selectOption);!(i=(n=o.next()).done);i=!0)a(n.value)}catch(e){s=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw r}}},data:function(){return{adminAllMessage:[],adminAllMessageOther:[],checked:!1,shanChartOptions:{title:{text:"留言情感分布",left:"center",textStyle:{color:"white"}},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left",textStyle:{color:"white"}},series:[{name:"留言情感分布",type:"pie",radius:"50%",data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},selectOption:[{value:1,label:"中国",children:[{value:8888,label:"中国"}]},{value:2,label:"安徽省",children:[]},{value:3,label:"山西省",children:[]},{value:4,label:"河北省",children:[]},{value:5,label:"辽宁省",children:[]},{value:6,label:"吉林省",children:[]},{value:7,label:"黑龙江省",children:[]},{value:8,label:"江苏省",children:[]},{value:9,label:"福建省",children:[]},{value:10,label:"江西省",children:[]},{value:11,label:"河南省",children:[]},{value:12,label:"湖北省",children:[]},{value:13,label:"湖南省",children:[]},{value:14,label:"广东省",children:[]},{value:15,label:"海南省",children:[]},{value:16,label:"四川省",children:[]},{value:17,label:"贵州省",children:[]},{value:18,label:"云南省",children:[]},{value:19,label:"陕西省",children:[]},{value:20,label:"甘肃省",children:[]},{value:21,label:"青海省",children:[]},{value:22,label:"上海市",children:[]},{value:23,label:"天津市",children:[]},{value:24,label:"重庆市",children:[]},{value:25,label:"内蒙古自治区",children:[]},{value:26,label:"广西壮族自治区",children:[]},{value:27,label:"西藏自治区",children:[]},{value:28,label:"宁夏回族自治区",children:[]},{value:29,label:"新疆维吾尔自治区",children:[]}],selectValue:void 0}},methods:{closeMessageBox:function(){this.$emit("closeMessage")},refreshadminAllMessage:function(){var e=this;this.adminAllMessage.length=0,this.adminAllMessageOther.length=0,"全国"==this.adminArea?this.admingetallmessage="http://120.27.240.160:3000/admingetallmessage":this.admingetallmessage="http://120.27.240.160:3000/admingetpartmessage?belong="+this.adminArea,this.axios.get(this.admingetallmessage).then(function(t){var a=!0,i=!1,s=void 0;try{for(var r,n=F()(t.data);!(a=(r=n.next()).done);a=!0){var o=r.value;o.time=o.time.split("T")[0]}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}for(var l=0,h=0,c=0;c<t.data.length;c++)"正向"==t.data[c].type?l++:h++,e.adminAllMessage.push({username:t.data[c].username,time:t.data[c].time,content:t.data[c].content,positive:t.data[c].positive,negative:t.data[c].negative,type:t.data[c].type}),e.adminAllMessageOther.push({username:t.data[c].username,time:t.data[c].time,content:t.data[c].content,positive:t.data[c].positive,negative:t.data[c].negative,type:t.data[c].type});e.shanChartOptions.series[0].data.length=0,e.shanChartOptions.series[0].data.push({value:l,name:"正面情感留言"}),e.shanChartOptions.series[0].data.push({value:h,name:"负面情感留言"}),e.$echarts.init(e.$refs.adminShanEchartChild).setOption(e.shanChartOptions)})},changeList:function(e){if(1==e){this.adminAllMessage.length=0;for(var t=0;t<this.adminAllMessageOther.length;t++)"负向"==this.adminAllMessageOther[t].type&&this.adminAllMessage.push({username:this.adminAllMessageOther[t].username,time:this.adminAllMessageOther[t].time,content:this.adminAllMessageOther[t].content,positive:this.adminAllMessageOther[t].positive,negative:this.adminAllMessageOther[t].negative,type:this.adminAllMessageOther[t].type})}else{this.adminAllMessage.length=0;for(t=0;t<this.adminAllMessageOther.length;t++)this.adminAllMessage.push({username:this.adminAllMessageOther[t].username,time:this.adminAllMessageOther[t].time,content:this.adminAllMessageOther[t].content,positive:this.adminAllMessageOther[t].positive,negative:this.adminAllMessageOther[t].negative,type:this.adminAllMessageOther[t].type})}},deleteMessage:function(e){var t=this,a=this.adminAllMessage[e].username,i=this.adminAllMessage[e].content;this.axios.get("http://120.27.240.160:3000/admindeletemessage?username="+a+"&content="+i).then(function(a){t.$message({message:"删除成功!",type:"success"}),t.adminAllMessage.splice(e,1)})},handleChange:function(e){var t=this;if(1!=e[0]){var a=!0,i=!1,s=void 0;try{for(var r,n=F()(this.selectOption[e[0]-1].children);!(a=(r=n.next()).done);a=!0){var o=r.value;"8888"!=o.value&&(o.value==e[1]&&this.axios.get("http://120.27.240.160:3000/getpoorareaallreq?name="+o.label).then(function(e){if(0!=e.data.length){e.data.forEach(function(e){e.time=e.time.split("T")[0]});var a=0,i=0;t.adminAllMessageOther.length=0;for(n=0;n<e.data.length;n++)"正向"===e.data[n].type?a++:i++,t.adminAllMessageOther.push({username:e.data[n].username,time:e.data[n].time,content:e.data[n].content,positive:e.data[n].positive,negative:e.data[n].negative,type:e.data[n].type});for(o=t.shanChartOptions.series[0].data.length,n=0;n<o;n++)t.shanChartOptions.series[0].data.pop();if(t.shanChartOptions.series[0].data.push({value:a+1,name:"正面情感留言"}),t.shanChartOptions.series[0].data.push({value:i-1,name:"负面情感留言"}),t.$echarts.init(t.$refs.adminShanEchartChild).setOption(t.shanChartOptions),1==t.checked){var s=t.adminAllMessage.length;for(n=0;n<s;n++)t.adminAllMessage.pop();for(n=0;n<t.adminAllMessageOther.length;n++)"负向"==t.adminAllMessageOther[n].type&&t.adminAllMessage.push({username:t.adminAllMessageOther[n].username,time:t.adminAllMessageOther[n].time,content:t.adminAllMessageOther[n].content,positive:t.adminAllMessageOther[n].positive,negative:t.adminAllMessageOther[n].negative,type:t.adminAllMessageOther[n].type})}else{t.adminAllMessage.length=0;for(n=0;n<t.adminAllMessageOther.length;n++)t.adminAllMessage.push({username:t.adminAllMessageOther[n].username,time:t.adminAllMessageOther[n].time,content:t.adminAllMessageOther[n].content,positive:t.adminAllMessageOther[n].positive,negative:t.adminAllMessageOther[n].negative,type:t.adminAllMessageOther[n].type})}}else{t.adminAllMessageOther.length=0;for(var r=t.adminAllMessage.length,n=0;n<r;n++)t.adminAllMessage.pop();for(var o=t.shanChartOptions.series[0].data.length,n=0;n<o;n++)t.shanChartOptions.series[0].data.pop();t.$echarts.init(t.$refs.adminShanEchartChild).setOption(t.shanChartOptions)}}))}}catch(e){i=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}}else this.refreshadminAllMessage()}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"messageAdminBox"}},[a("div",{attrs:{id:"closeAdminMessageBtnContainer"}},[a("el-button",{attrs:{circle:"",icon:"el-icon-close"},on:{click:e.closeMessageBox}})],1),e._v(" "),a("div",{attrs:{id:"messageAdminLeftList"}},[a("div",{attrs:{id:"messageAdminLeftListTitle"}},[e._v("\n        留言列表\n      ")]),e._v(" "),a("el-checkbox",{staticClass:"checkboxOfAdmin",on:{change:e.changeList},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("只显示负面评论")]),e._v(" "),a("el-cascader",{directives:[{name:"show",rawName:"v-show",value:"全国"==e.adminArea,expression:"adminArea=='全国'"}],staticClass:"adminMessageCascader choosePoorArea",attrs:{options:e.selectOption,props:{expandTrigger:"hover"},placeholder:"选择区域"},on:{change:e.handleChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}}),e._v(" "),a("div",{attrs:{id:"messageContentContainer"}},e._l(e.adminAllMessage,function(t,i){return a("div",{key:i,staticClass:"singleAdminListContent"},[a("div",{staticClass:"deleteMessageBtnContainer",on:{click:function(t){return e.deleteMessage(i)}}},[a("el-button",{staticClass:"deleteMessageBtn",attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1),e._v(" "),a("div",{staticClass:"singleAdminListNameAndTime"},[a("span",{staticClass:"singleAdminListName"},[e._v(e._s(t.username))]),e._v(" "),a("span",{staticClass:"singleAdminListTime"},[e._v(e._s(t.time))])]),e._v(" "),a("div",{staticClass:"singleAdminListText"},[e._v("\n          "+e._s(t.content)+"\n        ")]),e._v(" "),a("div",{staticClass:"singleAdminListTypeAndPositive"},[a("span",[e._v("AI情感分析结果:      ")]),e._v(" "),"正向"==t.type?a("img",{staticClass:"smell",attrs:{src:"static/img/笑脸 (1).png"}}):a("img",{staticClass:"smell",attrs:{src:"static/img/不高兴.png"}}),e._v(" "),a("el-progress",{staticClass:"positiveOrNegative",attrs:{"text-inside":!0,"stroke-width":26,percentage:100*t.positive,color:""}})],1)])}),0)],1),e._v(" "),a("div",{attrs:{id:"messageAdminRightChart"}},[a("div",{attrs:{id:"messageAdminRightChartTitle"}},[e._v("\n        留言情感分析\n      ")]),e._v(" "),a("div",{attrs:{id:"messageCurrentNum"}},[e._v("\n        现有留言数量:    "),a("span",[e._v(e._s(e.adminAllMessage.length))])]),e._v(" "),a("div",{ref:"adminShanEchartChild",attrs:{id:"ShanEchartContainer"}})])])},staticRenderFns:[]};var te={name:"admin",components:{listItem:G,functionList:W,adminCharts:Z,personManage:Q,messageAdmin:a("VU/8")(K,ee,!1,function(e){a("/wR1")},"data-v-69f2d941",null).exports},created:function(){var e=this;this.axios.get("http://120.27.240.160:3000/getAllrequest").then(function(t){e.listData=t.data})},props:{earseLoad:Function},mounted:function(){var e=this;setTimeout(function(){e.earseLoad()},1e3),this.adminArea=this.$route.params.adminArea,this.createScene(),this.createList(),this.initUrl()},data:function(){return{Is3DHeatFlag:!1,messageAdminShow:!1,adminArea:"",personManageShow:!1,Is3DHeatMapShow:!1,listData:{},selectIndex:"1",detailsShow:!1,curItem:{state:"",name:"",id:"",time:"",endtime:"",text:"",position:"",phone:""},chargePeopleData:[],imgUrls:[],options:[{value:"500",label:"500m"},{value:"1000",label:"1000m"},{value:"2000",label:"2000m"},{value:"3000",label:"3000m"}],handleShow:!1,curIndex:-1,value:"",chargePeopleList:[],switchs:[!0,!0,!0,!0],chartShow:!1}},methods:{closePersonManageBox:function(){this.personManageShow=!1},refreshChargeLine:function(){var e=this;this.chargeLine.graphics.removeAll();for(var t=0;t<this.chargePeopleData.length;t++)!function(t){e.axios.get("http://120.27.240.160:3000/getchargepeoplebyidc?idc="+e.chargePeopleData[t].idc).then(function(a){var i=parseFloat(e.chargePeopleData[t].longitude),s=parseFloat(e.chargePeopleData[t].latitude),r=!0,n=!1,o=void 0;try{for(var l,h=F()(a.data);!(r=(l=h.next()).done);r=!0){var c,d=l.value,u={type:"polyline",paths:[[i,s],[parseFloat(d.longitude),parseFloat(d.latitude)]]};"2"==d.state?c="rgb(254,230,50)":"1"==d.state&&(c="#54FF9F");var p={type:"simple-line",color:c,width:2},m=new e.Graphic({geometry:u,symbol:p});e.chargeLine.graphics.add(m)}}catch(e){n=!0,o=e}finally{try{!r&&h.return&&h.return()}finally{if(n)throw o}}})}(t)},createList:function(){var e=this;"全国"==this.adminArea?this.getAllrequestUrl="http://120.27.240.160:3000/getAllrequest":this.getAllrequestUrl="http://120.27.240.160:3000/getpartrequest?belong="+this.adminArea,this.axios.get(this.getAllrequestUrl).then(function(t){e.listData=t.data})},closeMessage:function(){this.messageAdminShow=!1},openMessageAdmin:function(){var e=this;this.messageAdminShow=!this.messageAdminShow,this.personManageShow=!1,this.chartShow=!1,1==this.messageAdminShow&&setTimeout(function(){e.$refs.adminMessageChild.refreshadminAllMessage()},500)},initUrl:function(){"全国"==this.adminArea?this.someRequestUrl="http://120.27.240.160:3000/getsomerequest":this.someRequestUrl="http://120.27.240.160:3000/getpartsomerequest?belong="+this.adminArea},openPersonManage:function(){this.personManageShow=!this.personManageShow,this.chartShow=!1,this.messageAdminShow=!1,this.$refs.personManageChild.refreshAdminTable()},createScene:function(){var e=this;Object(p.loadModules)(["dojo/_base/lang","esri/config","esri/Map","esri/views/SceneView","esri/layers/SceneLayer","esri/layers/FeatureLayer","esri/geometry/Point","esri/WebScene","esri/layers/GraphicsLayer","esri/Graphic","esri/geometry/Circle","esri/widgets/LayerList"],{url:"https://js.arcgis.com/4.20/",css:"https://js.arcgis.com/4.20/esri/themes/light/main.css"}).then(function(t){var a=u()(t,12),i=a[0],s=a[1],r=(a[2],a[3]),n=(a[4],a[5]),o=a[6],l=a[7],h=a[8],c=a[9],d=a[10];a[11];e.Circle=d,e.Graphic=c,e.Point=o,e.FeatureLayer=n,s.apiKey="AAPKf36563646971486495a735ebc79605460PP-JogfopxIQxEW9cdNBRAYKlZVdvdzQhCtLCo4qsJ3TqjCa-dF-Pc25egARMZ4";var p=new l({portalItem:{id:"c1ec1aedc5a34777b03239778db8f17c"}});e.scene=p;var m=new r({container:"reqMap",map:p,environment:{starsEnabled:!1,atmosphereEnabled:!1,background:{type:"color",color:"rgb(0,15,26)"}},zoom:1});e.view=m;var v=function(){function e(t){E()(this,e),this.view=t.view,this.config=t.config,this.canvas=null,this.context=null,this.minnum=1,this.maxnum=1,this.visible=!0,this.createCanvas()}return R()(e,[{key:"createCanvas",value:function(){var e=document.createElement("canvas");e.width=this.view.width,e.height=this.view.height,e.setAttribute("id","heatmap"),e.style.position="absolute",e.style.top=0,e.style.left=0,document.getElementsByClassName("esri-view-surface")[0].appendChild(e),this.canvas=e,this.context=document.getElementById("heatmap").getContext("2d"),this.startMapEventListeners()}},{key:"convertHeatmapData",value:function(e){for(var t=[],a=0;a<e.length;a++){var i=this.view.toScreen(new o({longitude:e[a][0],latitude:e[a][1]}));3==e[0].length?t.push([Math.round(i.x),Math.round(i.y),e[a][2]]):t.push([Math.round(i.x),Math.round(i.y),1]),this.minnum>e[a][2]&&(this.minnum=e[a][2]),this.maxnum<e[a][2]&&(this.maxnum=e[a][2])}return{points:t,min:this.minnum,max:this.maxnum}}},{key:"addPoint",value:function(e){var t=this;this.data=e;var a=this.convertHeatmapData(e);a.points.forEach(function(e){t.context.beginPath();var i=(e[2]-a.min)/(a.max-a.min);t.context.globalAlpha=i,t.context.arc(e[0],e[1],t.config.radius,0,2*Math.PI,!0);var s=t.context.createRadialGradient(e[0],e[1],0,e[0],e[1],t.config.radius);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),t.context.fillStyle=s,t.context.closePath(),t.context.fill()}),this.MapColors()}},{key:"getColorPaint",value:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),a=this.config.gradient;e.width=256,e.height=1;var i=t.createLinearGradient(0,0,256,1);for(var s in a)i.addColorStop(s,a[s]);return t.fillStyle=i,t.fillRect(0,0,256,1),t.getImageData(0,0,256,1).data}},{key:"MapColors",value:function(){for(var e=this.getColorPaint(),t=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),a=t.data,i=0;i<a.length;i++){var s=4*a[i];s&&(a[i-3]=e[s],a[i-2]=e[s+1],a[i-1]=e[s+2])}this.context.putImageData(t,0,0,0,0,this.canvas.width,this.canvas.height)}},{key:"freshenLayer",value:function(){this.clearCanvas(),this.addPoint(this.data)}},{key:"deleteCanvas",value:function(){var e=this;this.context.clearRect(0,0,this.view.width,this.view.height);var t=this.view;t.watch("extent",i.hitch(this,function(){e.context.clearRect(0,0,e.view.width,e.view.height)})),t.watch("camera",i.hitch(this,function(){e.context.clearRect(0,0,e.view.width,e.view.height)}))}},{key:"clearCanvas",value:function(){this.context.clearRect(0,0,this.view.width,this.view.height)}},{key:"startMapEventListeners",value:function(){var e=this,t=this.view;t.watch("extent",i.hitch(this,function(){e.visible&&e.freshenLayer()})),t.watch("camera",i.hitch(this,function(){e.visible&&e.freshenLayer()}))}}]),e}();e.HeatLayer=v;e.heatMapConfig={radius:15,gradient:{.2:"rgba(0,0,255,0.2)",.3:"rgba(43,111,231,0.3)",.4:"rgba(2,192,241,0.4)",.6:"rgba(44,222,148,0.6)",.8:"rgba(254,237,83,0.8)",.95:"rgba(255,118,50,0.9)",1:"rgba(255,64,28,1)"}},setTimeout(function(){var t=new h;e.reqPoint=t,p.layers.unshift(t);var a=new h;e.finishedPoint=a,p.layers.unshift(a);var i=new h;e.ingPoint=i,p.layers.unshift(i);var s=new h;e.chargePeople=s,p.layers.unshift(s);var r,n=new h;e.chargeLine=n,p.layers.unshift(n),r="全国"===e.adminArea?"http://120.27.240.160:3000/getreqposition":"http://120.27.240.160:3000/getreqpositionbyname?belong="+e.adminArea,e.axios.get(r).then(function(e){var s={type:"picture-marker",url:"static/img/成功.png",width:"25px",height:"25px"},r={type:"picture-marker",url:"static/img/等待.png",width:"25px",height:"25px"},n={type:"picture-marker",url:"static/img/wb_医院.png",width:"25px",height:"25px"};e.data.forEach(function(e,l){var h=parseFloat(e.longitude),d=parseFloat(e.latitude);0==l&&m.goTo({target:[h,d],tilt:20,zoom:16},{duration:3e3});var u=new o({latitude:d,longitude:h}),p=new c(u);0==e.state?(p.symbol=n,t.graphics.add(p)):1==e.state?(p.symbol=s,a.graphics.add(p)):(p.symbol=r,i.graphics.add(p))})}),e.axios.get("http://120.27.240.160:3000/getchargeposition").then(function(t){e.chargePeopleData.length=0,t.data.forEach(function(t,a){e.chargePeopleData.push({idc:t.idc,longitude:t.longitude,latitude:t.latitude});var i=parseFloat(t.longitude),r=parseFloat(t.latitude),n=new o({latitude:r,longitude:i}),l=new c(n);l.symbol={type:"picture-marker",url:"static/img/负责人.png",width:"40px",height:"40px"},s.graphics.add(l)}),e.refreshChargeLine()})},3e3)})},handerSelect:function(e){var t=this;1==e?this.axios.get(this.getAllrequestUrl).then(function(e){t.listData=e.data,t.selectIndex="1"}):2==e&&this.axios.get(this.someRequestUrl).then(function(e){t.listData=e.data,t.selectIndex="2"})},refreshList:function(){var e=this;"1"==this.selectIndex?this.axios.get(this.getAllrequestUrl).then(function(t){e.listData=t.data,e.selectIndex="1"}):this.axios.get(this.someRequestUrl).then(function(t){e.listData=t.data,e.selectIndex="2"})},openDetails:function(e){this.handleShow=!1,this.imgUrls.length=0,this.curItem.name=this.listData[e].name,this.curItem.position=this.listData[e].position,this.curItem.state=this.listData[e].state,this.curItem.id=this.listData[e].id,this.curItem.phone=this.listData[e].phone,this.curItem.time=this.listData[e].time,this.curItem.entime=this.listData[e].endtime,this.curItem.text=this.listData[e].text;for(var t=0;t<5;t++)""!=this.listData[e]["photo"+(t+1)]&&this.imgUrls.push("data:image/png;base64,"+this.listData[e]["photo"+(t+1)]);this.detailsShow=!0,this.view.goTo({target:[parseFloat(this.listData[e].longitude),parseFloat(this.listData[e].latitude)],tilt:20,zoom:16},{duration:1e3})},closeDetail:function(){this.detailsShow=!1},drawCircle:function(e){var t=this;void 0!=this.circleGeometry&&this.view.graphics.removeAll();var a=new this.Circle({center:[parseFloat(this.listData[this.curIndex].longitude),parseFloat(this.listData[this.curIndex].latitude)],geodesic:!0,numberOfPoints:100,radius:parseInt(e),radiusUnit:"meters"});this.circleGeometry=a,this.view.graphics.add(new this.Graphic({geometry:a,symbol:{type:"simple-fill",color:[205,38,38,.5]}}));this.chargePeople.graphics.removeAll();var i=6378137,s=Math.PI;function r(e){return e*s/180}for(var n=this.chargePeopleList.length,o=0;o<n;o++)this.chargePeopleList.pop();this.axios.get("http://120.27.240.160:3000/getchargeposition").then(function(a){a.data.forEach(function(a,s){var n=parseFloat(a.longitude),o=parseFloat(a.latitude);if(function(e,t,a,s){var n,o,l,h,c=r((e+a)/2),d=r((e-a)/2),u=r((t-s)/2),p=Math.sin(d),m=Math.sin(u),v=Math.sin(c),g=i;return n=(p*=p)*(1-(m*=m))+(1-(v*=v))*m,o=(1-p)*(1-m)+v*m,2*(l=Math.atan(Math.sqrt(n/o)))*g*(1+1/298.257*((3*(h=Math.sqrt(n*o)/l)-1)/2/o*v*(1-p)-(3*h+1)/2/n*(1-v)*p))}(parseFloat(t.listData[t.curIndex].latitude),parseFloat(t.listData[t.curIndex].longitude),o,n)<=parseInt(e)){"0"==a.state?a.state="空闲中":a.state="忙碌中",t.chargePeopleList.push(a);var l=new t.Point({latitude:o,longitude:n}),h=new t.Graphic(l);h.symbol={type:"picture-marker",url:"static/img/负责人.png",width:"40px",height:"40px"},t.chargePeople.graphics.add(h)}})})},openHandle:function(e){var t=this;this.curIndex=e,void 0!=this.circleGeometry&&this.view.graphics.removeAll(),this.view.goTo({target:[parseFloat(this.listData[e].longitude),parseFloat(this.listData[e].latitude)],tilt:20,zoom:16},{duration:1e3});for(var a=this.chargePeopleList.length,i=0;i<a;i++)this.chargePeopleList.pop();this.axios.get("http://120.27.240.160:3000/getchargepeople?id="+this.listData[e].id).then(function(e){e.data.forEach(function(e,a){t.chargePeopleList.push(e)})}),this.handleShow=!0,this.detailsShow=!1},selectChargePeople:function(e){var t=this;"忙碌中"!=e.state?this.$confirm("确认指派该负责人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.get("http://120.27.240.160:3000/updateState?idc="+e.idc+"&id="+t.listData[t.curIndex].id).then(function(e){t.$message({message:"指派成功!",type:"success"}),t.handleShow=!1,t.refreshList(),t.chargePeople.graphics.removeAll(),t.axios.get("http://120.27.240.160:3000/getchargeposition").then(function(e){e.data.forEach(function(e,a){var i=parseFloat(e.longitude),s=parseFloat(e.latitude),r=new t.Point({latitude:s,longitude:i}),n=new t.Graphic(r);n.symbol={type:"picture-marker",url:"static/img/负责人.png",width:"40px",height:"40px"},t.chargePeople.graphics.add(n)})}),t.refreshReq(),t.view.graphics.removeAll()})}).catch(function(){t.$message({type:"info",message:"取消指派"})}):this.$message.error("该负责人正在处理其他申请！无法指派")},changeS1:function(e){this.chargePeople.opacity=0==e?0:1},changeS2:function(e){this.reqPoint.opacity=0==e?0:1,this.Is3DHeatMapShow&&this.heatMapLoad()},changeS3:function(e){this.ingPoint.opacity=0==e?0:1,this.Is3DHeatMapShow&&this.heatMapLoad()},changeS4:function(e){this.finishedPoint.opacity=0==e?0:1,this.Is3DHeatMapShow&&this.heatMapLoad()},heatMapLoad:function(){var e=this,t=[];this.heatmap.data&&this.heatmap.clearCanvas(),this.axios.get("http://120.27.240.160:3000/getreqposition").then(function(a){a.data.forEach(function(a,i){if(e.switchs[0]&&0==a.state){var s=parseFloat(a.longitude),r=parseFloat(a.latitude);t.push([s,r,40])}else if(e.switchs[1]&&1==a.state){s=parseFloat(a.longitude),r=parseFloat(a.latitude);t.push([s,r,40])}else if(e.switchs[2]&&2==a.state){s=parseFloat(a.longitude),r=parseFloat(a.latitude);t.push([s,r,40])}}),e.heatmap.addPoint(t)})},showCharge:function(){var e=this;this.handleShow=!1,this.chargePeople.graphics.removeAll(),this.view.graphics.removeAll();for(var t=this.chargePeopleList.length,a=0;a<t;a++)this.chargePeopleList.pop();this.axios.get("http://120.27.240.160:3000/getchargepeople?id="+this.listData[this.curIndex].id).then(function(t){t.data.forEach(function(t,a){e.chargePeopleList.push(t)})}),this.axios.get("http://120.27.240.160:3000/getchargeposition").then(function(t){t.data.forEach(function(t,a){var i=parseFloat(t.longitude),s=parseFloat(t.latitude),r=new e.Point({latitude:s,longitude:i}),n=new e.Graphic(r);n.symbol={type:"picture-marker",url:"static/img/负责人.png",width:"40px",height:"40px"},e.chargePeople.graphics.add(n)})})},refreshReq:function(){var e=this;this.reqPoint.graphics.removeAll(),this.finishedPoint.graphics.removeAll(),this.ingPoint.graphics.removeAll();var t={type:"picture-marker",url:"static/img/成功.png",width:"25px",height:"25px"},a={type:"picture-marker",url:"static/img/等待.png",width:"25px",height:"25px"},i={type:"picture-marker",url:"static/img/wb_医院.png",width:"25px",height:"25px"};this.axios.get("http://120.27.240.160:3000/getreqposition").then(function(s){s.data.forEach(function(s,r){var n=parseFloat(s.longitude),o=parseFloat(s.latitude),l=new e.Point({latitude:o,longitude:n}),h=new e.Graphic(l);0==s.state?(h.symbol=i,e.reqPoint.graphics.add(h)):1==s.state?(h.symbol=t,e.finishedPoint.graphics.add(h)):(h.symbol=a,e.ingPoint.graphics.add(h))})})},adminChartShow:function(){this.chartShow=!this.chartShow,this.personManageShow=!1,this.messageAdminShow=!1},analysis3D:function(){if(this.Is3DHeatFlag)this.Is3DHeatMapShow?(this.Is3DHeatMapShow=!this.Is3DHeatMapShow,this.heatmap.clearCanvas(),this.heatmap.visible=!1):(this.Is3DHeatMapShow=!this.Is3DHeatMapShow,this.heatMapLoad(),this.heatmap.visible=!0);else{this.Is3DHeatFlag=!0,this.Is3DHeatMapShow=!0;var e={view:this.view,config:this.heatMapConfig},t=new this.HeatLayer(e);this.heatmap=t,this.heatMapLoad()}},closeCharts:function(){this.chartShow=!1}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"adminBody"}},[a("div",{attrs:{id:""}}),e._v(" "),a("div",{attrs:{id:"reqMap"}}),e._v(" "),a("div",{attrs:{id:"adminAreaContainer"}},[a("span",[e._v("负责区域:")]),e._v(e._s(e.adminArea)+"\n    ")]),e._v(" "),a("div",{attrs:{id:"reqList"}},[a("div",{attrs:{id:"reqListTitle"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#5B55E6","default-active":"1","active-text-color":"#00ffff"},on:{select:e.handerSelect}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-folder-opened"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("所有请求")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2",icon:"el-icon-loading"}},[a("i",{staticClass:"el-icon-loading"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("待处理")])]),e._v(" "),a("el-button",{attrs:{id:"reflashButton",icon:"el-icon-refresh-right"},on:{click:e.refreshList}},[e._v("刷新")])],1)],1),e._v(" "),a("div",{attrs:{id:"listContent"}},e._l(e.listData,function(t,i){return a("listItem",{key:i,ref:"listItem1"+i,refInFor:!0,attrs:{itemData:t,index:i,openDetails:e.openDetails,openHandle:e.openHandle}})}),1)]),e._v(" "),a("transition",{attrs:{name:"detailAni"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.detailsShow,expression:"detailsShow"}],attrs:{id:"details"}},[a("div",{attrs:{id:"closeBtn"}},[a("el-button",{staticClass:"cBtn",attrs:{icon:"el-icon-error"},on:{click:e.closeDetail}})],1),e._v(" "),a("div",{attrs:{id:"info"}},[a("div",{attrs:{id:"iphoto"}},[a("img",{attrs:{src:"static/img/男头像.png",id:"ava"}})]),e._v(" "),a("div",{attrs:{id:"iname"}},[e._v(e._s(e.curItem.name))]),e._v(" "),a("div",{attrs:{id:"istate"}},[e._v(e._s("申请状态 "+e.curItem.state))]),e._v(" "),a("div",{attrs:{id:"iphone"}},[e._v(e._s("联系电话 "+e.curItem.phone))]),e._v(" "),a("div",{attrs:{id:"iposition"}},[e._v(e._s("申请地点 "+e.curItem.position))]),e._v(" "),a("div",{attrs:{id:"iid"}},[e._v(e._s("申请人身份证号 "+e.curItem.id))]),e._v(" "),a("div",{attrs:{id:"itime"}},[e._v(e._s("申请时间 "+e.curItem.time))]),e._v(" "),a("div",{attrs:{id:"iendtime"}},[e._v(e._s("审批时间"+e.curItem.endtime))])]),e._v(" "),a("div",{attrs:{id:"textInfo"}},[a("div",{attrs:{id:"itext"}},[e._v("\n          "+e._s("   "+e.curItem.text)+"\n        ")])]),e._v(" "),a("div",{attrs:{id:"photoInfo"}},[a("div",{attrs:{id:"iimage"}},e._l(e.imgUrls,function(e){return a("img",{key:e,staticClass:"detailImg",attrs:{src:e}})}),0)])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.handleShow,expression:"handleShow"}],attrs:{id:"handleReq"}},[a("div",{attrs:{type:"primary"}},[a("el-button",{staticClass:"closeBtn2",attrs:{id:"closeBtn2",circle:"",icon:"el-icon-close"},on:{click:e.showCharge}})],1),e._v(" "),a("div",{attrs:{id:"selectBox"}},[a("div",{attrs:{id:"selectDesc"}},[e._v("\n          缓冲区半径\n        ")]),e._v(" "),a("div",{attrs:{id:"elSelect"}},[a("el-select",{attrs:{placeholder:"选择缓冲区半径"},on:{change:e.drawCircle},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("div",{attrs:{id:"chargePeopleList"}},[a("el-table",{staticClass:"c",attrs:{data:e.chargePeopleList,height:"573"},on:{"row-dblclick":e.selectChargePeople}},[a("el-table-column",{attrs:{prop:"idc",label:"id",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sexy",label:"性别",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"处理数",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"评分",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"位置",width:"200"}})],1)],1)]),e._v(" "),a("div",{attrs:{id:"layerSwitch"}},[a("el-switch",{staticClass:"switch1",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"负责人点",width:50},on:{change:e.changeS1},model:{value:e.switchs[0],callback:function(t){e.$set(e.switchs,0,t)},expression:"switchs[0]"}}),e._v(" "),a("el-switch",{staticClass:"switch1",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"未处理",width:50},on:{change:e.changeS2},model:{value:e.switchs[1],callback:function(t){e.$set(e.switchs,1,t)},expression:"switchs[1]"}}),e._v(" "),a("el-switch",{staticClass:"switch1",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"处理中",width:50},on:{change:e.changeS3},model:{value:e.switchs[2],callback:function(t){e.$set(e.switchs,2,t)},expression:"switchs[2]"}}),e._v(" "),a("el-switch",{staticClass:"switch1",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"处理完成",width:50},on:{change:e.changeS4},model:{value:e.switchs[3],callback:function(t){e.$set(e.switchs,3,t)},expression:"switchs[3]"}})],1),e._v(" "),a("div",{attrs:{id:"function"}},[a("function-list",{attrs:{adminChartShow:e.adminChartShow,openPersonManage:e.openPersonManage,openMessageAdmin:e.openMessageAdmin,analysis3D:e.analysis3D}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.chartShow,expression:"chartShow"}],attrs:{id:"acharts"}},[a("adminCharts",{attrs:{closeCharts:e.closeCharts,adminArea:e.adminArea}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.personManageShow,expression:"personManageShow"}],attrs:{id:"personManageContainer"}},[a("person-manage",{ref:"personManageChild",attrs:{adminArea:e.adminArea},on:{closePersonManage:e.closePersonManageBox}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.messageAdminShow,expression:"messageAdminShow"}],ref:"adminMessage",attrs:{id:"messageAdminContainer"}},[a("messageAdmin",{ref:"adminMessageChild",attrs:{adminArea:e.adminArea},on:{closeMessage:e.closeMessage}})],1)],1)},staticRenderFns:[]};var ie=a("VU/8")(te,ae,!1,function(e){a("0SV3")},"data-v-5dafaba4",null).exports;i.default.use(l.a);var se=new l.a({routes:[{path:"/admin",name:"admin",component:ie,props:{default:!0,sidebar:!1},params:""},{path:"/mapshow",component:C},{path:"/register",component:N,meta:{login:!0,normal:!1,poor:!1,admin:!1}},{path:"/",redirect:"/mapshow"}]}),re=a("XLwt"),ne=(a("OWql"),a("mtWM")),oe=a.n(ne),le=a("dAEq"),he=a.n(le);a.d(t,"eventBus",function(){return ce}),i.default.prototype.$echarts=re,i.default.prototype.axios=oe.a,i.default.use(r.a),i.default.prototype.HOST="./api";var ce=new i.default;i.default.use(he.a,{ak:"7FMYOvOtgAV06WyKIsumzXsGUBZsgGhb"}),new i.default({el:"#app",components:{App:o},template:"<App/>",router:se})},fHBs:function(e,t){},gid0:function(e,t){},ik31:function(e,t){},j5UU:function(e,t){},ncYI:function(e,t){},p25U:function(e,t){},rj6T:function(e,t){},tvR6:function(e,t){},zOve:function(e,t){},zWM1:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bb9a69a801273f044362.js.map